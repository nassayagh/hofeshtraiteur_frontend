import{a6 as k,r as l,Z as S,o as V,_ as L,w as r,b as s,d as n,t as d,a as b,V as E,c as F,a4 as B,a8 as C,a7 as N,bZ as q,aK as p}from"./index-BrNXYtcK.js";import{V as R,F as T}from"./vee-validate.esm-4kXXlUyw.js";import"./customizer-niSHJ0I6.js";import{e as h}from"./VField-ByTdy9Oo.js";import{V as _}from"./VTextField-CIkQcWao.js";const $={class:"d-flex flex-wrap align-center my-3 ml-n2"},U={class:"ml-sm-auto"},z={key:0,class:"mt-2"},K=k({__name:"LoginForm",setup(A){const v=l();l(!1);const c=l(!1);l(!1);const g=l(!1),u=l(null),i=l(null),x=l([e=>!!e||p("Le mot de passe est requis"),e=>e&&e.length>=8||p("Le mot de passe doit comporter moins de 8 caractères")]),y=l([e=>!!e||p("L’e-mail est requis"),e=>/.+@.+\..+/.test(e)||"E-mail must be valid"]);function w(e,{setErrors:t}){var o;const m=N();(o=v.value)==null||o.validate().then(({valid:f})=>f&&i.value!=null&&u.value!=null&&i.value.toString().length>3&&u.value.toString().length>3?m.login(i.value,u.value).then(a=>{if(g.value=!1,a.data.error){t({apiError:a.data.message});return}m.user=a.data,localStorage.setItem("user",JSON.stringify(a.data)),q.push("/")}).catch(a=>t({apiError:a})).then(()=>{g.value=!1}):t({apiError:p("Veuillez soumettre des valeurs valides")}))}return(e,t)=>{const m=S("RouterLink");return V(),L(C(T),{onSubmit:w,ref_key:"refForm",ref:v,modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o),class:"mt-5"},{default:r(({errors:o,isSubmitting:f})=>[s(h,{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},{default:r(()=>[n(d(e.$t("E-mail")),1)]),_:1}),s(_,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),rules:y.value,class:"mb-8",required:"","hide-details":"auto"},null,8,["modelValue","rules"]),s(h,{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},{default:r(()=>[n(d(e.$t("Mot de passe")),1)]),_:1}),s(_,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),rules:x.value,required:"","hide-details":"auto",type:"password",class:"pwdInput"},null,8,["modelValue","rules"]),b("div",$,[b("div",U,[s(m,{to:"",class:"text-primary text-decoration-none text-body-1 opacity-1 font-weight-medium"},{default:r(()=>[n(d(e.$t("Mot de passe oublié ?")),1)]),_:1})])]),s(E,{size:"large",loading:f,color:"primary",disabled:c.value,block:"",type:"submit",flat:""},{default:r(()=>[n(d(e.$t("Connexion")),1)]),_:2},1032,["loading","disabled"]),o.apiError?(V(),F("div",z,[s(R,{color:"error"},{default:r(()=>[n(d(o.apiError),1)]),_:2},1024)])):B("",!0)]),_:1},8,["modelValue"])}}});export{K as _};
