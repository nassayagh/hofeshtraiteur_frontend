import{a6 as S,r as u,o as i,_ as w,w as l,b as a,a as t,t as e,a8 as f,V as M,d as k,c,a4 as D,a5 as x,ae as L,n as Y,af as j,X as b,h as J}from"./index-D4NqtLTp.js";import{V as C,_ as B}from"./BaseBreadcrumb-Bp39IOCQ.js";import"./demands-Cyboid_1.js";import{u as I}from"./Controller-DxG5QcMm.js";import{f as v,a as F,b as G}from"./formatters-ChhyeSK0.js";import{a as T}from"./VSpacer-lO7MNm1A.js";import{V as O}from"./VTooltip-s-EtZT8E.js";import{V as E,a as A}from"./VCard-DA9krIf3.js";import{u as H}from"./customers-DMpjK90p.js";import{V as z}from"./VAutocomplete-DDopvPbQ.js";import{u as U}from"./hall-1_kRcPty.js";import{u as X}from"./payments-Dag48SqF.js";import{u as q}from"./paymentMethod-Bq_FzliS.js";import{u as K}from"./eventType-BHrr9HVE.js";import{V as g,a as Q}from"./VRow-DWLkePA4.js";import"./VAvatar-DumI1WKs.js";import"./VSelect-aUsnZRPj.js";import"./VTextField-Bt8H8ul5.js";import"./VMenu-qMil_YxV.js";import"./filter-N7bs83nJ.js";const W={class:"d-sm-flex align-center"},Z={class:"text-h4"},tt={class:"ml-auto"},et={class:"text-subtitle-1 font-weight-medium"},st={key:0,class:"text-subtitle-1 font-weight-medium"},ot={class:"text-subtitle-1 font-weight-medium"},at={key:1,class:"text-subtitle-1 font-weight-medium"},lt={class:"text-subtitle-1 font-weight-medium"},nt=["onClick"],it={class:"text-no-wrap"},rt={key:0,class:"text-no-wrap"},dt={key:1,class:"text-no-wrap text-truncate"},ut={class:"text-no-wrap text-truncate"},N=S({__name:"PrestastionTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=u(0),d=I(),s=p;return d.fetchStats(s.options).then(h=>{r.value=h.data.data,_.value=h.data.total||0}),(h,o)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",W,[t("div",null,[t("h2",Z,e(p.title)+": "+e(_.value||0)+" - "+e(f(v)(r.value.reduce((n,m)=>parseFloat(n)+m.service_total,0))),1)]),a(T),t("div",tt,[a(M,{variant:"tonal",color:"primary",density:"compact",to:`/prestations?status=${p.options.status}`},{default:l(()=>[k(e(h.$t("Voir plus")),1)]),_:1},8,["to"])])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",et,e(h.$t("Nom")),1),s.options.statistics!="closed"?(i(),c("th",st,e(h.$t("Date")),1)):D("",!0),t("th",ot,e(h.$t("Montant")),1),s.options.statistics!="closed"?(i(),c("th",at,e(h.$t("Lieu")),1)):D("",!0),t("th",lt,e(h.$t("Type")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,n=>(i(),c("tr",{key:n.id,class:"month-item cursor-pointer",onClick:m=>h.$router.push("/prestations/"+n.id)},[t("td",it,e(n.customer?`${n.customer.firstname} ${n.customer.lastname}`:"-"),1),s.options.statistics!="closed"?(i(),c("td",rt,e(f(F)(n.event_date)),1)):D("",!0),t("td",null,e(f(v)(n.service_total)),1),s.options.statistics!="closed"?(i(),c("td",dt,[a(O,{text:n.hall?n.hall.name:""},{activator:l(({props:m})=>[n.hall?(i(),c("span",L(Y({key:0},m)),e(n.hall.name.length<10?n.hall.name:`${n.hall.name.replace(`
`," ").slice(0,9)}...`),17)):D("",!0)]),_:2},1032,["text"])])):D("",!0),t("td",ut,[a(O,{text:n.event_type},{activator:l(({props:m})=>[t("span",L(j(m)),e(n.event_type==null||n.event_type.length<10?n.event_type:`${n.event_type.replace(`
`," ").slice(0,9)}...`),17)]),_:2},1032,["text"])])],8,nt))),128))])]),_:1})]),_:1})]),_:1}))}}),ct={class:"d-sm-flex align-center"},pt={class:"text-h4"},_t={class:"ml-auto"},ht={class:"text-subtitle-1 font-weight-medium"},mt={class:"text-subtitle-1 font-weight-medium"},$t={class:"text-subtitle-1 font-weight-medium"},ft={class:"text-subtitle-1 font-weight-medium"},yt=["onClick"],vt={class:"text-no-wrap"},gt=S({__name:"CustomerTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=H(),d=p;return _.fetchItems(d.options).then(s=>{r.value=s.data.data}),(s,h)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",ct,[t("div",null,[t("h2",pt,e(p.title),1)]),a(T),t("div",_t,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/customers"},{default:l(()=>[k(e(s.$t("Voir plus")),1)]),_:1})])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",ht,e(s.$t("Nom")),1),t("th",mt,e(s.$t("Mail")),1),t("th",$t,e(s.$t("Tel")),1),t("th",ft,e(s.$t("Prest")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,o=>(i(),c("tr",{onClick:n=>s.$router.push("/customers/"+o.id),key:o.id,class:"month-item cursor-pointer"},[t("td",null,e(`${o.firstname} ${o.lastname}`),1),t("td",null,e(`${o.email}`),1),t("td",null,e(`${o.phone}`),1),t("td",vt,e(o.prestations_count),1)],8,yt))),128))])]),_:1})]),_:1})]),_:1}))}}),bt={class:"d-sm-flex align-center"},xt={class:"text-h4"},St={class:"ml-auto"},wt={class:"text-subtitle-1 font-weight-medium"},Ct={class:"text-subtitle-1 font-weight-medium"},Et={class:"text-subtitle-1 font-weight-medium"},At={class:"text-subtitle-1 font-weight-medium"},Tt={class:"text-subtitle-1 font-weight-medium"},Mt={class:"text-subtitle-1 font-weight-medium"},kt={class:"text-subtitle-1 font-weight-medium"},Vt=["onClick"],Dt={class:"text-no-wrap"},R=S({__name:"IncomePerMonthTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){const r=new Date().getFullYear(),_=u(r);u(["March","April","May","June"]);const d=u([]),s=I(),h=p,o=Array.from({length:20},($,V)=>h.options.section=="future"?r+V:r-V);function n(){s.fetchYearStatistics({...h.options,year:_.value}).then($=>{d.value=$.data})}J(()=>{n()});function m($){n()}return($,V)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",bt,[t("div",null,[t("h2",xt,e(p.title)+" "+e(f(v)(d.value.reduce((y,P)=>parseFloat(y)+P.amount_paid,0))),1)]),a(T),t("div",St,[a(z,{modelValue:_.value,"onUpdate:modelValue":[V[0]||(V[0]=y=>_.value=y),m],items:f(o),variant:"outlined",dense:"",density:"compact","hide-details":""},null,8,["modelValue","items"])])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",wt,e($.$t("Mois")),1),t("th",Ct,e($.$t("Reste")),1),t("th",Et,e($.$t("Déjà")),1),t("th",At,e($.$t("CA")),1),t("th",Tt,e($.$t("Cls")),1),t("th",Mt,e($.$t("Fait")),1),t("th",kt,e($.$t("Anlé")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(d.value,y=>(i(),c("tr",{key:y.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:P=>$.$router.push(`/prestations?status=-5&date=${[y.date1,y.date2]}`)},e(f(G)(y.label)),9,Vt),t("td",Dt,e(f(v)(y.amount_left)),1),t("td",null,e(f(v)(y.amount_paid)),1),t("td",null,e(f(v)(y.total_amount)),1),t("td",null,e(y.customers_count||0),1),t("td",null,e(y.prestations_closed||0),1),t("td",null,e(y.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),Nt={class:"d-sm-flex align-center"},It={class:"text-h4"},Pt={class:"text-subtitle-1 font-weight-medium"},Lt={class:"text-subtitle-1 font-weight-medium"},Ot={class:"text-subtitle-1 font-weight-medium"},Rt={class:"text-subtitle-1 font-weight-medium"},Ft={class:"text-subtitle-1 font-weight-medium"},Yt={class:"text-subtitle-1 font-weight-medium"},jt={class:"text-subtitle-1 font-weight-medium"},Jt=["onClick"],Bt={class:"text-no-wrap"},Gt=S({__name:"IncomePerYearTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=I(),d=p;return _.fetchYearStatistics(d.options).then(s=>{r.value=s.data}),(s,h)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",Nt,[t("div",null,[t("h2",It,e(p.title)+" "+e(f(v)(r.value.reduce((o,n)=>parseFloat(o)+n.amount_paid,0))),1)])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Pt,e(s.$t("Année")),1),t("th",Lt,e(s.$t("Reste")),1),t("th",Ot,e(s.$t("Déjà")),1),t("th",Rt,e(s.$t("CA")),1),t("th",Ft,e(s.$t("Cls")),1),t("th",Yt,e(s.$t("Fait")),1),t("th",jt,e(s.$t("Anlé")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,o=>(i(),c("tr",{key:o.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:n=>s.$router.push(`/prestations?status=-5&date=${[o.date1,o.date2]}`)},e(o.year),9,Jt),t("td",Bt,e(f(v)(o.amount_left)),1),t("td",null,e(f(v)(o.amount_paid)),1),t("td",null,e(f(v)(o.total_amount)),1),t("td",null,e(o.customers_count||0),1),t("td",null,e(o.prestations_closed||0),1),t("td",null,e(o.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),Ht={class:"d-sm-flex align-center"},zt={class:"text-h4"},Ut={class:"ml-auto"},Xt={class:"text-subtitle-1 font-weight-medium"},qt={class:"text-subtitle-1 font-weight-medium"},Kt={class:"text-subtitle-1 font-weight-medium"},Qt=["onClick"],Wt={class:"text-no-wrap"},Zt={class:"text-no-wrap"},te=S({__name:"HallTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=U(),d=p;return _.fetchItems(d.options).then(s=>{r.value=s.data.data}),(s,h)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",Ht,[t("div",null,[t("h2",zt,e(p.title),1)]),a(T),t("div",Ut,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/halls"},{default:l(()=>[k(e(s.$t("Voir plus")),1)]),_:1})])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Xt,e(s.$t("Nom")),1),t("th",qt,e(s.$t("Faite")),1),t("th",Kt,e(s.$t("Venir")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,o=>(i(),c("tr",{key:o.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:n=>s.$router.push(`/prestations?hall=${o.id}`)},e(`${o.name}`),9,Qt),t("td",Wt,e(o.prestations_past),1),t("td",Zt,e(o.prestations_coming),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),ee={class:"d-sm-flex align-center"},se={class:"text-h4"},oe={class:"ml-auto"},ae={class:"text-subtitle-1 font-weight-medium"},le={class:"text-subtitle-1 font-weight-medium"},ne={class:"text-subtitle-1 font-weight-medium"},ie={class:"text-subtitle-1 font-weight-medium"},re=["onClick"],de={class:"text-no-wrap"},ue={class:"text-no-wrap"},ce={class:"text-no-wrap"},pe={class:"text-no-wrap"},_e=S({__name:"PaymentTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=X(),d=p;return _.fetchItems(d.options).then(s=>{r.value=s.data.data}),(s,h)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",ee,[t("div",null,[t("h2",se,e(p.title)+" "+e(f(v)(r.value.reduce((o,n)=>parseFloat(o)+parseFloat(n.amount),0))),1)]),a(T),t("div",oe,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:l(()=>[k(e(s.$t("Voir plus")),1)]),_:1})])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",ae,e(s.$t("Montant")),1),t("th",le,e(s.$t("Client")),1),t("th",ne,e(s.$t("Prest")),1),t("th",ie,e(s.$t("Date")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,o=>(i(),c("tr",{key:o.id,class:"month-item cursor-pointer",onClick:n=>s.$router.push("/prestations/"+o.prestation_id)},[t("td",de,e(f(v)(o.amount)),1),t("td",ue,e(`${o.prestation&&o.prestation.customer?`${o.prestation.customer.firstname} ${o.prestation.customer.lastname}`:""}`),1),t("td",ce,e(`${o.prestation?`${o.prestation.event_type||"-"}`:""}`),1),t("td",pe,e(f(F)(o.created_at)),1)],8,re))),128))])]),_:1})]),_:1})]),_:1}))}}),he={class:"d-sm-flex align-center"},me={class:"text-h4"},$e={class:"ml-auto"},fe={class:"text-subtitle-1 font-weight-medium"},ye={class:"text-subtitle-1 font-weight-medium"},ve={class:"text-subtitle-1 font-weight-medium"},ge=["onClick"],be={class:"text-no-wrap"},xe={class:"text-no-wrap"},Se=S({__name:"PaymentTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=q(),d=p;return _.fetchItems(d.options).then(s=>{r.value=s.data.data}),(s,h)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",he,[t("div",null,[t("h2",me,e(p.title)+" "+e(f(v)(r.value.reduce((o,n)=>parseFloat(o)+n.payments_sum_amount,0))),1)]),a(T),t("div",$e,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:l(()=>[k(e(s.$t("Voir plus")),1)]),_:1})])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",fe,e(s.$t("Nom")),1),t("th",ye,e(s.$t("Montant")),1),t("th",ve,e(s.$t("NB Réglements")),1)])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,o=>(i(),c("tr",{key:o.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:n=>s.$router.push(`/payments?method=${o.name}`)},e(o.name),9,ge),t("td",be,e(f(v)(o.payments_sum_amount)),1),t("td",xe,e(o.payments_count),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),we={class:"d-sm-flex align-center"},Ce={class:"text-h4"},Ee={class:"ml-auto"},Ae={class:"text-subtitle-1 font-weight-medium"},Te={class:"text-subtitle-1 font-weight-medium"},Me=["onClick"],ke={class:"text-no-wrap"},Ve=S({__name:"PrestationTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(p){u("March"),u(["March","April","May","June"]);const r=u([]),_=K(),d=p,s=u([]),h=new Date().getFullYear();return Array.from({length:4},(o,n)=>h-n),_.fetchItems(d.options).then(o=>{r.value=o.data.data;for(let n=0;n<4;n++){const m=new Date().getFullYear()-n;for(let $=0;$<r.value.length;$++)r.value[$][`prestation_${m}`]>0&&s.value.indexOf(m)==-1&&s.value.push(m)}}),(o,n)=>(i(),w(A,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",we,[t("div",null,[t("h2",Ce,e(p.title),1)]),a(T),t("div",Ee,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/event_types"},{default:l(()=>[k(e(o.$t("Voir plus")),1)]),_:1})])]),a(C,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Ae,e(o.$t("Nom")),1),(i(!0),c(b,null,x(s.value,m=>(i(),c("th",Te,e(m),1))),256))])]),t("tbody",null,[(i(!0),c(b,null,x(r.value,m=>(i(),c("tr",{key:m.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:$=>o.$router.push(`/prestations?event_type=${m.name}`)},e(m.name),9,Me),(i(!0),c(b,null,x(s.value,$=>(i(),c("td",ke,e(m[`prestation_${$}`]||0),1))),256))]))),128))])]),_:1})]),_:1})]),_:1}))}}),We=S({__name:"Dashboard",setup(p){const r=u({title:"Dashboard"}),_=u([]);return(d,s)=>(i(),c(b,null,[a(B,{title:r.value.title,breadcrumbs:_.value},null,8,["title","breadcrumbs"]),a(Q,{class:"dashboard"},{default:l(()=>[a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(N,{class:"h-100",title:d.$t("LISTE PRESTATION A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"future",status:1}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(N,{class:"h-100",title:d.$t("LISTE PRESTATION DEJA PASSE"),options:{per_page:10,order_by:"event_date",direction:"DESC",statistics:"past",status:3}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(gt,{class:"h-100",title:d.$t("LISTE DES CLIENTS RECENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"past"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(R,{class:"h-100",title:d.$t("CA/MOIS - DÉJÀ PASSÉ"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"past"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(R,{class:"h-100",title:d.$t("CA/MOIS - A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"future"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(Gt,{class:"h-100",title:d.$t("CA A L’ANNEE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"year_income"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(te,{class:"h-100",title:d.$t("LISTE SALLES"),options:{per_page:10,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(_e,{class:"h-100",title:d.$t("LISTE REGLEMENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"dashboard"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(N,{class:"h-100",title:d.$t("LISTE REGLEMENTS EN ATTENTE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"closed"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(Se,{class:"h-100",title:d.$t("TYPE REGLEMENTS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),a(g,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:l(()=>[a(Ve,{class:"h-100",title:d.$t("TYPE PRESTATIONS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1})]),_:1})],64))}});export{We as default};
