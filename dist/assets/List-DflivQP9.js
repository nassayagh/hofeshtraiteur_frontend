import{u as qe}from"./demands-CHk8tW34.js";import{u as Ge}from"./eventType-dLReVXyS.js";import{u as Je}from"./customers-C1CvO2X-.js";import{u as We}from"./hall-DX5Dvy8F.js";import{_ as Xe}from"./BaseBreadcrumb-Cf37-i_d.js";import{r as Ae}from"./validators-BPi-vT8z.js";import{f as Ee}from"./formatters-DFmKRZND.js";import{p as Ye,ay as Ze,az as Qe,j as el,aA as ll,r as s,s as re,u as Fe,e as S,aB as al,g as ae,Y as Re,aC as tl,m as ol,b as l,X as se,n as E,ac as Me,aD as nl,aE as ul,d as D,aF as rl,aG as sl,aH as il,aI as dl,a6 as ml,aJ as vl,av as cl,aK as k,h as fl,q as pl,Z as we,o as ee,c as Le,w as n,V as P,t as $,a as ge,a8 as G,_ as be,a4 as Ie}from"./index-1gY6uGV-.js";import{F as Vl}from"./vee-validate.esm-BCotZdHC.js";import{_ as gl}from"./ValidateDemand.vue_vue_type_script_setup_true_lang-CGNPxFqE.js";import{V as C,a as Pe}from"./VRow-DR6SNGE0.js";import{V as bl}from"./VDataTableServer-B-NF96ga.js";import{V as yl}from"./VToolbar-Bpdf6zHL.js";import{m as hl,u as kl,V as U}from"./VTextField-e0EfoEgn.js";import{m as Cl,u as _l,V as $l,a as xl,b as ye}from"./VSelect-ph4-yU08.js";import{V as he}from"./VDialog-C5FspTwe.js";import{V as Ne}from"./VLocaleProvider-Bx0-HJKc.js";import{V as Oe}from"./VDatePicker-BIozypGO.js";import{V as He,a as le}from"./VSpacer-D92K55La.js";import{a as Be,b as je,V as Dl,c as Ke}from"./VCard-BB6Js1Oe.js";import{V as Sl}from"./VContainer-Ds0l1We2.js";import{V as wl}from"./VAutocomplete-CBMnaRIm.js";import{m as Il,u as Pl}from"./filter-Bl1552Lx.js";import{h as Ul,t as ke,g as Tl,e as Al,c as ze}from"./VMenu-BgdHDmje.js";import{V as El}from"./VAvatar-1DJ1S93i.js";import{V as Fl}from"./VTextarea-B_seqABQ.js";import{V as Rl}from"./VAlert-BRGXlqq7.js";import{V as Ce}from"./VTooltip-CBA57m_d.js";import"./VSheet-BGyPD7Mk.js";function Ml(t,_,j){if(_==null)return t;if(Array.isArray(_))throw new Error("Multiple matches is not implemented");return typeof _=="number"&&~_?l(se,null,[l("span",{class:"v-combobox__unmask"},[t.substr(0,_)]),l("span",{class:"v-combobox__mask"},[t.substr(_,j)]),l("span",{class:"v-combobox__unmask"},[t.substr(_+j)])]):t}const Ll=Ye({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Il({filterKeys:["title"]}),...Cl({hideNoData:!0,returnObject:!0}),...Ze(hl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Qe({transition:!1})},"VCombobox"),Nl=el()({name:"VCombobox",props:Ll(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,_){var fe;let{emit:j,slots:f}=_;const{t:te}=ll(),F=s(),T=re(!1),R=re(!0),J=re(!1),w=s(),W=s(),K=Fe(t,"menu"),b=S({get:()=>K.value,set:o=>{var a;K.value&&!o&&((a=w.value)!=null&&a.ΨopenChildren)||(K.value=o)}}),c=re(-1);let O=!1;const z=S(()=>{var o;return(o=F.value)==null?void 0:o.color}),oe=S(()=>b.value?t.closeText:t.openText),{items:X,transformIn:Y,transformOut:ne}=Ul(t),{textColorClasses:H,textColorStyles:Z}=al(z),m=Fe(t,"modelValue",[],o=>Y(il(o)),o=>{const a=ne(o);return t.multiple?a:a[0]??null}),M=kl(),I=re(t.multiple?"":((fe=m.value[0])==null?void 0:fe.title)??""),h=S({get:()=>I.value,set:o=>{var a;if(I.value=o??"",t.multiple||(m.value=[ke(t,o)]),o&&t.multiple&&((a=t.delimiters)!=null&&a.length)){const e=o.split(new RegExp(`(?:${t.delimiters.join("|")})+`));e.length>1&&(e.forEach(p=>{p=p.trim(),p&&A(ke(t,p))}),I.value="")}o||(c.value=-1),R.value=!o}}),B=S(()=>typeof t.counterValue=="function"?t.counterValue(m.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?m.value.length:h.value.length);ae(I,o=>{O?Re(()=>O=!1):T.value&&!b.value&&(b.value=!0),j("update:search",o)}),ae(m,o=>{var a;t.multiple||(I.value=((a=o[0])==null?void 0:a.title)??"")});const{filteredItems:v,getMatches:q}=Pl(t,X,()=>R.value?"":h.value),x=S(()=>t.hideSelected?v.value.filter(o=>!m.value.some(a=>a.value===o.value)):v.value),d=S(()=>m.value.map(o=>o.value)),Q=S(()=>{var a;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&h.value===((a=x.value[0])==null?void 0:a.title))&&x.value.length>0&&!R.value&&!J.value}),L=S(()=>t.hideNoData&&!x.value.length||t.readonly||(M==null?void 0:M.isReadonly.value)),ue=s(),{onListScroll:ie,onListKeydown:de}=_l(ue,F);function me(o){O=!0,t.openOnClear&&(b.value=!0)}function _e(){L.value||(b.value=!0)}function $e(o){L.value||(T.value&&(o.preventDefault(),o.stopPropagation()),b.value=!b.value)}function xe(o){var p;if(dl(o)||t.readonly||M!=null&&M.isReadonly.value)return;const a=F.value.selectionStart,e=m.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(o.key))&&o.preventDefault(),["Enter","ArrowDown"].includes(o.key)&&(b.value=!0),["Escape"].includes(o.key)&&(b.value=!1),["Enter","Escape","Tab"].includes(o.key)&&(Q.value&&["Enter","Tab"].includes(o.key)&&A(v.value[0]),R.value=!0),o.key==="ArrowDown"&&Q.value&&((p=ue.value)==null||p.focus("next")),!!t.multiple){if(["Backspace","Delete"].includes(o.key)){if(c.value<0){o.key==="Backspace"&&!h.value&&(c.value=e-1);return}const i=c.value,V=m.value[c.value];V&&!V.props.disabled&&A(V,!1),c.value=i>=e-1?e-2:i}if(o.key==="ArrowLeft"){if(c.value<0&&a>0)return;const i=c.value>-1?c.value-1:e-1;m.value[i]?c.value=i:(c.value=-1,F.value.setSelectionRange(h.value.length,h.value.length))}if(o.key==="ArrowRight"){if(c.value<0)return;const i=c.value+1;m.value[i]?c.value=i:(c.value=-1,F.value.setSelectionRange(0,0))}o.key==="Enter"&&h.value&&(A(ke(t,h.value)),h.value="")}}function De(){var o;T.value&&(R.value=!0,(o=F.value)==null||o.focus())}function A(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.multiple){const e=m.value.findIndex(i=>t.valueComparator(i.value,o.value)),p=a??!~e;if(~e){const i=p?[...m.value,o]:[...m.value];i.splice(e,1),m.value=i}else p&&(m.value=[...m.value,o]);t.clearOnSelect&&(h.value="")}else{const e=a!==!1;m.value=e?[o]:[],I.value=e?o.title:"",Re(()=>{b.value=!1,R.value=!0})}}function Se(o){T.value=!0,setTimeout(()=>{J.value=!0})}function ve(o){J.value=!1}function ce(o){(o==null||o===""&&!t.multiple)&&(m.value=[])}return ae(T,(o,a)=>{o||o===a||(c.value=-1,b.value=!1,Q.value&&!J.value&&!m.value.some(e=>{let{value:p}=e;return p===x.value[0].value})?A(x.value[0]):t.multiple&&h.value&&A(ke(t,h.value)))}),ae(b,()=>{if(!t.hideSelected&&b.value&&m.value.length){const o=x.value.findIndex(a=>m.value.some(e=>t.valueComparator(e.value,a.value)));tl&&window.requestAnimationFrame(()=>{var a;o>=0&&((a=W.value)==null||a.scrollToIndex(o))})}}),ae(x,(o,a)=>{T.value&&(!o.length&&t.hideNoData&&(b.value=!1),!a.length&&o.length&&(b.value=!0))}),ol(()=>{const o=!!(t.chips||f.chip),a=!!(!t.hideNoData||x.value.length||f["prepend-item"]||f["append-item"]||f["no-data"]),e=m.value.length>0,p=U.filterProps(t);return l(U,E({ref:F},p,{modelValue:h.value,"onUpdate:modelValue":[i=>h.value=i,ce],focused:T.value,"onUpdate:focused":i=>T.value=i,validationValue:m.externalValue,counterValue:B.value,dirty:e,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!f.selection,"v-combobox--selecting-index":c.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:t.readonly,placeholder:e?void 0:t.placeholder,"onClick:clear":me,"onMousedown:control":_e,onKeydown:xe}),{...f,default:()=>l(se,null,[l(Tl,E({ref:w,modelValue:b.value,"onUpdate:modelValue":i=>b.value=i,activator:"parent",contentClass:"v-combobox__content",disabled:L.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:De},t.menuProps),{default:()=>[a&&l(Al,E({ref:ue,selected:d.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:de,onFocusin:Se,onFocusout:ve,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},t.listProps),{default:()=>{var i,V,u;return[(i=f["prepend-item"])==null?void 0:i.call(f),!x.value.length&&!t.hideNoData&&(((V=f["no-data"])==null?void 0:V.call(f))??l(ze,{title:te(t.noDataText)},null)),l($l,{ref:W,renderless:!0,items:x.value},{default:g=>{var Te;let{item:r,index:y,itemRef:N}=g;const Ue=E(r.props,{ref:N,key:y,active:Q.value&&y===0?!0:void 0,onClick:()=>A(r,null)});return((Te=f.item)==null?void 0:Te.call(f,{item:r,index:y,props:Ue}))??l(ze,Ue,{prepend:pe=>{let{isSelected:Ve}=pe;return l(se,null,[t.multiple&&!t.hideSelected?l(xl,{key:r.value,modelValue:Ve,ripple:!1,tabindex:"-1"},null):void 0,r.props.prependAvatar&&l(El,{image:r.props.prependAvatar},null),r.props.prependIcon&&l(Me,{icon:r.props.prependIcon},null)])},title:()=>{var pe,Ve;return R.value?r.title:Ml(r.title,(pe=q(r))==null?void 0:pe.title,((Ve=h.value)==null?void 0:Ve.length)??0)}})}}),(u=f["append-item"])==null?void 0:u.call(f)]}})]}),m.value.map((i,V)=>{function u(N){N.stopPropagation(),N.preventDefault(),A(i,!1)}const g={"onClick:close":u,onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},r=o?!!f.chip:!!f.selection,y=r?nl(o?f.chip({item:i,index:V,props:g}):f.selection({item:i,index:V})):void 0;if(!(r&&!y))return l("div",{key:i.value,class:["v-combobox__selection",V===c.value&&["v-combobox__selection--selected",H.value]],style:V===c.value?Z.value:{}},[o?f.chip?l(ul,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:i.title}}},{default:()=>[y]}):l(He,E({key:"chip",closable:t.closableChips,size:"small",text:i.title,disabled:i.props.disabled},g),null):y??l("span",{class:"v-combobox__selection-text"},[i.title,t.multiple&&V<m.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[D(",")])])])})]),"append-inner":function(){var g;for(var i=arguments.length,V=new Array(i),u=0;u<i;u++)V[u]=arguments[u];return l(se,null,[(g=f["append-inner"])==null?void 0:g.call(f,...V),(!t.hideNoData||t.items.length)&&t.menuIcon?l(Me,{class:"v-combobox__menu-icon",icon:t.menuIcon,onMousedown:$e,onClick:rl,"aria-label":te(oe.value),title:te(oe.value)},null):void 0])}})}),sl({isFocused:T,isPristine:R,menu:b,search:h,selectionIndex:c,filteredItems:v,select:A},F)}}),Ol={class:"text-h5"},Bl={key:0,class:"mt-2"},jl={class:"d-flex align-center"},ba=ml({__name:"List",setup(t){const _=vl(),j=s(),f=cl(),te=Ge(),F=Je(),T=We(),R=s({title:k("Gestion des demandes")}),J=s([{text:k("Dashboard"),disabled:!1,href:"/"},{text:k("Gestion des demandes"),disabled:!0,href:"#"}]),w=s([]),W=s([]),K=s([]),b=s([]),c=qe();fl(()=>{ve(),ce(),fe(),T.fetchItems({per_page:1e3}).then(a=>{b.value=a.data.data})}),s(!1);const O=s(!1),z=s(!1);s(!1),s(!1),s(!1),s(""),s(),s(!1);const oe=s(null);s(null),s(null),s(null);const X=s(!1),Y=s(!1);s();const ne=s(25),H=s(2),Z=s(2),m=s(0),M=s(!1),I=s(!1);s(null);const h=s("");s(["primary","secondary","error","success","warning"]);const B=s([{key:"id",order:"DESC"}]);s(0),s({total:0,validated:0,unvalidated:0});const v=s({search:null,status:null,date:null,event_type:null}),q=s({itemsPerPage:25,rowsPerPage:25,page:1,sortDesc:[!0],sortBy:[{key:"id",order:"DESC"}]}),x=s(-1),d=s({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),Q=s({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),L=s(!1),ue=s([{title:k("ID"),align:"start",key:"id",sortable:!0},{title:k("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:k("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:k("Email"),align:"start",key:"customer.email",sortable:!1},{title:k("Tél."),align:"start",key:"customer.phone",sortable:!1},{title:k("Prestation"),align:"start",key:"event_type"},{title:k("Source"),align:"start",key:"source"},{title:k("Date 'évén"),key:"event_date"},{title:k("Moment"),key:"reception_period"},{title:k("Heure"),key:"reception_start_time"},{title:k("Lieu"),key:"event_location"},{title:k("Salle"),key:"hall.name"},{title:k("Conv"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),ie=S(()=>v.value.date&&v.value.date.length>0?_.format(v.value.date[0],"shortDate")+" - "+_.format(v.value.date[v.value.date.length-1],"shortDate"):null),de=S(()=>d.value.event_date?_.format(d.value.event_date,"shortDate"):null);S(()=>c.demands.data.filter(a=>a.email.toLowerCase().includes(h.value.toLowerCase())));function me(a){O.value=!1,x.value=w.value.indexOf(a),d.value=Object.assign({},a),I.value=!0}function _e(a){d.value=a,L.value=!0}function $e(){I.value=!1,setTimeout(()=>{d.value=Object.assign({customer:{}},Q.value),x.value=-1},300)}function xe(a,{setErrors:e}){var p;(p=j.value)==null||p.validate().then(({valid:i})=>{i&&(z.value=!0,c.addItem(d.value).then(V=>{if(V.data.error){e({apiError:V.data.message});return}d.value.id!=null?Object.assign(w.value[x.value],V.data):w.value.unshift(V.data),z.value=!1,I.value=!1,d.value={customer:{}},f.showSuccess(k("Demande enregistrée avec succès")),ce(),c.fetchStatistics()}).catch(V=>{z.value=!1,e({apiError:V})}).then(()=>{z.value=!1,e({apiError:null})}))})}function De(){c.deleteItem(d.value.id);const a=w.value.findIndex(e=>e.id==d.value.id);w.value.splice(a,1),L.value=!1,f.showSuccess(k("Demande supprimée avec succès")),c.fetchStatistics()}const A=S(()=>x.value===-1?"Nouvelle demande":"Modifier la demande"),Se=S(()=>v.value.date&&v.value.date.length?v.value.date.length>1?[_.format(v.value.date[0],"shortDate"),_.format(v.value.date[v.value.date.length-1],"shortDate")]:[_.format(v.value.date[0],"shortDate"),_.format(v.value.date[0],"shortDate")]:null);function ve(){try{clearTimeout(oe.value)}catch{}oe.value=setTimeout(()=>{O.value=!0;let a="id",e="desc";console.log(B.value),B.value.length>0&&(a=B.value[0].key,e=B.value[0].order),c.fetchItems({term:h.value,paginate:ne.value,current_page:H.value,direction:e,order_by:a,page:q.value.page,per_page:q.value.itemsPerPage,...v.value,date:Se.value}).then(p=>{if(p.data){const{data:i,current_page:V,next_page_url:u,total:g,per_page:r,to:y,last_page:N}=p.data;w.value=i,Z.value=N,m.value=g}}).catch(p=>{console.error(p)}).then(()=>{O.value=!1})},1e3)}function ce(){te.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(a=>{if(a.data){const{data:e,current_page:p,next_page_url:i,total:V,per_page:u,to:g,last_page:r}=a.data;W.value=e}}).catch(a=>{console.error(a)}).then(()=>{})}function fe(){F.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(a=>{if(a.data){const{data:e,current_page:p,next_page_url:i,total:V,per_page:u,to:g,last_page:r}=a.data;K.value=e.map(y=>({...y,name:y.firstname+" "+y.lastname+" ("+(y.is_customer?k("Client"):k("Prospect"))+")"}))}}).catch(a=>{console.error(a)}).then(()=>{})}ae([h,q,v],()=>{ve()},{deep:!0}),pl(()=>{H.value>Z.value&&(H.value=Z.value)});function o(a){if(a){const e=K.value.find(p=>p.id==a);e&&(d.value.customer=e)}}return(a,e)=>{const p=we("EyeIcon"),i=we("PencilIcon"),V=we("TrashIcon");return ee(),Le(se,null,[l(Xe,{title:`${R.value.title}(${m.value})`,breadcrumbs:J.value},null,8,["title","breadcrumbs"]),l(Pe,null,{default:n(()=>[l(C,{cols:"12"},{default:n(()=>[l(bl,{class:"border rounded-md",headers:ue.value,loading:O.value,items:w.value,"multi-sort":!1,"items-per-page":ne.value,"onUpdate:itemsPerPage":e[34]||(e[34]=u=>ne.value=u),"items-per-page-text":a.$t("Articles par page"),options:q.value,"onUpdate:options":e[35]||(e[35]=u=>q.value=u),"sort-by":B.value,"onUpdate:sortBy":e[36]||(e[36]=u=>B.value=u),page:H.value,"onUpdate:page":e[37]||(e[37]=u=>H.value=u),"items-length":m.value,"onUpdate:itemsLength":e[38]||(e[38]=u=>m.value=u),"show-select":!1,"loading-text":a.$t("Chargement des éléments"),"no-data-text":a.$t("Pas de données"),"no-results-text":a.$t("Aucun résultat"),onPageCount:e[39]||(e[39]=u=>Z.value=u)},{top:n(()=>[l(yl,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:n(()=>[l(Pe,null,{default:n(()=>[l(C,null,{default:n(()=>[l(U,{density:"compact",modelValue:v.value.search,"onUpdate:modelValue":e[0]||(e[0]=u=>v.value.search=u),placeholder:a.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(C,null,{default:n(()=>[l(ye,{density:"compact",modelValue:v.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=u=>v.value.event_type=u),placeholder:a.$t("Prestation"),items:W.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(C,null,{default:n(()=>[l(ye,{density:"compact",modelValue:v.value.source,"onUpdate:modelValue":e[2]||(e[2]=u=>v.value.source=u),placeholder:a.$t("Source"),items:["admin","site"],clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),l(C,null,{default:n(()=>[l(he,{ref:"dialog",modelValue:X.value,"onUpdate:modelValue":e[8]||(e[8]=u=>X.value=u),"return-value":v.value.date,"onUpdate:returnValue":e[9]||(e[9]=u=>v.value.date=u),persistent:"",width:"290px"},{activator:n(({props:u})=>[l(U,E({modelValue:ie.value,"onUpdate:modelValue":e[3]||(e[3]=g=>ie.value=g),"prepend-inner-icon":"bx-calendar"},u,{density:"compact",placeholder:a.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[4]||(e[4]=g=>v.value.date=null)}),null,16,["modelValue","placeholder"])]),default:n(({isActive:u})=>[l(Ne,{locale:"fr"},{default:n(()=>[l(Oe,{modelValue:v.value.date,"onUpdate:modelValue":e[7]||(e[7]=g=>v.value.date=g),"hide-header":"",multiple:"range"},{actions:n(()=>[l(P,{color:"primary",onClick:e[5]||(e[5]=g=>X.value=!1)},{default:n(()=>[D($(a.$t("Annuler")),1)]),_:1}),l(le),l(P,{variant:"elevated",color:"primary",onClick:e[6]||(e[6]=g=>X.value=!1)},{default:n(()=>[D($(a.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(C,{class:""},{default:n(()=>[l(he,{modelValue:I.value,"onUpdate:modelValue":e[31]||(e[31]=u=>I.value=u),"max-width":"600px"},{activator:n(({props:u})=>[l(P,E({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[10]||(e[10]=g=>me({customer:{},source:"admin"})),dark:""},u),{default:n(()=>[D($(a.$t("Ajouter une demande")),1)]),_:2},1040)]),default:n(()=>[l(Be,null,{default:n(()=>[l(je,{class:"pa-4 bg-secondary"},{default:n(()=>[ge("span",Ol,$(A.value),1)]),_:1}),l(G(Vl),{ref_key:"refForm",ref:j,modelValue:M.value,"onUpdate:modelValue":e[30]||(e[30]=u=>M.value=u),onSubmit:xe},{default:n(({errors:u,isSubmitting:g})=>[l(Dl,null,{default:n(()=>[l(Sl,{class:"px-0"},{default:n(()=>[l(Pe,null,{default:n(()=>[l(C,{cols:"12"},{default:n(()=>[l(wl,{modelValue:d.value.customer_id,"onUpdate:modelValue":[e[11]||(e[11]=r=>d.value.customer_id=r),o],placeholder:a.$t("Client"),items:K.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.customer.firstname,"onUpdate:modelValue":e[12]||(e[12]=r=>d.value.customer.firstname=r),rules:[G(Ae)],label:a.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.customer.lastname,"onUpdate:modelValue":e[13]||(e[13]=r=>d.value.customer.lastname=r),rules:[G(Ae)],label:a.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.customer.email,"onUpdate:modelValue":e[14]||(e[14]=r=>d.value.customer.email=r),label:a.$t("Email")},null,8,["modelValue","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.customer.phone,"onUpdate:modelValue":e[15]||(e[15]=r=>d.value.customer.phone=r),label:a.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(Nl,{modelValue:d.value.event_type,"onUpdate:modelValue":e[16]||(e[16]=r=>d.value.event_type=r),placeholder:a.$t("Type d'événement"),items:W.value.map(r=>r.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(he,{ref:"dialogDemandDate",modelValue:Y.value,"onUpdate:modelValue":e[22]||(e[22]=r=>Y.value=r),"return-value":d.value.event_date,"onUpdate:returnValue":e[23]||(e[23]=r=>d.value.event_date=r),persistent:"",width:"290px"},{activator:n(({props:r})=>[l(U,E({modelValue:de.value,"onUpdate:modelValue":e[17]||(e[17]=y=>de.value=y),"prepend-inner-icon":"bx-calendar"},r,{placeholder:a.$t("Date de la demande"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[18]||(e[18]=y=>d.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:n(({isActive:r})=>[l(Ne,{locale:"fr"},{default:n(()=>[l(Oe,{modelValue:d.value.event_date,"onUpdate:modelValue":e[21]||(e[21]=y=>d.value.event_date=y),"hide-header":""},{actions:n(()=>[l(P,{color:"primary",onClick:e[19]||(e[19]=y=>Y.value=!1)},{default:n(()=>[D($(a.$t("Annuler")),1)]),_:1}),l(le),l(P,{variant:"elevated",color:"primary",onClick:e[20]||(e[20]=y=>Y.value=!1)},{default:n(()=>[D($(a.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(ye,{modelValue:d.value.reception_period,"onUpdate:modelValue":e[24]||(e[24]=r=>d.value.reception_period=r),"hide-details":"",items:[a.$t("En matiné"),a.$t("Le midi"),a.$t("En soirée")],label:a.$t("La réception se déroulera plutôt"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.reception_start_time,"onUpdate:modelValue":e[25]||(e[25]=r=>d.value.reception_start_time=r),"hide-details":"",label:a.$t("Heure de réception"),clearable:""},null,8,["modelValue","label"])]),_:1}),d.value.source!="admin"?(ee(),be(C,{key:0,cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.event_location,"onUpdate:modelValue":e[26]||(e[26]=r=>d.value.event_location=r),"hide-details":"",label:a.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1})):(ee(),be(C,{key:1,cols:"12",md:"6"},{default:n(()=>[l(ye,{modelValue:d.value.hall_id,"onUpdate:modelValue":e[27]||(e[27]=r=>d.value.hall_id=r),items:b.value,"item-value":"id","item-title":"name",label:a.$t("Salle liée")},null,8,["modelValue","items","label"])]),_:1})),l(C,{cols:"12",md:"6"},{default:n(()=>[l(U,{modelValue:d.value.number_people,"onUpdate:modelValue":e[28]||(e[28]=r=>d.value.number_people=r),"hide-details":"",type:"number",label:a.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1}),l(C,{cols:"12"},{default:n(()=>[l(Fl,{modelValue:d.value.comment,"onUpdate:modelValue":e[29]||(e[29]=r=>d.value.comment=r),"hide-details":"",label:a.$t("Description de la demande")},null,8,["modelValue","label"])]),_:1})]),_:1}),u.apiError?(ee(),Le("div",Bl,[l(Rl,{color:"error"},{default:n(()=>[D($(u.apiError),1)]),_:2},1024)])):Ie("",!0)]),_:2},1024)]),_:2},1024),l(Ke,null,{default:n(()=>[l(le),l(P,{color:"error",variant:"flat",dark:"",onClick:$e},{default:n(()=>[D($(a.$t("Annuler")),1)]),_:1}),l(P,{color:"success",variant:"flat",loading:z.value,type:"submit"},{default:n(()=>[D($(a.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(le)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(he,{modelValue:L.value,"onUpdate:modelValue":e[33]||(e[33]=u=>L.value=u),"max-width":"500px"},{default:n(()=>[l(Be,null,{default:n(()=>[l(je,{class:"text-h5 text-center py-6"},{default:n(()=>[D($(a.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(Ke,null,{default:n(()=>[l(le),l(P,{color:"error",variant:"flat",dark:"",onClick:e[32]||(e[32]=u=>L.value=!1)},{default:n(()=>[D($(a.$t("Annuler")),1)]),_:1}),l(P,{color:"success",variant:"flat",dark:"",onClick:De},{default:n(()=>[D($(a.$t("OK")),1)]),_:1}),l(le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.demand_date":n(({item:u})=>[D($(G(Ee)(u.demand_date)),1)]),"item.event_date":n(({item:u})=>[D($(G(Ee)(u.event_date)),1)]),"item.event_location":n(({item:u})=>[l(Ce,{text:u.event_location},{activator:n(({props:g})=>[ge("span",null,$(u.event_location&&u.event_location.length<10?u.event_location:`${u.event_location.substring(9)}...`),1)]),_:2},1032,["text"])]),"item.status":n(({item:u})=>[l(He,{color:G(c).statusColor(u.status),size:"small",label:""},{default:n(()=>[D($(G(c).statusText(u.status)),1)]),_:2},1032,["color"])]),"item.actions":n(({index:u,item:g})=>[ge("div",jl,[g.prestation?Ie("",!0):(ee(),be(gl,{key:0,modelValue:w.value[u],"onUpdate:modelValue":r=>w.value[u]=r,icon:!0},null,8,["modelValue","onUpdate:modelValue"])),l(Ce,{text:a.$t("Voir")},{activator:n(({props:r})=>[l(P,E({icon:"",flat:"",to:"/demands/"+g.id},r),{default:n(()=>[l(p,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["to"])]),_:2},1032,["text"]),l(Ce,{text:a.$t("Modifier")},{activator:n(({props:r})=>[l(P,E({icon:"",flat:"",onClick:y=>me(g)},r),{default:n(()=>[l(i,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),g.prestation==null?(ee(),be(Ce,{key:1,text:a.$t("Supprimer")},{activator:n(({props:r})=>[l(P,E({icon:"",flat:"",onClick:y=>_e(g)},r),{default:n(()=>[l(V,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):Ie("",!0)])]),"no-data":n(()=>[ge("span",null,$(a.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{ba as default};
