import{u as qe}from"./demands-Xn0lPfC_.js";import{u as Ge}from"./eventType-FT-aHWGA.js";import{u as Je}from"./customers-DnE7v4St.js";import{_ as We}from"./BaseBreadcrumb-BOd56rua.js";import{r as Ie}from"./validators-BPi-vT8z.js";import{f as Ue}from"./formatters-Dv1Ro_l4.js";import{p as Xe,ay as Ye,az as Ze,j as Qe,aA as el,r as d,s as ne,u as Te,e as w,aB as ll,g as ae,Y as Ae,aC as al,m as tl,b as l,X as re,n as R,ac as Fe,aD as ol,aE as ul,d as D,aF as nl,aG as rl,aH as sl,aI as il,a6 as dl,aJ as ml,av as vl,aK as b,h as cl,q as fl,Z as Ee,o as ce,c as Le,w as u,a8 as N,V as U,t as k,a as we,a4 as Se,_ as Re}from"./index-CfYHWYZq.js";import{F as pl}from"./vee-validate.esm-DmEq-Hou.js";import{_ as Vl}from"./ValidateDemand.vue_vue_type_script_setup_true_lang-BuGxW8p8.js";import{V as y,a as xe}from"./VRow-CdijmP0y.js";import{V as gl}from"./VDataTableServer-BpKvQsrS.js";import{V as bl}from"./VToolbar-D7EQ9bsE.js";import{m as yl,u as hl,V as T}from"./VTextField-CKZHfJFg.js";import{m as kl,u as Cl,V as Dl,a as $l,b as fe,c as pe}from"./VDialog-WAHa-LM4.js";import{V as Me}from"./VLocaleProvider-krwd3c9g.js";import{V as Ne}from"./VDatePicker-CR1gUYZX.js";import{V as le}from"./VSpacer-DLo5Oi9t.js";import{V as Oe,b as Be,a as wl,c as je}from"./VCard-Dcy8KbWZ.js";import{V as Sl}from"./VContainer-DFr06vNG.js";import{V as xl}from"./VAutocomplete-ClZOiOOL.js";import{m as Pl,u as _l}from"./filter-DXOcWSNv.js";import{h as Il,t as Ve,g as Ul,e as Tl,c as Ke}from"./VMenu-BDTGSksr.js";import{V as Al}from"./VAvatar-D4e20FOe.js";import{V as He}from"./VChip-DtMbUV1S.js";import{V as Fl}from"./VTextarea-CSRgCF6r.js";import{V as El}from"./VAlert-Dt20aOKY.js";import{V as ze}from"./VTooltip-DMp6fyz0.js";import"./hall-edCu7j-2.js";import"./VTable-Dvq9ZZlz.js";import"./index-I5jEJkIR.js";import"./VSheet-8EjTlmWn.js";function Ll(a,h,O){if(h==null)return a;if(Array.isArray(h))throw new Error("Multiple matches is not implemented");return typeof h=="number"&&~h?l(re,null,[l("span",{class:"v-combobox__unmask"},[a.substr(0,h)]),l("span",{class:"v-combobox__mask"},[a.substr(h,O)]),l("span",{class:"v-combobox__unmask"},[a.substr(h+O)])]):a}const Rl=Xe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Pl({filterKeys:["title"]}),...kl({hideNoData:!0,returnObject:!0}),...Ye(yl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:!1})},"VCombobox"),Ml=Qe()({name:"VCombobox",props:Rl(),emits:{"update:focused":a=>!0,"update:modelValue":a=>!0,"update:search":a=>!0,"update:menu":a=>!0},setup(a,h){var o;let{emit:O,slots:c}=h;const{t:te}=el(),F=d(),A=ne(!1),E=ne(!0),$=ne(!1),G=d(),J=d(),S=Te(a,"menu"),V=w({get:()=>S.value,set:e=>{var s;S.value&&!e&&((s=G.value)!=null&&s.ΨopenChildren)||(S.value=e)}}),p=ne(-1);let W=!1;const X=w(()=>{var e;return(e=F.value)==null?void 0:e.color}),B=w(()=>V.value?a.closeText:a.openText),{items:oe,transformIn:j,transformOut:Y}=Il(a),{textColorClasses:ue,textColorStyles:se}=ll(X),v=Te(a,"modelValue",[],e=>j(sl(e)),e=>{const s=Y(e);return a.multiple?s:s[0]??null}),L=hl(),x=ne(a.multiple?"":((o=v.value[0])==null?void 0:o.title)??""),i=w({get:()=>x.value,set:e=>{var s;if(x.value=e??"",a.multiple||(v.value=[Ve(a,e)]),e&&a.multiple&&((s=a.delimiters)!=null&&s.length)){const f=e.split(new RegExp(`(?:${a.delimiters.join("|")})+`));f.length>1&&(f.forEach(t=>{t=t.trim(),t&&I(Ve(a,t))}),x.value="")}e||(p.value=-1),E.value=!e}}),K=w(()=>typeof a.counterValue=="function"?a.counterValue(v.value):typeof a.counterValue=="number"?a.counterValue:a.multiple?v.value.length:i.value.length);ae(x,e=>{W?Ae(()=>W=!1):A.value&&!V.value&&(V.value=!0),O("update:search",e)}),ae(v,e=>{var s;a.multiple||(x.value=((s=e[0])==null?void 0:s.title)??"")});const{filteredItems:M,getMatches:m}=_l(a,oe,()=>E.value?"":i.value),_=w(()=>a.hideSelected?M.value.filter(e=>!v.value.some(s=>s.value===e.value)):M.value),z=w(()=>v.value.map(e=>e.value)),Z=w(()=>{var s;return(a.autoSelectFirst===!0||a.autoSelectFirst==="exact"&&i.value===((s=_.value[0])==null?void 0:s.title))&&_.value.length>0&&!E.value&&!$.value}),Q=w(()=>a.hideNoData&&!_.value.length||a.readonly||(L==null?void 0:L.isReadonly.value)),ee=d(),{onListScroll:ie,onListKeydown:ge}=Cl(ee,F);function be(e){W=!0,a.openOnClear&&(V.value=!0)}function ye(){Q.value||(V.value=!0)}function he(e){Q.value||(A.value&&(e.preventDefault(),e.stopPropagation()),V.value=!V.value)}function ke(e){var t;if(il(e)||a.readonly||L!=null&&L.isReadonly.value)return;const s=F.value.selectionStart,f=v.value.length;if((p.value>-1||["Enter","ArrowDown","ArrowUp"].includes(e.key))&&e.preventDefault(),["Enter","ArrowDown"].includes(e.key)&&(V.value=!0),["Escape"].includes(e.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(e.key)&&(Z.value&&["Enter","Tab"].includes(e.key)&&I(M.value[0]),E.value=!0),e.key==="ArrowDown"&&Z.value&&((t=ee.value)==null||t.focus("next")),!!a.multiple){if(["Backspace","Delete"].includes(e.key)){if(p.value<0){e.key==="Backspace"&&!i.value&&(p.value=f-1);return}const r=p.value,n=v.value[p.value];n&&!n.props.disabled&&I(n,!1),p.value=r>=f-1?f-2:r}if(e.key==="ArrowLeft"){if(p.value<0&&s>0)return;const r=p.value>-1?p.value-1:f-1;v.value[r]?p.value=r:(p.value=-1,F.value.setSelectionRange(i.value.length,i.value.length))}if(e.key==="ArrowRight"){if(p.value<0)return;const r=p.value+1;v.value[r]?p.value=r:(p.value=-1,F.value.setSelectionRange(0,0))}e.key==="Enter"&&i.value&&(I(Ve(a,i.value)),i.value="")}}function Ce(){var e;A.value&&(E.value=!0,(e=F.value)==null||e.focus())}function I(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(a.multiple){const f=v.value.findIndex(r=>a.valueComparator(r.value,e.value)),t=s??!~f;if(~f){const r=t?[...v.value,e]:[...v.value];r.splice(f,1),v.value=r}else t&&(v.value=[...v.value,e]);a.clearOnSelect&&(i.value="")}else{const f=s!==!1;v.value=f?[e]:[],x.value=f?e.title:"",Ae(()=>{V.value=!1,E.value=!0})}}function de(e){A.value=!0,setTimeout(()=>{$.value=!0})}function De(e){$.value=!1}function $e(e){(e==null||e===""&&!a.multiple)&&(v.value=[])}return ae(A,(e,s)=>{e||e===s||(p.value=-1,V.value=!1,Z.value&&!$.value&&!v.value.some(f=>{let{value:t}=f;return t===_.value[0].value})?I(_.value[0]):a.multiple&&i.value&&I(Ve(a,i.value)))}),ae(V,()=>{if(!a.hideSelected&&V.value&&v.value.length){const e=_.value.findIndex(s=>v.value.some(f=>a.valueComparator(f.value,s.value)));al&&window.requestAnimationFrame(()=>{var s;e>=0&&((s=J.value)==null||s.scrollToIndex(e))})}}),ae(_,(e,s)=>{A.value&&(!e.length&&a.hideNoData&&(V.value=!1),!s.length&&e.length&&(V.value=!0))}),tl(()=>{const e=!!(a.chips||c.chip),s=!!(!a.hideNoData||_.value.length||c["prepend-item"]||c["append-item"]||c["no-data"]),f=v.value.length>0,t=T.filterProps(a);return l(T,R({ref:F},t,{modelValue:i.value,"onUpdate:modelValue":[r=>i.value=r,$e],focused:A.value,"onUpdate:focused":r=>A.value=r,validationValue:v.externalValue,counterValue:K.value,dirty:f,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!a.chips,"v-combobox--selection-slot":!!c.selection,"v-combobox--selecting-index":p.value>-1,[`v-combobox--${a.multiple?"multiple":"single"}`]:!0},a.class],style:a.style,readonly:a.readonly,placeholder:f?void 0:a.placeholder,"onClick:clear":be,"onMousedown:control":ye,onKeydown:ke}),{...c,default:()=>l(re,null,[l(Ul,R({ref:G,modelValue:V.value,"onUpdate:modelValue":r=>V.value=r,activator:"parent",contentClass:"v-combobox__content",disabled:Q.value,eager:a.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:a.transition,onAfterLeave:Ce},a.menuProps),{default:()=>[s&&l(Tl,R({ref:ee,selected:z.value,selectStrategy:a.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:ge,onFocusin:de,onFocusout:De,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:a.itemColor??a.color},a.listProps),{default:()=>{var r,n,g;return[(r=c["prepend-item"])==null?void 0:r.call(c),!_.value.length&&!a.hideNoData&&(((n=c["no-data"])==null?void 0:n.call(c))??l(Ke,{title:te(a.noDataText)},null)),l(Dl,{ref:J,renderless:!0,items:_.value},{default:P=>{var _e;let{item:C,index:H,itemRef:q}=P;const Pe=R(C.props,{ref:q,key:H,active:Z.value&&H===0?!0:void 0,onClick:()=>I(C,null)});return((_e=c.item)==null?void 0:_e.call(c,{item:C,index:H,props:Pe}))??l(Ke,Pe,{prepend:me=>{let{isSelected:ve}=me;return l(re,null,[a.multiple&&!a.hideSelected?l($l,{key:C.value,modelValue:ve,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&l(Al,{image:C.props.prependAvatar},null),C.props.prependIcon&&l(Fe,{icon:C.props.prependIcon},null)])},title:()=>{var me,ve;return E.value?C.title:Ll(C.title,(me=m(C))==null?void 0:me.title,((ve=i.value)==null?void 0:ve.length)??0)}})}}),(g=c["append-item"])==null?void 0:g.call(c)]}})]}),v.value.map((r,n)=>{function g(q){q.stopPropagation(),q.preventDefault(),I(r,!1)}const P={"onClick:close":g,onMousedown(q){q.preventDefault(),q.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=e?!!c.chip:!!c.selection,H=C?ol(e?c.chip({item:r,index:n,props:P}):c.selection({item:r,index:n})):void 0;if(!(C&&!H))return l("div",{key:r.value,class:["v-combobox__selection",n===p.value&&["v-combobox__selection--selected",ue.value]],style:n===p.value?se.value:{}},[e?c.chip?l(ul,{key:"chip-defaults",defaults:{VChip:{closable:a.closableChips,size:"small",text:r.title}}},{default:()=>[H]}):l(He,R({key:"chip",closable:a.closableChips,size:"small",text:r.title,disabled:r.props.disabled},P),null):H??l("span",{class:"v-combobox__selection-text"},[r.title,a.multiple&&n<v.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[D(",")])])])})]),"append-inner":function(){var P;for(var r=arguments.length,n=new Array(r),g=0;g<r;g++)n[g]=arguments[g];return l(re,null,[(P=c["append-inner"])==null?void 0:P.call(c,...n),(!a.hideNoData||a.items.length)&&a.menuIcon?l(Fe,{class:"v-combobox__menu-icon",icon:a.menuIcon,onMousedown:he,onClick:nl,"aria-label":te(B.value),title:te(B.value)},null):void 0])}})}),rl({isFocused:A,isPristine:E,menu:V,search:i,selectionIndex:p,filteredItems:M,select:I},F)}}),Nl={class:"text-h5"},Ol={key:0,class:"mt-2"},Bl={class:"d-flex align-center"},ya=dl({__name:"List",setup(a){const h=ml(),O=d(),c=vl(),te=Ge(),F=Je(),A=d({title:b("Gestion des demandes")}),E=d([{text:b("Dashboard"),disabled:!1,href:"/"},{text:b("Gestion des demandes"),disabled:!0,href:"#"}]),$=d([]),G=d([]),J=d([]),S=qe();cl(()=>{I(),de(),De()}),d(!1);const V=d(!1),p=d(!1);d(!1),d(!1),d(!1),d(""),d(),d(!1);const W=d(null);d(null),d(null),d(null);const X=d(!1),B=d(!1);d();const oe=d(10),j=d(2),Y=d(2),ue=d(0),se=d(!1),v=d(!1);d(null);const L=d("");d(["primary","secondary","error","success","warning"]);const x=d([{key:"id",order:"DESC"}]);d(0),d({total:0,validated:0,unvalidated:0});const i=d({search:null,status:null,date:null,event_type:null}),K=d({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"id",order:"DESC"}]}),M=d(-1),m=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),_=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),z=d(!1),Z=d([{title:b("ID"),align:"start",key:"id",sortable:!0},{title:b("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:b("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:b("Email"),align:"start",key:"customer.email",sortable:!1},{title:b("Téléphone"),align:"start",key:"customer.phone",sortable:!1},{title:b("Prestation"),align:"start",key:"event_type"},{title:b("Statut"),align:"start",key:"status"},{title:b("Source"),align:"start",key:"source"},{title:b("Date de l'événement "),key:"event_date"},{title:b("La réception se déroulera plutôt"),key:"reception_period"},{title:b("Heure"),key:"reception_start_time"},{title:b("Lieu"),key:"event_location"},{title:b("Convives"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),Q=w(()=>i.value.date&&i.value.date.length>0?h.format(i.value.date[0],"shortDate")+" - "+h.format(i.value.date[i.value.date.length-1],"shortDate"):null),ee=w(()=>m.value.event_date?h.format(m.value.event_date,"shortDate"):null);w(()=>S.demands.data.filter(o=>o.email.toLowerCase().includes(L.value.toLowerCase())));function ie(o){V.value=!1,M.value=$.value.indexOf(o),m.value=Object.assign({},o),v.value=!0}function ge(o){m.value=o,z.value=!0}function be(){v.value=!1,setTimeout(()=>{m.value=Object.assign({customer:{}},_.value),M.value=-1},300)}function ye(o,{setErrors:e}){var s;(s=O.value)==null||s.validate().then(({valid:f})=>{f&&(p.value=!0,S.addItem(m.value).then(t=>{if(t.data.error){e({apiError:t.data.message});return}m.value.id!=null?Object.assign($.value[M.value],t.data):$.value.unshift(t.data),p.value=!1,v.value=!1,m.value={customer:{}},c.showSuccess(b("Demande enregistrée avec succès")),de(),S.fetchStatistics()}).catch(t=>{p.value=!1,e({apiError:t})}).then(()=>{p.value=!1,e({apiError:null})}))})}function he(){S.deleteItem(m.value.id);const o=$.value.findIndex(e=>e.id==m.value.id);$.value.splice(o,1),z.value=!1,c.showSuccess(b("Demande supprimée avec succès")),S.fetchStatistics()}const ke=w(()=>M.value===-1?"Nouvelle demande":"Modifier la demande"),Ce=w(()=>i.value.date&&i.value.date.length?i.value.date.length>1?[h.format(i.value.date[0],"shortDate"),h.format(i.value.date[i.value.date.length-1],"shortDate")]:[h.format(i.value.date[0],"shortDate"),h.format(i.value.date[0],"shortDate")]:null);function I(){try{clearTimeout(W.value)}catch{}W.value=setTimeout(()=>{V.value=!0;let o="id",e="desc";console.log(x.value),x.value.length>0&&(o=x.value[0].key,e=x.value[0].order),S.fetchItems({term:L.value,paginate:oe.value,current_page:j.value,direction:e,order_by:o,page:K.value.page,per_page:K.value.itemsPerPage,...i.value,date:Ce.value}).then(s=>{if(s.data){const{data:f,current_page:t,next_page_url:r,total:n,per_page:g,to:P,last_page:C}=s.data;$.value=f,Y.value=C,ue.value=n}}).catch(s=>{console.error(s)}).then(()=>{V.value=!1})},1e3)}function de(){te.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(o=>{if(o.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:r,to:n,last_page:g}=o.data;G.value=e}}).catch(o=>{console.error(o)}).then(()=>{})}function De(){F.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(o=>{if(o.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:r,to:n,last_page:g}=o.data;J.value=e.map(P=>({...P,name:P.firstname+" "+P.lastname+" ("+(P.is_customer?b("Client"):b("Prospect"))+")"}))}}).catch(o=>{console.error(o)}).then(()=>{})}ae([L,K,i],()=>{I()},{deep:!0}),fl(()=>{j.value>Y.value&&(j.value=Y.value)});function $e(o){if(o){const e=J.value.find(s=>s.id==o);e&&(m.value.customer=e)}}return(o,e)=>{const s=Ee("PencilIcon"),f=Ee("TrashIcon");return ce(),Le(re,null,[l(We,{title:A.value.title,breadcrumbs:E.value},null,8,["title","breadcrumbs"]),l(xe,null,{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(gl,{class:"border rounded-md",headers:Z.value,loading:V.value,items:$.value,"multi-sort":!1,"items-per-page":oe.value,"onUpdate:itemsPerPage":e[34]||(e[34]=t=>oe.value=t),"items-per-page-text":o.$t("Articles par page"),options:K.value,"onUpdate:options":e[35]||(e[35]=t=>K.value=t),"sort-by":x.value,"onUpdate:sortBy":e[36]||(e[36]=t=>x.value=t),page:j.value,"onUpdate:page":e[37]||(e[37]=t=>j.value=t),"items-length":ue.value,"onUpdate:itemsLength":e[38]||(e[38]=t=>ue.value=t),"show-select":!1,"loading-text":o.$t("Chargement des éléments"),"no-data-text":o.$t("Pas de données"),"no-results-text":o.$t("Aucun résultat"),onPageCount:e[39]||(e[39]=t=>Y.value=t)},{top:u(()=>[l(bl,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:u(()=>[l(xe,null,{default:u(()=>[l(y,null,{default:u(()=>[l(T,{density:"compact",modelValue:i.value.search,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.search=t),placeholder:o.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(y,null,{default:u(()=>[l(fe,{density:"compact",modelValue:i.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.event_type=t),placeholder:o.$t("Prestation"),items:G.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,null,{default:u(()=>[l(fe,{density:"compact",modelValue:i.value.status,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.status=t),placeholder:o.$t("Statut"),items:N(S).statusesList,"item-value":"id","item-title":"label",clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,null,{default:u(()=>[l(fe,{density:"compact",modelValue:i.value.source,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.source=t),placeholder:o.$t("Source"),items:["admin","site"],clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),l(y,null,{default:u(()=>[l(pe,{ref:"dialog",modelValue:X.value,"onUpdate:modelValue":e[9]||(e[9]=t=>X.value=t),"return-value":i.value.date,"onUpdate:returnValue":e[10]||(e[10]=t=>i.value.date=t),persistent:"",width:"290px"},{activator:u(({props:t})=>[l(T,R({modelValue:Q.value,"onUpdate:modelValue":e[4]||(e[4]=r=>Q.value=r),"prepend-inner-icon":"bx-calendar"},t,{density:"compact",placeholder:o.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[5]||(e[5]=r=>i.value.date=null)}),null,16,["modelValue","placeholder"])]),default:u(({isActive:t})=>[l(Me,{locale:"fr"},{default:u(()=>[l(Ne,{modelValue:i.value.date,"onUpdate:modelValue":e[8]||(e[8]=r=>i.value.date=r),"hide-header":"",multiple:"range"},{actions:u(()=>[l(U,{color:"primary",onClick:e[6]||(e[6]=r=>X.value=!1)},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[7]||(e[7]=r=>X.value=!1)},{default:u(()=>[D(k(o.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(y,{class:""},{default:u(()=>[l(pe,{modelValue:v.value,"onUpdate:modelValue":e[31]||(e[31]=t=>v.value=t),"max-width":"600px"},{activator:u(({props:t})=>[l(U,R({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[11]||(e[11]=r=>ie({customer:{},source:"admin"})),dark:""},t),{default:u(()=>[D(k(o.$t("Ajouter une demande")),1)]),_:2},1040)]),default:u(()=>[l(Oe,null,{default:u(()=>[l(Be,{class:"pa-4 bg-secondary"},{default:u(()=>[we("span",Nl,k(ke.value),1)]),_:1}),l(N(pl),{ref_key:"refForm",ref:O,modelValue:se.value,"onUpdate:modelValue":e[30]||(e[30]=t=>se.value=t),onSubmit:ye},{default:u(({errors:t,isSubmitting:r})=>[l(wl,null,{default:u(()=>[l(Sl,{class:"px-0"},{default:u(()=>[l(xe,null,{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(xl,{modelValue:m.value.customer_id,"onUpdate:modelValue":[e[12]||(e[12]=n=>m.value.customer_id=n),$e],placeholder:o.$t("Client"),items:J.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.customer.firstname,"onUpdate:modelValue":e[13]||(e[13]=n=>m.value.customer.firstname=n),rules:[N(Ie)],label:o.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.customer.lastname,"onUpdate:modelValue":e[14]||(e[14]=n=>m.value.customer.lastname=n),rules:[N(Ie)],label:o.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.customer.email,"onUpdate:modelValue":e[15]||(e[15]=n=>m.value.customer.email=n),label:o.$t("Email")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.customer.phone,"onUpdate:modelValue":e[16]||(e[16]=n=>m.value.customer.phone=n),label:o.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(Ml,{modelValue:m.value.event_type,"onUpdate:modelValue":e[17]||(e[17]=n=>m.value.event_type=n),placeholder:o.$t("Type d'événement"),items:G.value.map(n=>n.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(pe,{ref:"dialogDemandDate",modelValue:B.value,"onUpdate:modelValue":e[23]||(e[23]=n=>B.value=n),"return-value":m.value.event_date,"onUpdate:returnValue":e[24]||(e[24]=n=>m.value.event_date=n),persistent:"",width:"290px"},{activator:u(({props:n})=>[l(T,R({modelValue:ee.value,"onUpdate:modelValue":e[18]||(e[18]=g=>ee.value=g),"prepend-inner-icon":"bx-calendar"},n,{placeholder:o.$t("Date de la demande"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[19]||(e[19]=g=>m.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:u(({isActive:n})=>[l(Me,{locale:"fr"},{default:u(()=>[l(Ne,{modelValue:m.value.event_date,"onUpdate:modelValue":e[22]||(e[22]=g=>m.value.event_date=g),"hide-header":""},{actions:u(()=>[l(U,{color:"primary",onClick:e[20]||(e[20]=g=>B.value=!1)},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[21]||(e[21]=g=>B.value=!1)},{default:u(()=>[D(k(o.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(fe,{modelValue:m.value.reception_period,"onUpdate:modelValue":e[25]||(e[25]=n=>m.value.reception_period=n),"hide-details":"",items:[o.$t("En matiné"),o.$t("Le midi"),o.$t("En soirée")],label:o.$t("La réception se déroulera plutôt"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.reception_start_time,"onUpdate:modelValue":e[26]||(e[26]=n=>m.value.reception_start_time=n),"hide-details":"",label:o.$t("Heure de réception"),clearable:""},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.event_location,"onUpdate:modelValue":e[27]||(e[27]=n=>m.value.event_location=n),"hide-details":"",label:o.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(T,{modelValue:m.value.number_people,"onUpdate:modelValue":e[28]||(e[28]=n=>m.value.number_people=n),"hide-details":"",type:"number",label:o.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12"},{default:u(()=>[l(Fl,{modelValue:m.value.comment,"onUpdate:modelValue":e[29]||(e[29]=n=>m.value.comment=n),"hide-details":"",label:o.$t("Description de la demande")},null,8,["modelValue","label"])]),_:1})]),_:1}),t.apiError?(ce(),Le("div",Ol,[l(El,{color:"error"},{default:u(()=>[D(k(t.apiError),1)]),_:2},1024)])):Se("",!0)]),_:2},1024)]),_:2},1024),l(je,null,{default:u(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:be},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",loading:p.value,type:"submit"},{default:u(()=>[D(k(o.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(le)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(pe,{modelValue:z.value,"onUpdate:modelValue":e[33]||(e[33]=t=>z.value=t),"max-width":"500px"},{default:u(()=>[l(Oe,null,{default:u(()=>[l(Be,{class:"text-h5 text-center py-6"},{default:u(()=>[D(k(o.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(je,null,{default:u(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:e[32]||(e[32]=t=>z.value=!1)},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",dark:"",onClick:he},{default:u(()=>[D(k(o.$t("OK")),1)]),_:1}),l(le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.demand_date":u(({item:t})=>[D(k(N(Ue)(t.demand_date)),1)]),"item.event_date":u(({item:t})=>[D(k(N(Ue)(t.event_date)),1)]),"item.status":u(({item:t})=>[l(He,{color:N(S).statusColor(t.status),size:"small",label:""},{default:u(()=>[D(k(N(S).statusText(t.status)),1)]),_:2},1032,["color"])]),"item.actions":u(({index:t,item:r})=>[we("div",Bl,[r.prestation?Se("",!0):(ce(),Re(Vl,{key:0,density:"compact",modelValue:$.value[t],"onUpdate:modelValue":n=>$.value[t]=n},null,8,["modelValue","onUpdate:modelValue"])),l(U,{density:"compact",color:"primary",class:"mx-2",variant:"outlined",to:"/demands/"+r.id},{default:u(()=>[D(k(o.$t("Voir")),1)]),_:2},1032,["to"]),l(ze,{text:o.$t("Modifier")},{activator:u(({props:n})=>[l(U,R({icon:"",flat:"",onClick:g=>ie(r)},n),{default:u(()=>[l(s,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),r.prestation==null?(ce(),Re(ze,{key:1,text:o.$t("Supprimer")},{activator:u(({props:n})=>[l(U,R({icon:"",flat:"",onClick:g=>ge(r)},n),{default:u(()=>[l(f,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):Se("",!0)])]),"no-data":u(()=>[we("span",null,k(o.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{ya as default};
