import{u as q}from"./customers-C0OtFmDH.js";import{a6 as X,r,av as G,aD as _,aE as H,h as J,e as g,g as K,q as O,o as i,c as v,_ as p,a4 as Q,w as a,b as s,aF as U,a as t,t as e,a8 as u,d as c,X as w,a5 as N,V as j}from"./index-Haou7WZV.js";import{_ as W,V as B}from"./BaseBreadcrumb-DGXSaYll.js";import{a as $,f as Y}from"./formatters-DCCWVJxZ.js";import{u as A}from"./demands-2iHDxeTo.js";import{u as L}from"./Controller-Bh-JHjeR.js";import{V as d,a as b}from"./VRow-BubB7DAO.js";import{a as m,d as V,V as h}from"./VCard-MdO1ZgSK.js";import{V as y,a as x}from"./VSpacer-Dff_LR4u.js";import"./VAvatar-D1nt9zQ9.js";const Z={class:"text-h6"},tt={class:"text-subtitle-1 textSecondary mt-3"},et={class:"text-subtitle-1 textSecondary mt-3"},st={class:"text-subtitle-1 textSecondary mt-3"},at={class:"text-subtitle-1 textSecondary mt-3"},lt={class:"text-subtitle-1 textSecondary mt-3"},ot={class:"text-subtitle-1 textSecondary mt-3"},rt={class:"d-flex align-start"},nt={class:"text-h4 mt-1"},it={class:"mt-9"},dt={class:"text-h4 font-weight-semibold mb-1"},ut={class:"d-flex align-start"},ct={class:"text-h4 mt-1"},mt={class:"mt-9"},ht={class:"text-h4 font-weight-semibold mb-1"},ft={class:"d-flex align-start"},_t={class:"text-h4 mt-1"},vt={class:"mt-9"},pt={class:"text-h4 font-weight-semibold mb-1"},gt={class:"d-flex align-start"},bt={class:"text-h4 mt-1"},yt={class:"mt-9"},xt={class:"text-h4 font-weight-semibold mb-1"},wt={class:"text-h6"},$t={class:"text-h6"},Vt={class:"text-h6"},kt={class:"text-h6"},Ct={class:"text-h6"},Pt={class:"text-h6"},Dt={style:{"max-height":"500px"},class:"overflow-y-auto"},St={class:"text-h6 font-weight-medium text-medium-emphasis"},Tt={class:"text-h6"},Et={class:"text-h6"},It={class:"text-h6"},Nt={class:"text-h6"},jt={class:"text-h6"},Bt={class:"text-h6"},At={class:"text-h6 font-weight-medium text-medium-emphasis"},Ot=X({__name:"View",setup(Lt){r(),G();const o=r({id:null,status:0,service:"",created_at:null,customer_id:null,prestation_id:null,customer:{id:null,firstname:"",lastname:"",email:"",phone:"",is_customer:!1,created_at:null,demands:[],prestations:[]}}),k=r({title:_("Détails")}),C=r([{text:_("Dashboard"),disabled:!1,href:"/"},{text:_("Client"),disabled:!1,href:"/customers"},{text:o.value.event_type||"",disabled:!0,href:"#"}]);function z(){k.value={title:_("Détails du client")},C.value=[{text:_("Dashboard"),disabled:!1,href:"/"},{text:_("Clients"),disabled:!1,href:"/customers"},{text:o.value.event_type||"",disabled:!0,href:"#"}]}const P=q(),D=H();J(()=>{E()});const f=r(!1);r(!1),r(100);const S=r(2),T=r(2);r(!1),r(!1),r(null);const M=r("");r(["primary","secondary","error","success","warning"]),r([{key:"created_at",order:"DESC"}]),r(0),r({itemsPerPage:100,rowsPerPage:100,page:1,sortDesc:[!0],sortBy:[{key:"created_at",order:"DESC"}]});const F=r(-1);r({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),r({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),r(!1),r([{title:"Prénom",align:"start",key:"customer.firstname",sortable:!1},{title:"Nom",align:"start",key:"customer.lastname",sortable:!1},{title:"Email",align:"start",key:"customer.email",sortable:!1},{title:"Téléphone",align:"start",key:"customer.phone",sortable:!1},{title:"Prestation",align:"start",key:"event_type"},{title:"Date de la customere",align:"start",key:"created_at"},{title:"Status",align:"start",key:"status"},{title:"Actions",key:"actions",sortable:!1}]),g(()=>P.customers.data.filter(l=>l.email.toLowerCase().includes(M.value.toLowerCase())));const R=g(()=>D.params.id);g(()=>o.value.customer.customers?o.value.customer.customers.filter(l=>l.id!=o.value.id):[]),g(()=>F.value===-1?"Nouvel administrateur":"Modifier l’administrateur");function E(){f.value=!0,P.fetchItem(D.params.id).then(l=>{l.data.error||(f.value=!1,o.value=l.data,z())}).catch(l=>{f.value=!1}).then(()=>{f.value=!1})}return K(R,(l,I)=>{l!=I&&E()},{deep:!0}),O(()=>{S.value>T.value&&(S.value=T.value)}),(l,I)=>(i(),v(w,null,[f.value?Q("",!0):(i(),p(W,{key:0,title:k.value.title,breadcrumbs:C.value},null,8,["title","breadcrumbs"])),f.value?(i(),p(b,{key:1,justify:"center",align:"center","align-content":"center"},{default:a(()=>[s(d,{cols:"12",justify:"center",align:"center","align-content":"center"},{default:a(()=>[s(U,{indeterminate:"",color:"primary",size:"150"})]),_:1})]),_:1})):(i(),p(b,{key:2},{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[s(b,{align:"center"},{default:a(()=>[s(d,{cols:"12",md:"4"},{default:a(()=>[s(m,{elevation:"10",class:"overflow-hidden h-100"},{default:a(()=>[s(V,{class:"py-4 px-6 text-white bg-primary"},{default:a(()=>[t("h4",Z,e(l.$t("Identification du customereur")),1)]),_:1}),s(h,{class:"pa-6"},{default:a(()=>[t("p",tt,e(l.$t("Prénom :"))+" "+e(o.value.firstname||""),1),t("p",et,e(l.$t("Nom :"))+" "+e(o.value.lastname||""),1),t("p",st,e(l.$t("Email :"))+" "+e(o.value.email||""),1),t("p",at,e(l.$t("Téléphone :"))+" "+e(o.value.phone||""),1),t("p",lt,e(l.$t("Date d'enregistrement :"))+" "+e(u($)(o.value.created_at)||""),1),t("p",ot,[c(e(l.$t("Type :"))+" ",1),o.value&&o.value.is_customer?(i(),p(y,{key:0,color:"success"},{default:a(()=>[c(e(l.$t("Client")),1)]),_:1})):(i(),p(y,{key:1,color:"error"},{default:a(()=>[c(e(l.$t("Prospect")),1)]),_:1}))])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"8"},{default:a(()=>[s(b,null,{default:a(()=>[s(d,{cols:"12",md:"3"},{default:a(()=>[s(m,{elevation:"10",class:"bg-primary h-100"},{default:a(()=>[s(h,null,{default:a(()=>[t("div",rt,[t("h2",nt,e(l.$t("Devis")),1),s(x)]),t("div",it,[t("h2",dt,e(o.value.demands?o.value.demands.length:0),1)])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"3"},{default:a(()=>[s(m,{elevation:"10",class:"bg-info h-100"},{default:a(()=>[s(h,null,{default:a(()=>[t("div",ut,[t("h2",ct,e(l.$t("Prestations")),1),s(x)]),t("div",mt,[t("h2",ht,e(o.value.prestations?o.value.prestations.length:0),1)])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"3"},{default:a(()=>[s(m,{elevation:"10",class:"bg-primary h-100"},{default:a(()=>[s(h,null,{default:a(()=>[t("div",ft,[t("h2",_t,e(l.$t("Paiements")),1),s(x)]),t("div",vt,[t("h2",pt,e(u(Y)(o.value.payments_sum_amount||0)),1)])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"3"},{default:a(()=>[s(m,{elevation:"10",class:"bg-success h-100"},{default:a(()=>[s(h,null,{default:a(()=>[t("div",gt,[t("h2",bt,e(l.$t("Prestations Clôturées")),1),s(x)]),t("div",yt,[t("h2",xt,e(o.value.prestations_count||0),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",lg:"6"},{default:a(()=>[s(m,{elevation:"10",class:"overflow-hidden h-100"},{default:a(()=>[s(V,{class:"py-4 px-6 text-white bg-info"},{default:a(()=>[t("h4",wt,e(l.$t("Les devis de"))+" "+e(o.value.firstname||"")+" "+e(o.value.lastname||""),1)]),_:1}),s(h,{class:"pa-6"},{default:a(()=>[s(B,{class:"month-table"},{default:a(()=>[t("thead",null,[t("tr",null,[t("th",$t,e(l.$t("ID")),1),t("th",Vt,e(l.$t("Prestation")),1),t("th",kt,e(l.$t("Date")),1),t("th",Ct,e(l.$t("Status")),1),t("th",Pt,e(l.$t("Action")),1)])]),t("tbody",Dt,[(i(!0),v(w,null,N(o.value.demands||[],n=>(i(),v("tr",{key:n.id,class:"month-item"},[t("td",null,e(n.id),1),t("td",null,[t("h6",St,e(n.event_type),1)]),t("td",null,e(u($)(n.demand_date)),1),t("td",null,[s(y,{rounded:"md",class:"font-weight-bold",color:u(A)().statusColor(n.status),size:"small",label:""},{default:a(()=>[c(e(u(A)().statusText(n.status)),1)]),_:2},1032,["color"])]),t("td",null,[s(j,{variant:"outlined",density:"compact",color:"info",to:"/demands/"+n.id},{default:a(()=>[c(e(l.$t("Voir")),1)]),_:2},1032,["to"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",lg:"6"},{default:a(()=>[s(m,{elevation:"10",class:"overflow-hidden h-100"},{default:a(()=>[s(V,{class:"py-4 px-6 text-white bg-info"},{default:a(()=>[t("h4",Tt,e(l.$t("Prestations de devis de"))+" "+e(o.value.firstname||"")+" "+e(o.value.lastname||""),1)]),_:1}),s(h,{class:"pa-6"},{default:a(()=>[s(B,{class:"month-table"},{default:a(()=>[t("thead",null,[t("tr",null,[t("th",Et,e(l.$t("ID")),1),t("th",It,e(l.$t("Prestation")),1),t("th",Nt,e(l.$t("Date")),1),t("th",jt,e(l.$t("Status")),1),t("th",Bt,e(l.$t("Action")),1)])]),t("tbody",null,[(i(!0),v(w,null,N(o.value.prestations||[],n=>(i(),v("tr",{key:n.id,class:"month-item"},[t("td",null,e(n.id),1),t("td",null,[t("h6",At,e(n.event_type),1)]),t("td",null,e(u($)(n.demand_date)),1),t("td",null,[s(y,{rounded:"md",class:"font-weight-bold",color:u(L)().statusColor(n.status),size:"small",label:""},{default:a(()=>[c(e(u(L)().statusText(n.status)),1)]),_:2},1032,["color"])]),t("td",null,[s(j,{variant:"outlined",density:"compact",color:"info",to:"/prestations/"+n.id},{default:a(()=>[c(e(l.$t("Voir")),1)]),_:2},1032,["to"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}});export{Ot as default};
