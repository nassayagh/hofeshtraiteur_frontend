import{a6 as x,av as D,e as g,r,aD as h,h as M,o as A,_ as B,w as l,b as e,d as u,t as i,n as H,V as f}from"./index-D3DdXZdG.js";import{u as T}from"./Controller-mKaDTZCd.js";import{u as E}from"./hall-EocmXO1s.js";import{b as I,V as N,c as P,a as U}from"./VCard-1m9q3-_R.js";import{g as C,i as S}from"./VSpacer-DdAD-FGi.js";import{a as j,V as k}from"./VRow-Bx-LvG9A.js";import{V as O}from"./VAutocomplete-D4CQMLo9.js";import{V as R}from"./VDialog-BHPx_cIy.js";const X=x({__name:"ChangeHall",props:{modelValue:Object,type:{type:String,default:"prestation"}},emits:["update:modelValue"],setup(b,{emit:_}){const $=T(),p=D(),w=E(),c=b,v=_,d=g({get:()=>c.modelValue,set:a=>v("update:modelValue",a)}),n=r(!1),s=r(!1);r("");const m=r(d.value.hall_id||null),V=r([]);g(()=>`${h("Modifier la salle")}`);function y(){s.value=!0,$.changeHall(d.value.id,m.value,c.type).then(a=>{d.value=a.data,n.value=!1,p.showSuccess(h("Salle changée avec succès")),v("refresh",a.data)}).catch(a=>{s.value=!1,p.showError(a.message)}).then(()=>{s.value=!1})}return M(()=>{w.fetchItems({per_page:1e3}).then(a=>{V.value=a.data.data})}),(a,t)=>(A(),B(R,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=o=>n.value=o),"max-width":"500px"},{activator:l(({props:o})=>[e(f,H({dark:""},o,{variant:"tonal",density:"compact",onClick:t[0]||(t[0]=q=>s.value=!1)}),{default:l(()=>[u(i(a.$t("Modifier")),1)]),_:2},1040)]),default:l(()=>[e(U,null,{default:l(()=>[e(I,{class:"text-h5 text-center py-6"},{default:l(()=>[u(i(a.$t("Modifier la salle")),1)]),_:1}),e(C),e(N,null,{default:l(()=>[e(j,null,{default:l(()=>[e(k,{cols:"12"},{default:l(()=>[e(k,{cols:"12"},{default:l(()=>[e(O,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),items:V.value,"item-value":"id","item-title":"name",label:a.$t("Salle liée"),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","items","label"])]),_:1})]),_:1})]),_:1})]),_:1}),e(C),e(P,null,{default:l(()=>[e(S),e(f,{color:"error",variant:"flat",dark:"",onClick:t[2]||(t[2]=o=>n.value=!1)},{default:l(()=>[u(i(a.$t("Annuller")),1)]),_:1}),e(f,{color:"success",variant:"flat",loading:s.value,dark:"",onClick:y},{default:l(()=>[u(i(a.$t("Enregistrer")),1)]),_:1},8,["loading"]),e(S)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{X as _};
