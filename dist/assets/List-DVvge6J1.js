import{u as se}from"./paymentMethod-Dz3VNcem.js";import{_ as ne}from"./BaseBreadcrumb-CZWnI0nK.js";import{r as ue}from"./validators-BPi-vT8z.js";import{O as ie,r,aa as de,ae as n,h as me,e as pe,g as fe,q as ve,E as U,o as B,c as D,b as a,w as o,V as p,n as ce,d,t as u,a as N,Q as O,L as ge,M as Ve}from"./index--eSAaoua.js";import{F as be}from"./vee-validate.esm-U2fcPC4K.js";import{V as j,a as L}from"./VRow-BqVouQvo.js";import{V as ke}from"./VDataTableServer-BSZaLEkB.js";import{V as Ce,a as ye}from"./VToolbar-v-kq36CI.js";import{V as q}from"./VTextField-BIunycXo.js";import{V as $}from"./VSpacer-BLion4vj.js";import{V as z}from"./VDialog-cLqV7fjH.js";import{V as R,a as K,c as he,b as Q}from"./VCard-C_EOskDD.js";import{V as xe}from"./VContainer-CBQUJw06.js";import{V as $e}from"./VAlert-Cer_YOfD.js";import{V as Pe}from"./VChip-BkiHneXL.js";/* empty css              */import"./VDataTable-BW0Rty__.js";import"./VSelect-C3ZqDHK6.js";import"./VInput-BZmnskkf.js";import"./index-DyKrsRPI.js";import"./VList-BFwTxV7r.js";import"./ssrBoot-7kARyJyG.js";import"./createSimpleFunctional-BNLeBn9G.js";import"./VAvatar-DO5dze8k.js";import"./VDivider-DAcvfAJ7.js";import"./dialog-transition-mxOinYMm.js";import"./VMenu-B-yKHGiX.js";import"./VCheckboxBtn-zj9NycWb.js";import"./VSelectionControl-CgstZIWm.js";import"./VLabel-YNF6VYNN.js";import"./VTable-BUYeiApe.js";import"./filter-BdPhCt1f.js";/* empty css                   */import"./VField-CkYLJqxY.js";import"./VSlideGroup-xxvn732U.js";const we={class:"text-h5"},Ie={key:0,class:"mt-2"},pa=ie({__name:"List",setup(Te){const S=r(),F=de(),G=r({title:"Modes de paiement"}),H=r([{text:n("Tableau de bord"),disabled:!1,href:"/"},{text:n("Modes de paiement"),disabled:!0,href:"#"}]),m=r([]),P=se();me(()=>{E()});const f=r(!1),w=r(!1),A=r(null),I=r(10),g=r(2),C=r(2),T=r(0),M=r(!1),v=r(!1),y=r("");r(["primary","secondary","error","success","warning"]);const c=r([{key:"name",order:"asc"}]);r(0);const V=r({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"name",order:"desc"}]}),h=r(-1),s=r({id:null,name:"",description:"",status:null}),J=r({id:null,name:"",description:"",status:null});function W(l){return l==0?"#13DEB9":l==1?"#FA896B":l==2?"#5D87FF":"#FFAE1F"}function X(l){return l==0?n("Started"):l=="cancel"?n("Cancelled"):l=="completed"?n("Completed"):n("Started")}const b=r(!1),Y=r([{title:"Nom",align:"start",key:"name"},{title:"Actions",key:"actions",sortable:!1}]);function Z(l){f.value=!1,h.value=m.value.indexOf(l),s.value=Object.assign({},l),v.value=!0}function ee(l){s.value=l,b.value=!0}function ae(){v.value=!1,setTimeout(()=>{s.value=Object.assign({},J.value),h.value=-1},300)}function te(l,{setErrors:t}){var i;(i=S.value)==null||i.validate().then(({valid:k})=>{k&&(w.value=!0,P.addItem(s.value).then(e=>{if(e.data.error){t({apiError:e.data.message});return}s.value.id!=null?Object.assign(m.value[h.value],e.data):m.value.unshift(e.data),f.value=!1,v.value=!1,s.value={changePassword:!0},F.showSuccess(n("Mode de paiement sauvée avec succès"))}).catch(e=>{w.value=!1,t({apiError:e})}).then(()=>{w.value=!1,t({apiError:null})}))})}function le(){P.deleteItem(s.value.id);const l=m.value.findIndex(t=>t.id==s.value.id);m.value.splice(l,1),b.value=!1,F.showSuccess(n("Mode de paiement supprimé avec succès"))}const oe=pe(()=>h.value===-1?n("Nouvel Mode de paiement"):n("Modifier la Mode de paiement"));function E(){try{clearTimeout(A.value)}catch{}A.value=setTimeout(()=>{f.value=!0;let l="id",t="desc";console.log(c.value),c.value.length>0&&(l=c.value[0].key,t=c.value[0].order),P.fetchItems({term:y.value,paginate:I.value,current_page:g.value,direction:t,order_by:l,page:V.value.page,per_page:V.value.itemsPerPage}).then(i=>{if(i.data){const{data:k,current_page:e,next_page_url:x,total:_,per_page:_e,to:Se,last_page:re}=i.data;m.value=k,C.value=re,T.value=_}}).catch(i=>{console.error(i)}).then(()=>{v.value=!1,f.value=!1})},1e3)}return fe([y,V],()=>{E()},{deep:!0}),ve(()=>{g.value>C.value&&(g.value=C.value)}),(l,t)=>{const i=U("EditIcon"),k=U("TrashIcon");return B(),D(Ve,null,[a(ne,{title:G.value.title,breadcrumbs:H.value},null,8,["title","breadcrumbs"]),a(L,null,{default:o(()=>[a(j,{cols:"12"},{default:o(()=>[a(ke,{class:"border rounded-md",headers:Y.value,loading:f.value,items:m.value,"multi-sort":!1,"items-per-page":I.value,"onUpdate:itemsPerPage":t[7]||(t[7]=e=>I.value=e),"items-per-page-text":l.$t("Articles par page"),options:V.value,"onUpdate:options":t[8]||(t[8]=e=>V.value=e),"sort-by":c.value,"onUpdate:sortBy":t[9]||(t[9]=e=>c.value=e),page:g.value,"onUpdate:page":t[10]||(t[10]=e=>g.value=e),"items-length":T.value,"onUpdate:itemsLength":t[11]||(t[11]=e=>T.value=e),"show-select":!1,"loading-text":l.$t("Chargement des éléments"),"no-data-text":l.$t("Pas de données"),"no-results-text":l.$t("Aucun résultat"),onPageCount:t[12]||(t[12]=e=>C.value=e)},{top:o(()=>[a(Ce,{class:"rounded-t-md",flat:""},{default:o(()=>[a(ye,null,{default:o(()=>[a(q,{density:"compact",modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:l.$t("Rechercher..."),"hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),a($),a(z,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=e=>v.value=e),"max-width":"350px"},{activator:o(({props:e})=>[a(p,ce({color:"primary",variant:"flat",onClick:t[1]||(t[1]=x=>s.value={}),dark:""},e),{default:o(()=>[d(u(l.$t("Ajouter une Mode de paiement")),1)]),_:2},1040)]),default:o(()=>[a(R,null,{default:o(()=>[a(K,{class:"pa-4 bg-secondary"},{default:o(()=>[N("span",we,u(oe.value),1)]),_:1}),a(O(be),{ref_key:"refForm",ref:S,modelValue:M.value,"onUpdate:modelValue":t[3]||(t[3]=e=>M.value=e),onSubmit:te},{default:o(({errors:e,isSubmitting:x})=>[a(he,null,{default:o(()=>[a(xe,{class:"px-0"},{default:o(()=>[a(L,null,{default:o(()=>[a(j,{cols:"12"},{default:o(()=>[a(q,{modelValue:s.value.name,"onUpdate:modelValue":t[2]||(t[2]=_=>s.value.name=_),rules:[O(ue)],label:l.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1})]),_:1}),e.apiError?(B(),D("div",Ie,[a($e,{color:"error"},{default:o(()=>[d(u(e.apiError),1)]),_:2},1024)])):ge("",!0)]),_:2},1024)]),_:2},1024),a(Q,null,{default:o(()=>[a($),a(p,{color:"error",variant:"flat",dark:"",onClick:ae},{default:o(()=>[d(u(l.$t("Annuler")),1)]),_:1}),a(p,{color:"success",variant:"flat",loading:f.value,type:"submit"},{default:o(()=>[d(u(l.$t("Sauvegarder")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(z,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),"max-width":"500px"},{default:o(()=>[a(R,null,{default:o(()=>[a(K,{class:"text-h5 text-center py-6"},{default:o(()=>[d(u(l.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),a(Q,null,{default:o(()=>[a($),a(p,{color:"error",variant:"flat",dark:"",onClick:t[5]||(t[5]=e=>b.value=!1)},{default:o(()=>[d(u(l.$t("Annuler")),1)]),_:1}),a(p,{color:"success",variant:"flat",dark:"",onClick:le},{default:o(()=>[d(u(l.$t("OK")),1)]),_:1}),a($)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.status":o(({item:e})=>[a(Pe,{color:W(e.status)},{default:o(()=>[d(u(X(e.status)),1)]),_:2},1032,["color"])]),"item.actions":o(({item:e})=>[a(p,{icon:"",small:"",onClick:x=>Z(e),flat:""},{default:o(()=>[a(i,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1032,["onClick"]),a(p,{icon:"",small:"",onClick:x=>ee(e),flat:""},{default:o(()=>[a(k,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1032,["onClick"])]),"no-data":o(()=>[N("span",null,u(l.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{pa as default};
