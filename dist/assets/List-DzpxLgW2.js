import{u as Je}from"./demands-DdqTb5sQ.js";import{u as We}from"./eventType-CRg-ULnk.js";import{u as Xe}from"./customers-DfvB46NP.js";import{u as Ye}from"./hall-CHrvEoUF.js";import{_ as Ze}from"./BaseBreadcrumb-DHrsxMF1.js";import{r as Me}from"./validators-BPi-vT8z.js";import{a as ve}from"./formatters-DCCWVJxZ.js";import{p as Qe,aD as el,aE as ll,j as al,aA as tl,r as d,s as ce,u as Le,e as S,aF as ol,g as ue,Y as Oe,aG as nl,m as ul,b as l,X as Ve,n as E,ac as Ne,aH as rl,aI as sl,d as D,aJ as il,aK as dl,aB as ml,aL as vl,a6 as cl,aC as fl,av as pl,aM as C,h as Vl,q as gl,Z as Ue,o as B,c as Ae,w as n,V as U,t as k,a as K,a8 as W,_ as fe,a4 as pe,ae as Te,af as Fe}from"./index-CyDPjvhG.js";import{F as bl}from"./vee-validate.esm-BruRWcwV.js";import{_ as yl}from"./ValidateDemand.vue_vue_type_script_setup_true_lang-XrpUC_qm.js";import{_ as hl}from"./ChangeHall.vue_vue_type_script_setup_true_lang-CqCj4R8f.js";import{V as $,a as Ee}from"./VRow-B-WDQiBW.js";import{V as kl}from"./VDataTableServer-CGmIEZ4V.js";import{V as _l}from"./VToolbar-Dnea-8rh.js";import{m as Cl,u as $l,V as A}from"./VTextField-BOa6WVOz.js";import{m as xl,u as wl,V as Dl,a as Sl,b as Re}from"./VSelect-CxOuPc92.js";import{V as Ce}from"./VDialog-DJHC9TMJ.js";import{V as je}from"./VLocaleProvider-8TCRFNt1.js";import{V as Be}from"./VDatePicker-Cd5tVqt-.js";import{V as Ge,a as oe}from"./VSpacer-Bb4zFbSh.js";import{a as Ke,b as ze,V as Pl,c as He}from"./VCard-Cq26GZkA.js";import{V as Il}from"./VContainer-BkN4zPMV.js";import{V as Ul}from"./VAutocomplete-DhRFIrST.js";import{m as Al,u as Tl}from"./filter-B-JLXdZ1.js";import{h as Fl,t as $e,g as El,e as Rl,c as qe}from"./VMenu-C2-kO3b7.js";import{V as Ml}from"./VAvatar-B6iclkLS.js";import{V as Ll}from"./VTextarea-CWDsf9RX.js";import{V as Ol}from"./VAlert-XaqBz_gE.js";import{V as ne}from"./VTooltip-DXSps8b4.js";import"./Controller-DbdfW8V9.js";import"./VSheet-CncNbamK.js";function Nl(o,x,z){if(x==null)return o;if(Array.isArray(x))throw new Error("Multiple matches is not implemented");return typeof x=="number"&&~x?l(Ve,null,[l("span",{class:"v-combobox__unmask"},[o.substr(0,x)]),l("span",{class:"v-combobox__mask"},[o.substr(x,z)]),l("span",{class:"v-combobox__unmask"},[o.substr(x+z)])]):o}const jl=Qe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Al({filterKeys:["title"]}),...xl({hideNoData:!0,returnObject:!0}),...el(Cl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ll({transition:!1})},"VCombobox"),Bl=al()({name:"VCombobox",props:jl(),emits:{"update:focused":o=>!0,"update:modelValue":o=>!0,"update:search":o=>!0,"update:menu":o=>!0},setup(o,x){var me;let{emit:z,slots:p}=x;const{t:re}=tl(),R=d(),T=ce(!1),M=ce(!0),X=ce(!1),P=d(),Y=d(),H=Le(o,"menu"),b=S({get:()=>H.value,set:u=>{var v;H.value&&!u&&((v=P.value)!=null&&v.ΨopenChildren)||(H.value=u)}}),f=ce(-1);let N=!1;const q=S(()=>{var u;return(u=R.value)==null?void 0:u.color}),se=S(()=>b.value?o.closeText:o.openText),{items:Z,transformIn:Q,transformOut:ie}=Fl(o),{textColorClasses:G,textColorStyles:ee}=ol(q),c=Le(o,"modelValue",[],u=>Q(ml(u)),u=>{const v=ie(u);return o.multiple?v:v[0]??null}),L=$l(),I=ce(o.multiple?"":((me=c.value[0])==null?void 0:me.title)??""),_=S({get:()=>I.value,set:u=>{var v;if(I.value=u??"",o.multiple||(c.value=[$e(o,u)]),u&&o.multiple&&((v=o.delimiters)!=null&&v.length)){const a=u.split(new RegExp(`(?:${o.delimiters.join("|")})+`));a.length>1&&(a.forEach(e=>{e=e.trim(),e&&F($e(o,e))}),I.value="")}u||(f.value=-1),M.value=!u}}),j=S(()=>typeof o.counterValue=="function"?o.counterValue(c.value):typeof o.counterValue=="number"?o.counterValue:o.multiple?c.value.length:_.value.length);ue(I,u=>{N?Oe(()=>N=!1):T.value&&!b.value&&(b.value=!0),z("update:search",u)}),ue(c,u=>{var v;o.multiple||(I.value=((v=u[0])==null?void 0:v.title)??"")});const{filteredItems:V,getMatches:J}=Tl(o,Z,()=>M.value?"":_.value),w=S(()=>o.hideSelected?V.value.filter(u=>!c.value.some(v=>v.value===u.value)):V.value),m=S(()=>c.value.map(u=>u.value)),le=S(()=>{var v;return(o.autoSelectFirst===!0||o.autoSelectFirst==="exact"&&_.value===((v=w.value[0])==null?void 0:v.title))&&w.value.length>0&&!M.value&&!X.value}),O=S(()=>o.hideNoData&&!w.value.length||o.readonly||(L==null?void 0:L.isReadonly.value)),de=d(),{onListScroll:ge,onListKeydown:xe}=wl(de,R);function be(u){N=!0,o.openOnClear&&(b.value=!0)}function ye(){O.value||(b.value=!0)}function we(u){O.value||(T.value&&(u.preventDefault(),u.stopPropagation()),b.value=!b.value)}function De(u){var e;if(vl(u)||o.readonly||L!=null&&L.isReadonly.value)return;const v=R.value.selectionStart,a=c.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(u.key))&&u.preventDefault(),["Enter","ArrowDown"].includes(u.key)&&(b.value=!0),["Escape"].includes(u.key)&&(b.value=!1),["Enter","Escape","Tab"].includes(u.key)&&(le.value&&["Enter","Tab"].includes(u.key)&&F(V.value[0]),M.value=!0),u.key==="ArrowDown"&&le.value&&((e=de.value)==null||e.focus("next")),!!o.multiple){if(["Backspace","Delete"].includes(u.key)){if(f.value<0){u.key==="Backspace"&&!_.value&&(f.value=a-1);return}const s=f.value,g=c.value[f.value];g&&!g.props.disabled&&F(g,!1),f.value=s>=a-1?a-2:s}if(u.key==="ArrowLeft"){if(f.value<0&&v>0)return;const s=f.value>-1?f.value-1:a-1;c.value[s]?f.value=s:(f.value=-1,R.value.setSelectionRange(_.value.length,_.value.length))}if(u.key==="ArrowRight"){if(f.value<0)return;const s=f.value+1;c.value[s]?f.value=s:(f.value=-1,R.value.setSelectionRange(0,0))}u.key==="Enter"&&_.value&&(F($e(o,_.value)),_.value="")}}function Se(){var u;T.value&&(M.value=!0,(u=R.value)==null||u.focus())}function F(u){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(o.multiple){const a=c.value.findIndex(s=>o.valueComparator(s.value,u.value)),e=v??!~a;if(~a){const s=e?[...c.value,u]:[...c.value];s.splice(a,1),c.value=s}else e&&(c.value=[...c.value,u]);o.clearOnSelect&&(_.value="")}else{const a=v!==!1;c.value=a?[u]:[],I.value=a?u.title:"",Oe(()=>{b.value=!1,M.value=!0})}}function Pe(u){T.value=!0,setTimeout(()=>{X.value=!0})}function Ie(u){X.value=!1}function he(u){(u==null||u===""&&!o.multiple)&&(c.value=[])}return ue(T,(u,v)=>{u||u===v||(f.value=-1,b.value=!1,le.value&&!X.value&&!c.value.some(a=>{let{value:e}=a;return e===w.value[0].value})?F(w.value[0]):o.multiple&&_.value&&F($e(o,_.value)))}),ue(b,()=>{if(!o.hideSelected&&b.value&&c.value.length){const u=w.value.findIndex(v=>c.value.some(a=>o.valueComparator(a.value,v.value)));nl&&window.requestAnimationFrame(()=>{var v;u>=0&&((v=Y.value)==null||v.scrollToIndex(u))})}}),ue(w,(u,v)=>{T.value&&(!u.length&&o.hideNoData&&(b.value=!1),!v.length&&u.length&&(b.value=!0))}),ul(()=>{const u=!!(o.chips||p.chip),v=!!(!o.hideNoData||w.value.length||p["prepend-item"]||p["append-item"]||p["no-data"]),a=c.value.length>0,e=A.filterProps(o);return l(A,E({ref:R},e,{modelValue:_.value,"onUpdate:modelValue":[s=>_.value=s,he],focused:T.value,"onUpdate:focused":s=>T.value=s,validationValue:c.externalValue,counterValue:j.value,dirty:a,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!o.chips,"v-combobox--selection-slot":!!p.selection,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${o.multiple?"multiple":"single"}`]:!0},o.class],style:o.style,readonly:o.readonly,placeholder:a?void 0:o.placeholder,"onClick:clear":be,"onMousedown:control":ye,onKeydown:De}),{...p,default:()=>l(Ve,null,[l(El,E({ref:P,modelValue:b.value,"onUpdate:modelValue":s=>b.value=s,activator:"parent",contentClass:"v-combobox__content",disabled:O.value,eager:o.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:o.transition,onAfterLeave:Se},o.menuProps),{default:()=>[v&&l(Rl,E({ref:de,selected:m.value,selectStrategy:o.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onKeydown:xe,onFocusin:Pe,onFocusout:Ie,onScrollPassive:ge,tabindex:"-1","aria-live":"polite",color:o.itemColor??o.color},o.listProps),{default:()=>{var s,g,y;return[(s=p["prepend-item"])==null?void 0:s.call(p),!w.value.length&&!o.hideNoData&&(((g=p["no-data"])==null?void 0:g.call(p))??l(qe,{title:re(o.noDataText)},null)),l(Dl,{ref:Y,renderless:!0,items:w.value},{default:t=>{var ae;let{item:i,index:r,itemRef:h}=t;const ke=E(i.props,{ref:h,key:r,active:le.value&&r===0?!0:void 0,onClick:()=>F(i,null)});return((ae=p.item)==null?void 0:ae.call(p,{item:i,index:r,props:ke}))??l(qe,ke,{prepend:te=>{let{isSelected:_e}=te;return l(Ve,null,[o.multiple&&!o.hideSelected?l(Sl,{key:i.value,modelValue:_e,ripple:!1,tabindex:"-1"},null):void 0,i.props.prependAvatar&&l(Ml,{image:i.props.prependAvatar},null),i.props.prependIcon&&l(Ne,{icon:i.props.prependIcon},null)])},title:()=>{var te,_e;return M.value?i.title:Nl(i.title,(te=J(i))==null?void 0:te.title,((_e=_.value)==null?void 0:_e.length)??0)}})}}),(y=p["append-item"])==null?void 0:y.call(p)]}})]}),c.value.map((s,g)=>{function y(h){h.stopPropagation(),h.preventDefault(),F(s,!1)}const t={"onClick:close":y,onMousedown(h){h.preventDefault(),h.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},i=u?!!p.chip:!!p.selection,r=i?rl(u?p.chip({item:s,index:g,props:t}):p.selection({item:s,index:g})):void 0;if(!(i&&!r))return l("div",{key:s.value,class:["v-combobox__selection",g===f.value&&["v-combobox__selection--selected",G.value]],style:g===f.value?ee.value:{}},[u?p.chip?l(sl,{key:"chip-defaults",defaults:{VChip:{closable:o.closableChips,size:"small",text:s.title}}},{default:()=>[r]}):l(Ge,E({key:"chip",closable:o.closableChips,size:"small",text:s.title,disabled:s.props.disabled},t),null):r??l("span",{class:"v-combobox__selection-text"},[s.title,o.multiple&&g<c.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[D(",")])])])})]),"append-inner":function(){var t;for(var s=arguments.length,g=new Array(s),y=0;y<s;y++)g[y]=arguments[y];return l(Ve,null,[(t=p["append-inner"])==null?void 0:t.call(p,...g),(!o.hideNoData||o.items.length)&&o.menuIcon?l(Ne,{class:"v-combobox__menu-icon",icon:o.menuIcon,onMousedown:we,onClick:il,"aria-label":re(se.value),title:re(se.value)},null):void 0])}})}),dl({isFocused:T,isPristine:M,menu:b,search:_,selectionIndex:f,filteredItems:V,select:F},R)}}),Kl={class:"text-h5"},zl={key:0,class:"mt-2"},Hl={key:0},ql=["onClick"],Gl=["onClick"],Jl={class:"d-flex align-center"},wa=cl({__name:"List",setup(o){const x=fl(),z=d(),p=pl(),re=We(),R=Xe(),T=Ye(),M=d({title:C("Gestion des demandes")}),X=d([{text:C("Dashboard"),disabled:!1,href:"/"},{text:C("Gestion des demandes"),disabled:!0,href:"#"}]),P=d([]),Y=d([]),H=d([]),b=d([]),f=Je();Vl(()=>{he(),me(),u(),T.fetchItems({per_page:1e3}).then(a=>{b.value=a.data.data})}),d(!1);const N=d(!1),q=d(!1);d(!1),d(!1),d(!1),d(""),d(),d(!1);const se=d(null);d(null),d(null),d(null);const Z=d(!1),Q=d(!1);d();const ie=d(100),G=d(2),ee=d(2),c=d(0),L=d(!1),I=d(!1);d(null);const _=d("");d(["primary","secondary","error","success","warning"]);const j=d([{key:"event_date",order:"ASC"}]);d(0),d({total:0,validated:0,unvalidated:0});const V=d({search:null,status:null,date:null,event_type:null}),J=d({itemsPerPage:100,rowsPerPage:100,page:1,sortDesc:[!0],sortBy:[{key:"event_date",order:"ASC"}]}),w=d(-1),m=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),le=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),O=d(!1),de=d([{title:C("ID"),align:"start",key:"id",sortable:!0},{title:C("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:C("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:C("Email"),align:"start",key:"customer.email",sortable:!1},{title:C("Tél."),align:"start",key:"customer.phone",sortable:!1},{title:C("Prest."),align:"start",key:"event_type"},{title:C("Source"),align:"start",key:"source"},{title:C("Date 'évén"),key:"event_date"},{title:C("Moment"),key:"reception_period"},{title:C("Heure"),key:"reception_start_time"},{title:C("Lieu"),key:"event_location"},{title:C("Salle"),key:"hall.name"},{title:C("Conv"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),ge=S(()=>V.value.date&&V.value.date.length>0?ve(V.value.date[0])+" - "+ve(V.value.date[V.value.date.length-1]):null),xe=S(()=>m.value.event_date?x.format(m.value.event_date,"shortDate"):null),be=S(()=>m.value.event_date?ve(m.value.event_date):null);S(()=>f.demands.data.filter(a=>a.email.toLowerCase().includes(_.value.toLowerCase())));function ye(a){N.value=!1,w.value=P.value.indexOf(a),m.value=Object.assign({},a),I.value=!0}function we(a){m.value=a,O.value=!0}function De(){I.value=!1,setTimeout(()=>{m.value=Object.assign({customer:{}},le.value),w.value=-1},300)}function Se(a,{setErrors:e}){var s;(s=z.value)==null||s.validate().then(({valid:g})=>{g&&(q.value=!0,f.addItem({...m.value,event_date:xe.value}).then(y=>{if(y.data.error){e({apiError:y.data.message});return}const t=y.data.event_date!=null?new Date(y.data.event_date):null,i={...y.data,event_date:t};m.value.id!=null?Object.assign(P.value[w.value],i):P.value.unshift(i),q.value=!1,I.value=!1,m.value={customer:{}},p.showSuccess(C("Demande enregistrée avec succès")),me(),f.fetchStatistics()}).catch(y=>{q.value=!1,e({apiError:y})}).then(()=>{q.value=!1,e({apiError:null})}))})}function F(){f.deleteItem(m.value.id);const a=P.value.findIndex(e=>e.id==m.value.id);P.value.splice(a,1),O.value=!1,p.showSuccess(C("Demande supprimée avec succès")),f.fetchStatistics()}const Pe=S(()=>w.value===-1?"Nouvelle demande":"Modifier la demande"),Ie=S(()=>V.value.date&&V.value.date.length?V.value.date.length>1?[x.format(V.value.date[0],"shortDate"),x.format(V.value.date[V.value.date.length-1],"shortDate")]:[x.format(V.value.date[0],"shortDate"),x.format(V.value.date[0],"shortDate")]:null);function he(){try{clearTimeout(se.value)}catch{}se.value=setTimeout(()=>{N.value=!0;let a="id",e="desc";console.log(j.value),j.value.length>0&&(a=j.value[0].key,e=j.value[0].order),f.fetchItems({term:_.value,paginate:ie.value,current_page:G.value,direction:e,order_by:a,page:J.value.page,per_page:J.value.itemsPerPage,...V.value,date:Ie.value}).then(s=>{if(s.data){const{data:g,current_page:y,next_page_url:t,total:i,per_page:r,to:h,last_page:ke}=s.data;P.value=g.map(ae=>{const te=ae.event_date!=null?new Date(ae.event_date):null;return{...ae,event_date:te}}),ee.value=ke,c.value=i}}).catch(s=>{console.error(s)}).then(()=>{N.value=!1})},1e3)}function me(){re.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(a=>{if(a.data){const{data:e,current_page:s,next_page_url:g,total:y,per_page:t,to:i,last_page:r}=a.data;Y.value=e}}).catch(a=>{console.error(a)}).then(()=>{})}function u(){R.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(a=>{if(a.data){const{data:e,current_page:s,next_page_url:g,total:y,per_page:t,to:i,last_page:r}=a.data;H.value=e.map(h=>({...h,name:h.firstname+" "+h.lastname+" ("+(h.is_customer?C("Client"):C("Prospect"))+")"}))}}).catch(a=>{console.error(a)}).then(()=>{})}ue([_,J,V],()=>{he()},{deep:!0}),gl(()=>{G.value>ee.value&&(G.value=ee.value)});function v(a){if(a){const e=H.value.find(s=>s.id==a);e&&(m.value.customer=e)}}return(a,e)=>{const s=Ue("EyeIcon"),g=Ue("PencilIcon"),y=Ue("TrashIcon");return B(),Ae(Ve,null,[l(Ze,{title:`${M.value.title}(${c.value})`,breadcrumbs:X.value},null,8,["title","breadcrumbs"]),l(Ee,null,{default:n(()=>[l($,{cols:"12"},{default:n(()=>[l(kl,{class:"border rounded-md",headers:de.value,loading:N.value,items:P.value,"multi-sort":!1,"items-per-page":ie.value,"onUpdate:itemsPerPage":e[33]||(e[33]=t=>ie.value=t),"items-per-page-text":a.$t("Articles par page"),options:J.value,"onUpdate:options":e[34]||(e[34]=t=>J.value=t),"sort-by":j.value,"onUpdate:sortBy":e[35]||(e[35]=t=>j.value=t),page:G.value,"onUpdate:page":e[36]||(e[36]=t=>G.value=t),"items-length":c.value,"onUpdate:itemsLength":e[37]||(e[37]=t=>c.value=t),"show-select":!1,"loading-text":a.$t("Chargement des éléments"),"no-data-text":a.$t("Pas de données"),"no-results-text":a.$t("Aucun résultat"),onPageCount:e[38]||(e[38]=t=>ee.value=t)},{top:n(()=>[l(_l,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:n(()=>[l(Ee,null,{default:n(()=>[l($,null,{default:n(()=>[l(A,{density:"compact",modelValue:V.value.search,"onUpdate:modelValue":e[0]||(e[0]=t=>V.value.search=t),placeholder:a.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l($,null,{default:n(()=>[l(Re,{density:"compact",modelValue:V.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value.event_type=t),placeholder:a.$t("Prestation"),items:Y.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l($,null,{default:n(()=>[l(Ce,{ref:"dialog",modelValue:Z.value,"onUpdate:modelValue":e[7]||(e[7]=t=>Z.value=t),"return-value":V.value.date,"onUpdate:returnValue":e[8]||(e[8]=t=>V.value.date=t),persistent:"",width:"290px"},{activator:n(({props:t})=>[l(A,E({modelValue:ge.value,"onUpdate:modelValue":e[2]||(e[2]=i=>ge.value=i),"prepend-inner-icon":"bx-calendar"},t,{density:"compact",placeholder:a.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[3]||(e[3]=i=>V.value.date=null)}),null,16,["modelValue","placeholder"])]),default:n(({isActive:t})=>[l(je,{locale:"fr"},{default:n(()=>[l(Be,{modelValue:V.value.date,"onUpdate:modelValue":e[6]||(e[6]=i=>V.value.date=i),"hide-header":"",multiple:"range"},{actions:n(()=>[l(U,{color:"primary",onClick:e[4]||(e[4]=i=>Z.value=!1)},{default:n(()=>[D(k(a.$t("Annuler")),1)]),_:1}),l(oe),l(U,{variant:"elevated",color:"primary",onClick:e[5]||(e[5]=i=>Z.value=!1)},{default:n(()=>[D(k(a.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l($,{class:""},{default:n(()=>[l(Ce,{modelValue:I.value,"onUpdate:modelValue":e[30]||(e[30]=t=>I.value=t),"max-width":"600px"},{activator:n(({props:t})=>[l(U,E({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[9]||(e[9]=i=>ye({customer:{},source:"admin"})),dark:""},t),{default:n(()=>[D(k(a.$t("Ajouter une demande")),1)]),_:2},1040)]),default:n(()=>[l(Ke,null,{default:n(()=>[l(ze,{class:"pa-4 bg-secondary"},{default:n(()=>[K("span",Kl,k(Pe.value),1)]),_:1}),l(W(bl),{ref_key:"refForm",ref:z,modelValue:L.value,"onUpdate:modelValue":e[29]||(e[29]=t=>L.value=t),onSubmit:Se},{default:n(({errors:t,isSubmitting:i})=>[l(Pl,null,{default:n(()=>[l(Il,{class:"px-0"},{default:n(()=>[l(Ee,null,{default:n(()=>[l($,{cols:"12"},{default:n(()=>[l(Ul,{modelValue:m.value.customer_id,"onUpdate:modelValue":[e[10]||(e[10]=r=>m.value.customer_id=r),v],placeholder:a.$t("Client"),items:H.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.customer.firstname,"onUpdate:modelValue":e[11]||(e[11]=r=>m.value.customer.firstname=r),rules:[W(Me)],label:a.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.customer.lastname,"onUpdate:modelValue":e[12]||(e[12]=r=>m.value.customer.lastname=r),rules:[W(Me)],label:a.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.customer.email,"onUpdate:modelValue":e[13]||(e[13]=r=>m.value.customer.email=r),label:a.$t("Email")},null,8,["modelValue","label"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.customer.phone,"onUpdate:modelValue":e[14]||(e[14]=r=>m.value.customer.phone=r),label:a.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(Bl,{modelValue:m.value.event_type,"onUpdate:modelValue":e[15]||(e[15]=r=>m.value.event_type=r),placeholder:a.$t("Type d'événement"),items:Y.value.map(r=>r.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(Ce,{ref:"dialogDemandDate",modelValue:Q.value,"onUpdate:modelValue":e[21]||(e[21]=r=>Q.value=r),"return-value":m.value.event_date,"onUpdate:returnValue":e[22]||(e[22]=r=>m.value.event_date=r),persistent:"",width:"290px"},{activator:n(({props:r})=>[l(A,E({modelValue:be.value,"onUpdate:modelValue":e[16]||(e[16]=h=>be.value=h),"prepend-inner-icon":"bx-calendar"},r,{placeholder:a.$t("Date de l'évènement"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[17]||(e[17]=h=>m.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:n(({isActive:r})=>[l(je,{locale:"fr"},{default:n(()=>[l(Be,{modelValue:m.value.event_date,"onUpdate:modelValue":e[20]||(e[20]=h=>m.value.event_date=h),"hide-header":""},{actions:n(()=>[l(U,{color:"primary",onClick:e[18]||(e[18]=h=>Q.value=!1)},{default:n(()=>[D(k(a.$t("Annuler")),1)]),_:1}),l(oe),l(U,{variant:"elevated",color:"primary",onClick:e[19]||(e[19]=h=>Q.value=!1)},{default:n(()=>[D(k(a.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(Re,{modelValue:m.value.reception_period,"onUpdate:modelValue":e[23]||(e[23]=r=>m.value.reception_period=r),"hide-details":"",items:[a.$t("En matiné"),a.$t("Le midi"),a.$t("En soirée")],label:a.$t("La réception se déroulera plutôt"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),l($,{cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.reception_start_time,"onUpdate:modelValue":e[24]||(e[24]=r=>m.value.reception_start_time=r),"hide-details":"",label:a.$t("Heure de réception"),clearable:""},null,8,["modelValue","label"])]),_:1}),m.value.source!="admin"?(B(),fe($,{key:0,cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.event_location,"onUpdate:modelValue":e[25]||(e[25]=r=>m.value.event_location=r),"hide-details":"",label:a.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1})):(B(),fe($,{key:1,cols:"12",md:"6"},{default:n(()=>[l(Re,{modelValue:m.value.hall_id,"onUpdate:modelValue":e[26]||(e[26]=r=>m.value.hall_id=r),items:b.value,"item-value":"id","item-title":"name",label:a.$t("Salle liée")},null,8,["modelValue","items","label"])]),_:1})),l($,{cols:"12",md:"6"},{default:n(()=>[l(A,{modelValue:m.value.number_people,"onUpdate:modelValue":e[27]||(e[27]=r=>m.value.number_people=r),"hide-details":"",type:"number",label:a.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1}),l($,{cols:"12"},{default:n(()=>[l(Ll,{modelValue:m.value.comment,"onUpdate:modelValue":e[28]||(e[28]=r=>m.value.comment=r),"hide-details":"",label:a.$t("Description de la demande")},null,8,["modelValue","label"])]),_:1})]),_:1}),t.apiError?(B(),Ae("div",zl,[l(Ol,{color:"error"},{default:n(()=>[D(k(t.apiError),1)]),_:2},1024)])):pe("",!0)]),_:2},1024)]),_:2},1024),l(He,null,{default:n(()=>[l(oe),l(U,{color:"error",variant:"flat",dark:"",onClick:De},{default:n(()=>[D(k(a.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",loading:q.value,type:"submit"},{default:n(()=>[D(k(a.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(oe)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(Ce,{modelValue:O.value,"onUpdate:modelValue":e[32]||(e[32]=t=>O.value=t),"max-width":"500px"},{default:n(()=>[l(Ke,null,{default:n(()=>[l(ze,{class:"text-h5 text-center py-6"},{default:n(()=>[D(k(a.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(He,null,{default:n(()=>[l(oe),l(U,{color:"error",variant:"flat",dark:"",onClick:e[31]||(e[31]=t=>O.value=!1)},{default:n(()=>[D(k(a.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",dark:"",onClick:F},{default:n(()=>[D(k(a.$t("OK")),1)]),_:1}),l(oe)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.hall.name":n(({index:t,item:i})=>[i.hall?(B(),Ae("span",Hl,k(i.hall.name),1)):pe("",!0),i.hall?pe("",!0):(B(),fe(hl,{key:1,modelValue:P.value[t],"onUpdate:modelValue":r=>P.value[t]=r,"show-demand-info":"",type:"demand"},null,8,["modelValue","onUpdate:modelValue"]))]),"item.customer.firstname":n(({item:t})=>[K("span",{class:"cursor-pointer",onClick:i=>a.$router.push("/demands/"+t.id)},k(t.customer?t.customer.firstname:""),9,ql)]),"item.customer.lastname":n(({item:t})=>[K("span",{class:"cursor-pointer",onClick:i=>a.$router.push("/demands/"+t.id)},k(t.customer?t.customer.lastname:""),9,Gl)]),"item.customer.email":n(({item:t})=>[l(ne,{text:t.customer.email},{activator:n(({props:i})=>[K("span",Te(Fe(i)),k(!t.customer||t.customer.email==null||t.customer.email.length<7?t.customer.email:`${t.customer.email.replace(`
`," ").slice(0,6)}...`),17)]),_:2},1032,["text"])]),"item.demand_date":n(({item:t})=>[D(k(W(ve)(t.demand_date)),1)]),"item.event_date":n(({item:t})=>[D(k(W(ve)(t.event_date)),1)]),"item.event_location":n(({item:t})=>[l(ne,{text:t.event_location},{activator:n(({props:i})=>[K("span",Te(Fe(i)),k(!t.event_location||t.event_location.length<10?t.event_location:`${t.event_location.slice(0,9)}...`),17)]),_:2},1032,["text"])]),"item.event_type":n(({item:t})=>[l(ne,{text:t.event_type},{activator:n(({props:i})=>[K("span",Te(Fe(i)),k(!t.event_type||t.event_type.length<10?t.event_type:`${t.event_type.slice(0,9)}...`),17)]),_:2},1032,["text"])]),"item.status":n(({item:t})=>[l(Ge,{color:W(f).statusColor(t.status),size:"small",label:""},{default:n(()=>[D(k(W(f).statusText(t.status)),1)]),_:2},1032,["color"])]),"item.actions":n(({index:t,item:i})=>[K("div",Jl,[i.prestation?pe("",!0):(B(),fe(yl,{key:0,modelValue:P.value[t],"onUpdate:modelValue":r=>P.value[t]=r,icon:!0},null,8,["modelValue","onUpdate:modelValue"])),l(ne,{text:a.$t("Voir")},{activator:n(({props:r})=>[l(U,E({icon:"",flat:"",to:"/demands/"+i.id},r),{default:n(()=>[l(s,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["to"])]),_:2},1032,["text"]),l(ne,{text:a.$t("Modifier")},{activator:n(({props:r})=>[l(U,E({icon:"",flat:"",onClick:h=>ye(i)},r),{default:n(()=>[l(g,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),i.prestation==null?(B(),fe(ne,{key:1,text:a.$t("Supprimer")},{activator:n(({props:r})=>[l(U,E({icon:"",flat:"",onClick:h=>we(i)},r),{default:n(()=>[l(y,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):pe("",!0)])]),"no-data":n(()=>[K("span",null,k(a.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{wa as default};
