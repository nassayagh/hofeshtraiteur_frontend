import{m as we,b as xe,u as Pe,c as Ie,d as Ae,a as Fe}from"./filter-B1mgSWMr.js";import{m as Re,V as X}from"./VTextField-BDzizfVx.js";import{p as le,aQ as ae,bm as De,j as ne,aR as Te,r as O,s as _,u as q,e as m,bn as Me,g as H,Y,bo as _e,m as ue,b as o,X as z,n as A,ac as J,bp as Oe,aL as Le,d as Ne,bq as Ue,bk as oe,aN as Be,br as Z,bs as Ee,R as Ke,bt as He,bu as ee}from"./index-ARGdpwFH.js";import{d as qe}from"./VField-DiZxc89O.js";import{g as ze,f as We,e as $e,c as te}from"./VMenu-DrVbljkJ.js";import{V as je}from"./VAvatar-Bd9Axln-.js";import{V as Ge}from"./VChip-DwAtWKpN.js";function Qe(e,p,l){if(p==null)return e;if(Array.isArray(p))throw new Error("Multiple matches is not implemented");return typeof p=="number"&&~p?o(z,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,p)]),o("span",{class:"v-autocomplete__mask"},[e.substr(p,l)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(p+l)])]):e}const Xe=le({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...we({filterKeys:["title"]}),...xe(),...ae(Re({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...De({transition:!1})},"VAutocomplete"),ut=ne()({name:"VAutocomplete",props:Xe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,p){let{slots:l}=p;const{t:k}=Te(),g=O(),h=_(!1),V=_(!0),C=_(!1),L=O(),N=O(),D=q(e,"menu"),s=m({get:()=>D.value,set:t=>{var a;D.value&&!t&&((a=L.value)!=null&&a.Î¨openChildren)||(D.value=t)}}),i=_(-1),F=m(()=>{var t;return(t=g.value)==null?void 0:t.color}),T=m(()=>s.value?e.closeText:e.openText),{items:w,transformIn:U,transformOut:ie}=ze(e),{textColorClasses:se,textColorStyles:re}=Me(F),v=q(e,"search",""),u=q(e,"modelValue",[],t=>U(t===null?[null]:Be(t)),t=>{const a=ie(t);return e.multiple?a:a[0]??null}),ce=m(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),R=qe(),{filteredItems:W,getMatches:ve}=Pe(e,w,()=>V.value?"":v.value),y=m(()=>e.hideSelected?W.value.filter(t=>!u.value.some(a=>a.value===t.value)):W.value),de=m(()=>u.value.map(t=>t.props.value)),B=m(()=>{var a;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&v.value===((a=y.value[0])==null?void 0:a.title))&&y.value.length>0&&!V.value&&!C.value}),$=m(()=>e.hideNoData&&!y.value.length||e.readonly||(R==null?void 0:R.isReadonly.value)),j=O(),{onListScroll:fe,onListKeydown:me}=Ie(j,g);function ge(t){e.openOnClear&&(s.value=!0),v.value=""}function pe(){$.value||(s.value=!0)}function he(t){$.value||(h.value&&(t.preventDefault(),t.stopPropagation()),s.value=!s.value)}function Ve(t){var b,n,d;if(e.readonly||R!=null&&R.isReadonly.value)return;const a=g.value.selectionStart,c=u.value.length;if((i.value>-1||["Enter","ArrowDown","ArrowUp"].includes(t.key))&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(s.value=!0),["Escape"].includes(t.key)&&(s.value=!1),B.value&&["Enter","Tab"].includes(t.key)&&x(y.value[0]),t.key==="ArrowDown"&&B.value&&((b=j.value)==null||b.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(t.key)){if(i.value<0){t.key==="Backspace"&&!v.value&&(i.value=c-1);return}const r=i.value,S=u.value[i.value];S&&!S.props.disabled&&x(S),i.value=r>=c-1?c-2:r}if(t.key==="ArrowLeft"){if(i.value<0&&a>0)return;const r=i.value>-1?i.value-1:c-1;u.value[r]?i.value=r:(i.value=-1,g.value.setSelectionRange((n=v.value)==null?void 0:n.length,(d=v.value)==null?void 0:d.length))}if(t.key==="ArrowRight"){if(i.value<0)return;const r=i.value+1;u.value[r]?i.value=r:(i.value=-1,g.value.setSelectionRange(0,0))}}}function ye(t){if(Z(g.value,":autofill")||Z(g.value,":-webkit-autofill")){const a=w.value.find(c=>c.title===t.target.value);a&&x(a)}}function be(){var t;h.value&&(V.value=!0,(t=g.value)==null||t.focus())}function Se(t){h.value=!0,setTimeout(()=>{C.value=!0})}function ke(t){C.value=!1}function Ce(t){(t==null||t===""&&!e.multiple)&&(u.value=[])}const M=_(!1);function x(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const c=u.value.findIndex(b=>e.valueComparator(b.value,t.value));if(c===-1)u.value=[...u.value,t];else{const b=[...u.value];b.splice(c,1),u.value=b}e.clearOnSelect&&(v.value="")}else u.value=a?[t]:[],M.value=!0,v.value=a?t.title:"",s.value=!1,V.value=!0,Y(()=>M.value=!1)}return H(h,(t,a)=>{var c;t!==a&&(t?(M.value=!0,v.value=e.multiple?"":String(((c=u.value.at(-1))==null?void 0:c.props.title)??""),V.value=!0,Y(()=>M.value=!1)):(!e.multiple&&v.value==null?u.value=[]:B.value&&!C.value&&!u.value.some(b=>{let{value:n}=b;return n===y.value[0].value})&&x(y.value[0]),s.value=!1,v.value="",i.value=-1))}),H(v,t=>{!h.value||M.value||(t&&(s.value=!0),V.value=!t)}),H(s,()=>{if(!e.hideSelected&&s.value&&u.value.length){const t=y.value.findIndex(a=>u.value.some(c=>a.value===c.value));_e&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=N.value)==null||a.scrollToIndex(t))})}}),H(y,(t,a)=>{h.value&&(!t.length&&e.hideNoData&&(s.value=!1),!a.length&&t.length&&(s.value=!0))}),ue(()=>{const t=!!(e.chips||l.chip),a=!!(!e.hideNoData||y.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),c=u.value.length>0,b=X.filterProps(e);return o(X,A({ref:g},b,{modelValue:v.value,"onUpdate:modelValue":[n=>v.value=n,Ce],focused:h.value,"onUpdate:focused":n=>h.value=n,validationValue:u.externalValue,counterValue:ce.value,dirty:c,onChange:ye,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":s.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!l.selection,"v-autocomplete--selecting-index":i.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:c?void 0:e.placeholder,"onClick:clear":ge,"onMousedown:control":pe,onKeydown:Ve}),{...l,default:()=>o(z,null,[o(We,A({ref:L,modelValue:s.value,"onUpdate:modelValue":n=>s.value=n,activator:"parent",contentClass:"v-autocomplete__content",disabled:$.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:be},e.menuProps),{default:()=>[a&&o($e,A({ref:j,selected:de.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:me,onFocusin:Se,onFocusout:ke,onScrollPassive:fe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var n,d,r;return[(n=l["prepend-item"])==null?void 0:n.call(l),!y.value.length&&!e.hideNoData&&(((d=l["no-data"])==null?void 0:d.call(l))??o(te,{title:k(e.noDataText)},null)),o(Ae,{ref:N,renderless:!0,items:y.value},{default:S=>{var Q;let{item:f,index:P,itemRef:I}=S;const G=A(f.props,{ref:I,key:P,active:B.value&&P===0?!0:void 0,onClick:()=>x(f)});return((Q=l.item)==null?void 0:Q.call(l,{item:f,index:P,props:G}))??o(te,G,{prepend:E=>{let{isSelected:K}=E;return o(z,null,[e.multiple&&!e.hideSelected?o(Fe,{key:f.value,modelValue:K,ripple:!1,tabindex:"-1"},null):void 0,f.props.prependAvatar&&o(je,{image:f.props.prependAvatar},null),f.props.prependIcon&&o(J,{icon:f.props.prependIcon},null)])},title:()=>{var E,K;return V.value?f.title:Qe(f.title,(E=ve(f))==null?void 0:E.title,((K=v.value)==null?void 0:K.length)??0)}})}}),(r=l["append-item"])==null?void 0:r.call(l)]}})]}),u.value.map((n,d)=>{function r(I){I.stopPropagation(),I.preventDefault(),x(n,!1)}const S={"onClick:close":r,onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},f=t?!!l.chip:!!l.selection,P=f?Oe(t?l.chip({item:n,index:d,props:S}):l.selection({item:n,index:d})):void 0;if(!(f&&!P))return o("div",{key:n.value,class:["v-autocomplete__selection",d===i.value&&["v-autocomplete__selection--selected",se.value]],style:d===i.value?re.value:{}},[t?l.chip?o(Le,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[P]}):o(Ge,A({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},S),null):P??o("span",{class:"v-autocomplete__selection-text"},[n.title,e.multiple&&d<u.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[Ne(",")])])])})]),"append-inner":function(){var S;for(var n=arguments.length,d=new Array(n),r=0;r<n;r++)d[r]=arguments[r];return o(z,null,[(S=l["append-inner"])==null?void 0:S.call(l,...d),e.menuIcon?o(J,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:he,onClick:Ue,"aria-label":k(T.value),title:k(T.value)},null):void 0])}})}),oe({isFocused:h,isPristine:V,menu:s,search:v,filteredItems:W,select:x},g)}}),Ye=le({id:String,text:String,...ae(Ee({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),ot=ne()({name:"VTooltip",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:l}=p;const k=q(e,"modelValue"),{scopeId:g}=Ke(),h=He(),V=m(()=>e.id||`v-tooltip-${h}`),C=O(),L=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),N=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),D=m(()=>e.transition?e.transition:k.value?"scale-transition":"fade-transition"),s=m(()=>A({"aria-describedby":V.value},e.activatorProps));return ue(()=>{const i=ee.filterProps(e);return o(ee,A({ref:C,class:["v-tooltip",e.class],style:e.style,id:V.value},i,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,transition:D.value,absolute:!0,location:L.value,origin:N.value,persistent:!0,role:"tooltip",activatorProps:s.value,_disableGlobalStack:!0},g),{activator:l.activator,default:function(){var U;for(var F=arguments.length,T=new Array(F),w=0;w<F;w++)T[w]=arguments[w];return((U=l.default)==null?void 0:U.call(l,...T))??e.text}})}),oe({},C)}});export{ut as V,ot as a};
