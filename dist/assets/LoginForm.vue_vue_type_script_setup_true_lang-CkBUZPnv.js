import{O as k,r as l,E as L,o as g,F as S,w as r,b as s,d,t as m,a as h,V as E,c as F,L as B,Q as C,P as N,af as q,ae as p}from"./index-DaZgHbfZ.js";import{F as R}from"./vee-validate.esm-Mq_XRvKv.js";import"./customizer-TTo2uG0N.js";import{V as b}from"./VLabel-CAgIwRxt.js";import{V as _}from"./VTextField-C8qNbBmY.js";import{V as T}from"./VAlert-Cepu2pNR.js";const U={class:"d-flex flex-wrap align-center my-3 ml-n2"},$={class:"ml-sm-auto"},z={key:0,class:"mt-2"},Q=k({__name:"LoginForm",setup(A){const v=l();l(!1);const f=l(!1);l(!1);const V=l(!1),u=l(null),i=l(null),x=l([e=>!!e||p("Le mot de passe est requis"),e=>e&&e.length>=8||p("Le mot de passe doit comporter moins de 8 caractères")]),w=l([e=>!!e||p("L’e-mail est requis"),e=>/.+@.+\..+/.test(e)||"E-mail must be valid"]);function y(e,{setErrors:t}){var o;const n=N();(o=v.value)==null||o.validate().then(({valid:c})=>c&&i.value!=null&&u.value!=null&&i.value.toString().length>3&&u.value.toString().length>3?n.login(i.value,u.value).then(a=>{if(V.value=!1,a.data.error){t({apiError:a.data.message});return}n.user=a.data,localStorage.setItem("user",JSON.stringify(a.data)),q.push(n.returnUrl||"/").then(()=>{window.location.reload()})}).catch(a=>t({apiError:a})).then(()=>{V.value=!1}):t({apiError:p("Veuillez soumettre des valeurs valides")}))}return(e,t)=>{const n=L("RouterLink");return g(),S(C(R),{onSubmit:y,ref_key:"refForm",ref:v,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=o=>f.value=o),class:"mt-5"},{default:r(({errors:o,isSubmitting:c})=>[s(b,{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},{default:r(()=>[d(m(e.$t("E-mail")),1)]),_:1}),s(_,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),rules:w.value,class:"mb-8",required:"","hide-details":"auto"},null,8,["modelValue","rules"]),s(b,{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},{default:r(()=>[d(m(e.$t("Mot de passe")),1)]),_:1}),s(_,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),rules:x.value,required:"","hide-details":"auto",type:"password",class:"pwdInput"},null,8,["modelValue","rules"]),h("div",U,[h("div",$,[s(n,{to:"",class:"text-primary text-decoration-none text-body-1 opacity-1 font-weight-medium"},{default:r(()=>[d(m(e.$t("Mot de passe oublié ?")),1)]),_:1})])]),s(E,{size:"large",loading:c,color:"primary",disabled:f.value,block:"",type:"submit",flat:""},{default:r(()=>[d(m(e.$t("Connexion")),1)]),_:2},1032,["loading","disabled"]),o.apiError?(g(),F("div",z,[s(T,{color:"error"},{default:r(()=>[d(m(o.apiError),1)]),_:2},1024)])):B("",!0)]),_:1},8,["modelValue"])}}});export{Q as _};
