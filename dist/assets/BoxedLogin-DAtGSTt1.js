import{_ as S}from"./Logo-ZwXGM81k.js";import{a6 as b,r as o,Z as $,o as v,_ as B,w as a,b as t,d,t as n,a as V,V as E,c as y,a4 as F,a8 as N,a7 as R,bZ as q,aK as f}from"./index-BWIBJZct.js";import{F as T}from"./vee-validate.esm-Bn2dd5al.js";import"./customizer-NBwXjU_w.js";import{h,V as x}from"./VTextField-Bm736GB1.js";import{V as I}from"./VAlert-CqJGG9lT.js";import{a as U,V as j}from"./VRow-CHh4798a.js";import{V as z,d as A}from"./VCard-C_MBnFgh.js";import{V as M}from"./VContainer-C0jtEUUT.js";import"./VLocaleProvider-DC2wnU_h.js";import"./index-CdY55EkP.js";import"./VAvatar-BMjKmOGY.js";const Z={class:"d-flex flex-wrap align-center my-3 ml-n2"},D={class:"ml-sm-auto"},J={key:0,class:"mt-2"},K=b({__name:"LoginForm",setup(w){const p=o();o(!1);const m=o(!1);o(!1);const g=o(!1),i=o(null),u=o(null),C=o([e=>!!e||f("Le mot de passe est requis"),e=>e&&e.length>=8||f("Le mot de passe doit comporter moins de 8 caractères")]),k=o([e=>!!e||f("L’e-mail est requis"),e=>/.+@.+\..+/.test(e)||"E-mail must be valid"]);function L(e,{setErrors:l}){var r;const c=R();(r=p.value)==null||r.validate().then(({valid:_})=>_&&u.value!=null&&i.value!=null&&u.value.toString().length>3&&i.value.toString().length>3?c.login(u.value,i.value).then(s=>{if(g.value=!1,s.data.error){l({apiError:s.data.message});return}c.user=s.data,localStorage.setItem("user",JSON.stringify(s.data)),q.push("/")}).catch(s=>l({apiError:s})).then(()=>{g.value=!1}):l({apiError:f("Veuillez soumettre des valeurs valides")}))}return(e,l)=>{const c=$("RouterLink");return v(),B(N(T),{onSubmit:L,ref_key:"refForm",ref:p,modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=r=>m.value=r),class:"mt-5"},{default:a(({errors:r,isSubmitting:_})=>[t(h,{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},{default:a(()=>[d(n(e.$t("E-mail")),1)]),_:1}),t(x,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=s=>u.value=s),rules:k.value,class:"mb-8",required:"","hide-details":"auto"},null,8,["modelValue","rules"]),t(h,{class:"text-subtitle-1 font-weight-medium pb-2 text-lightText"},{default:a(()=>[d(n(e.$t("Mot de passe")),1)]),_:1}),t(x,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=s=>i.value=s),rules:C.value,required:"","hide-details":"auto",type:"password",class:"pwdInput"},null,8,["modelValue","rules"]),V("div",Z,[V("div",D,[t(c,{to:"",class:"text-primary text-decoration-none text-body-1 opacity-1 font-weight-medium"},{default:a(()=>[d(n(e.$t("Mot de passe oublié ?")),1)]),_:1})])]),t(E,{size:"large",loading:_,color:"primary",disabled:m.value,block:"",type:"submit",flat:""},{default:a(()=>[d(n(e.$t("Connexion")),1)]),_:2},1032,["loading","disabled"]),r.apiError?(v(),y("div",J,[t(I,{color:"error"},{default:a(()=>[d(n(r.apiError),1)]),_:2},1024)])):F("",!0)]),_:1},8,["modelValue"])}}}),O={class:"authentication"},G={class:"d-flex justify-center mb-5"},re=b({__name:"BoxedLogin",setup(w){return(p,m)=>(v(),y("div",O,[t(M,{fluid:"",class:"pa-3"},{default:a(()=>[t(U,{class:"h-100vh d-flex justify-center align-center"},{default:a(()=>[t(j,{cols:"12",class:"d-flex align-center"},{default:a(()=>[t(z,{rounded:"md",elevation:"10",class:"px-sm-1 px-0 mx-auto","max-width":"450"},{default:a(()=>[t(A,{class:"pa-sm-8"},{default:a(()=>[V("div",G,[t(S)]),t(K)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{re as default};
