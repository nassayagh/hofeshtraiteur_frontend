import{a6 as x,r as d,o as i,_ as S,w as l,b as a,a as t,t as e,a8 as p,V as M,d as V,c as u,a4 as N,a5 as v,ae as P,af as L,X as g,h as J}from"./index-DPZztH9X.js";import{V as w,_ as Y}from"./BaseBreadcrumb-CB9g-Nme.js";import"./demands-DdGqUHAk.js";import{u as k}from"./Controller-yAgY4EPl.js";import{f as m,a as F,b as B}from"./formatters-ChhyeSK0.js";import{a as T}from"./VSpacer-DRAL-vqi.js";import{V as R}from"./VTooltip-4AWh0zmE.js";import{V as E,a as C}from"./VCard-B5CcMp7v.js";import{u as G}from"./customers-BQ_YUkzM.js";import{V as H}from"./VAutocomplete-BhvX4l2o.js";import{u as z}from"./hall-DCuJ_ADT.js";import{u as U}from"./payments-CNWrJHI-.js";import{u as X}from"./paymentMethod-BussdfIa.js";import{u as q}from"./eventType-CiW_NwR-.js";import{V as b,a as K}from"./VRow-Bm15jFuu.js";import"./VAvatar-Cqzzm8fb.js";import"./VSelect-CGAhY-3L.js";import"./VTextField-DEgGgLCB.js";import"./VMenu-C9pIWCM1.js";import"./filter-D5xaSG18.js";const Q={class:"d-sm-flex align-center"},W={class:"text-h4"},Z={class:"ml-auto"},tt={class:"text-subtitle-1 font-weight-medium"},et={key:0,class:"text-subtitle-1 font-weight-medium"},st={class:"text-subtitle-1 font-weight-medium"},ot={key:1,class:"text-subtitle-1 font-weight-medium"},at={class:"text-subtitle-1 font-weight-medium"},lt=["onClick"],nt={class:"text-no-wrap"},it={key:0,class:"text-no-wrap"},rt={key:1,class:"text-no-wrap text-truncate"},dt={class:"text-no-wrap text-truncate"},I=x({__name:"PrestastionTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=k(),n=c;return h.fetchItems(n.options).then(o=>{r.value=o.data.data}),(o,y)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",Q,[t("div",null,[t("h2",W,e(c.title)+" "+e(p(m)(r.value.reduce((s,_)=>parseFloat(s)+_.service_total,0))),1)]),a(T),t("div",Z,[a(M,{variant:"tonal",color:"primary",density:"compact",to:`/prestations?status=${c.options.status}`},{default:l(()=>[V(e(o.$t("Voir plus")),1)]),_:1},8,["to"])])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",tt,e(o.$t("Nom")),1),n.options.statistics!="closed"?(i(),u("th",et,e(o.$t("Date")),1)):N("",!0),t("th",st,e(o.$t("Montant")),1),n.options.statistics!="closed"?(i(),u("th",ot,e(o.$t("Lieu")),1)):N("",!0),t("th",at,e(o.$t("Type")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,s=>(i(),u("tr",{key:s.id,class:"month-item cursor-pointer",onClick:_=>o.$router.push("/prestations/"+s.id)},[t("td",nt,e(s.customer?`${s.customer.firstname} ${s.customer.lastname}`:"-"),1),n.options.statistics!="closed"?(i(),u("td",it,e(p(F)(s.event_date)),1)):N("",!0),t("td",null,e(p(m)(s.service_total)),1),n.options.statistics!="closed"?(i(),u("td",rt,[a(R,{text:s.event_location},{activator:l(({props:_})=>[t("span",P(L(_)),e(s.event_location==null||s.event_location.length<10?s.event_location:`${s.event_location.replace(`
`," ").slice(0,9)}...`),17)]),_:2},1032,["text"])])):N("",!0),t("td",dt,[a(R,{text:s.event_type},{activator:l(({props:_})=>[t("span",P(L(_)),e(s.event_type==null||s.event_type.length<10?s.event_type:`${s.event_type.replace(`
`," ").slice(0,9)}...`),17)]),_:2},1032,["text"])])],8,lt))),128))])]),_:1})]),_:1})]),_:1}))}}),ct={class:"d-sm-flex align-center"},ut={class:"text-h4"},_t={class:"ml-auto"},pt={class:"text-subtitle-1 font-weight-medium"},ht={class:"text-subtitle-1 font-weight-medium"},mt={class:"text-subtitle-1 font-weight-medium"},ft={class:"text-subtitle-1 font-weight-medium"},$t=["onClick"],yt={class:"text-no-wrap"},bt=x({__name:"CustomerTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=G(),n=c;return h.fetchItems(n.options).then(o=>{r.value=o.data.data}),(o,y)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",ct,[t("div",null,[t("h2",ut,e(c.title),1)]),a(T),t("div",_t,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/customers"},{default:l(()=>[V(e(o.$t("Voir plus")),1)]),_:1})])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",pt,e(o.$t("Nom")),1),t("th",ht,e(o.$t("Mail")),1),t("th",mt,e(o.$t("Tel")),1),t("th",ft,e(o.$t("Prest")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,s=>(i(),u("tr",{onClick:_=>o.$router.push("/customers/"+s.id),key:s.id,class:"month-item cursor-pointer"},[t("td",null,e(`${s.firstname} ${s.lastname}`),1),t("td",null,e(`${s.email}`),1),t("td",null,e(`${s.phone}`),1),t("td",yt,e(s.prestations_count),1)],8,$t))),128))])]),_:1})]),_:1})]),_:1}))}}),gt={class:"d-sm-flex align-center"},vt={class:"text-h4"},xt={class:"ml-auto"},St={class:"text-subtitle-1 font-weight-medium"},wt={class:"text-subtitle-1 font-weight-medium"},Et={class:"text-subtitle-1 font-weight-medium"},Ct={class:"text-subtitle-1 font-weight-medium"},At={class:"text-subtitle-1 font-weight-medium"},Tt={class:"text-subtitle-1 font-weight-medium"},Mt={class:"text-subtitle-1 font-weight-medium"},Vt={class:"text-no-wrap"},Dt={class:"text-no-wrap"},O=x({__name:"IncomePerMonthTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){const r=new Date().getFullYear(),h=d(r);d(["March","April","May","June"]);const n=d([]),o=k(),y=c,s=Array.from({length:20},(f,D)=>y.options.section=="future"?r+D:r-D);function _(){o.fetchYearStatistics({...y.options,year:h.value}).then(f=>{n.value=f.data})}J(()=>{_()});function A(f){_()}return(f,D)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",gt,[t("div",null,[t("h2",vt,e(c.title)+" "+e(p(m)(n.value.reduce(($,j)=>parseFloat($)+j.amount_paid,0))),1)]),a(T),t("div",xt,[a(H,{modelValue:h.value,"onUpdate:modelValue":[D[0]||(D[0]=$=>h.value=$),A],items:p(s),variant:"outlined",dense:"",density:"compact","hide-details":""},null,8,["modelValue","items"])])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",St,e(f.$t("Mois")),1),t("th",wt,e(f.$t("Reste")),1),t("th",Et,e(f.$t("Déjà")),1),t("th",Ct,e(f.$t("CA")),1),t("th",At,e(f.$t("Cls")),1),t("th",Tt,e(f.$t("Fait")),1),t("th",Mt,e(f.$t("Anlé")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(n.value,$=>(i(),u("tr",{key:$.id,class:"month-item"},[t("td",Vt,e(p(B)($.label)),1),t("td",Dt,e(p(m)($.amount_left)),1),t("td",null,e(p(m)($.amount_paid)),1),t("td",null,e(p(m)($.total_amount)),1),t("td",null,e($.customers_count||0),1),t("td",null,e($.prestations_closed||0),1),t("td",null,e($.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),Nt={class:"d-sm-flex align-center"},It={class:"text-h4"},kt={class:"text-subtitle-1 font-weight-medium"},Pt={class:"text-subtitle-1 font-weight-medium"},Lt={class:"text-subtitle-1 font-weight-medium"},Rt={class:"text-subtitle-1 font-weight-medium"},Ot={class:"text-subtitle-1 font-weight-medium"},Ft={class:"text-subtitle-1 font-weight-medium"},jt={class:"text-subtitle-1 font-weight-medium"},Jt={class:"text-no-wrap"},Yt={class:"text-no-wrap"},Bt=x({__name:"IncomePerYearTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=k(),n=c;return h.fetchYearStatistics(n.options).then(o=>{r.value=o.data}),(o,y)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",Nt,[t("div",null,[t("h2",It,e(c.title)+" "+e(p(m)(r.value.reduce((s,_)=>parseFloat(s)+_.amount_paid,0))),1)])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",kt,e(o.$t("Année")),1),t("th",Pt,e(o.$t("Reste")),1),t("th",Lt,e(o.$t("Déjà")),1),t("th",Rt,e(o.$t("CA")),1),t("th",Ot,e(o.$t("Cls")),1),t("th",Ft,e(o.$t("Fait")),1),t("th",jt,e(o.$t("Anlé")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,s=>(i(),u("tr",{key:s.id,class:"month-item"},[t("td",Jt,e(s.year),1),t("td",Yt,e(p(m)(s.amount_left)),1),t("td",null,e(p(m)(s.amount_paid)),1),t("td",null,e(p(m)(s.total_amount)),1),t("td",null,e(s.customers_count||0),1),t("td",null,e(s.prestations_closed||0),1),t("td",null,e(s.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),Gt={class:"d-sm-flex align-center"},Ht={class:"text-h4"},zt={class:"ml-auto"},Ut={class:"text-subtitle-1 font-weight-medium"},Xt={class:"text-subtitle-1 font-weight-medium"},qt={class:"text-subtitle-1 font-weight-medium"},Kt={class:"text-no-wrap"},Qt={class:"text-no-wrap"},Wt={class:"text-no-wrap"},Zt=x({__name:"HallTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=z(),n=c;return h.fetchItems(n.options).then(o=>{r.value=o.data.data}),(o,y)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",Gt,[t("div",null,[t("h2",Ht,e(c.title),1)]),a(T),t("div",zt,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/halls"},{default:l(()=>[V(e(o.$t("Voir plus")),1)]),_:1})])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Ut,e(o.$t("Nom")),1),t("th",Xt,e(o.$t("Faite")),1),t("th",qt,e(o.$t("Venir")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,s=>(i(),u("tr",{key:s.id,class:"month-item"},[t("td",Kt,e(`${s.name}`),1),t("td",Qt,e(s.prestations_past),1),t("td",Wt,e(s.prestations_coming),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),te={class:"d-sm-flex align-center"},ee={class:"text-h4"},se={class:"ml-auto"},oe={class:"text-subtitle-1 font-weight-medium"},ae={class:"text-subtitle-1 font-weight-medium"},le={class:"text-subtitle-1 font-weight-medium"},ne={class:"text-subtitle-1 font-weight-medium"},ie=["onClick"],re={class:"text-no-wrap"},de={class:"text-no-wrap"},ce={class:"text-no-wrap"},ue={class:"text-no-wrap"},_e=x({__name:"PaymentTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=U(),n=c;return h.fetchItems(n.options).then(o=>{r.value=o.data.data}),(o,y)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",te,[t("div",null,[t("h2",ee,e(c.title)+" "+e(p(m)(r.value.reduce((s,_)=>parseFloat(s)+parseFloat(_.amount),0))),1)]),a(T),t("div",se,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:l(()=>[V(e(o.$t("Voir plus")),1)]),_:1})])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",oe,e(o.$t("Montant")),1),t("th",ae,e(o.$t("Client")),1),t("th",le,e(o.$t("Prest")),1),t("th",ne,e(o.$t("Date")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,s=>(i(),u("tr",{key:s.id,class:"month-item cursor-pointer",onClick:_=>o.$router.push("/prestations/"+s.prestation_id)},[t("td",re,e(p(m)(s.amount)),1),t("td",de,e(`${s.prestation&&s.prestation.customer?`${s.prestation.customer.firstname} ${s.prestation.customer.lastname}`:""}`),1),t("td",ce,e(`${s.prestation?`${s.prestation.event_type||"-"}`:""}`),1),t("td",ue,e(p(F)(s.created_at)),1)],8,ie))),128))])]),_:1})]),_:1})]),_:1}))}}),pe={class:"d-sm-flex align-center"},he={class:"text-h4"},me={class:"ml-auto"},fe={class:"text-subtitle-1 font-weight-medium"},$e={class:"text-subtitle-1 font-weight-medium"},ye={class:"text-subtitle-1 font-weight-medium"},be={class:"text-no-wrap"},ge={class:"text-no-wrap"},ve={class:"text-no-wrap"},xe=x({__name:"PaymentTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=X(),n=c;return h.fetchItems(n.options).then(o=>{r.value=o.data.data}),(o,y)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",pe,[t("div",null,[t("h2",he,e(c.title)+" "+e(p(m)(r.value.reduce((s,_)=>parseFloat(s)+_.payments_sum_amount,0))),1)]),a(T),t("div",me,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/payment_methods"},{default:l(()=>[V(e(o.$t("Voir plus")),1)]),_:1})])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",fe,e(o.$t("Nom")),1),t("th",$e,e(o.$t("Montant")),1),t("th",ye,e(o.$t("NB Réglements")),1)])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,s=>(i(),u("tr",{key:s.id,class:"month-item"},[t("td",be,e(s.name),1),t("td",ge,e(p(m)(s.payments_sum_amount)),1),t("td",ve,e(s.payments_count),1)]))),128))])]),_:1})]),_:1})]),_:1}))}}),Se={class:"d-sm-flex align-center"},we={class:"text-h4"},Ee={class:"ml-auto"},Ce={class:"text-subtitle-1 font-weight-medium"},Ae={class:"text-subtitle-1 font-weight-medium"},Te={class:"text-no-wrap"},Me={class:"text-no-wrap"},Ve=x({__name:"PrestationTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(c){d("March"),d(["March","April","May","June"]);const r=d([]),h=q(),n=c,o=new Date().getFullYear(),y=Array.from({length:4},(s,_)=>o-_);return h.fetchItems(n.options).then(s=>{r.value=s.data.data}),(s,_)=>(i(),S(C,{elevation:"10"},{default:l(()=>[a(E,null,{default:l(()=>[t("div",Se,[t("div",null,[t("h2",we,e(c.title),1)]),a(T),t("div",Ee,[a(M,{variant:"tonal",color:"primary",density:"compact",to:"/event_types"},{default:l(()=>[V(e(s.$t("Voir plus")),1)]),_:1})])]),a(w,{density:"compact"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Ce,e(s.$t("Nom")),1),(i(!0),u(g,null,v(p(y),A=>(i(),u("th",Ae,e(A),1))),256))])]),t("tbody",null,[(i(!0),u(g,null,v(r.value,A=>(i(),u("tr",{key:A.id,class:"month-item"},[t("td",Te,e(A.name),1),(i(!0),u(g,null,v(p(y),f=>(i(),u("td",Me,e(A[`prestation_${f}`]||0),1))),256))]))),128))])]),_:1})]),_:1})]),_:1}))}}),Qe=x({__name:"Dashboard",setup(c){const r=d({title:"Dashboard"}),h=d([]);return(n,o)=>(i(),u(g,null,[a(Y,{title:r.value.title,breadcrumbs:h.value},null,8,["title","breadcrumbs"]),a(K,{class:"dashboard"},{default:l(()=>[a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(I,{class:"h-100",title:n.$t("LISTE PRESTATION A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"future",status:1}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(I,{class:"h-100",title:n.$t("LISTE PRESTATION DEJA PASSE"),options:{per_page:10,order_by:"event_date",direction:"DESC",statistics:"past",status:3}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(bt,{class:"h-100",title:n.$t("LISTE DES CLIENTS RECENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"past"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(O,{class:"h-100",title:n.$t("CA/MOIS - DÉJÀ PASSÉ"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"past"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(O,{class:"h-100",title:n.$t("CA/MOIS - A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"future"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(Bt,{class:"h-100",title:n.$t("CA A L’ANNEE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"year_income"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(Zt,{class:"h-100",title:n.$t("LISTE SALLES"),options:{per_page:10,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(_e,{class:"h-100",title:n.$t("LISTE REGLEMENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"dashboard"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(I,{class:"h-100",title:n.$t("LISTE REGLEMENTS EN ATTENTE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"closed"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:l(()=>[a(xe,{class:"h-100",title:n.$t("TYPE REGLEMENTS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),a(b,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:l(()=>[a(Ve,{class:"h-100",title:n.$t("TYPE PRESTATIONS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1})]),_:1})],64))}});export{Qe as default};
