import{p as q,ay as K,I as Q,z as W,j as Z,M as tt,l as et,az as st,N as at,A as ot,aA as lt,e as nt,aB as it,m as rt,b as n,a6 as C,r as c,o,_ as f,w as i,a as t,t as e,a8 as y,d as N,V as P,c as m,a4 as D,a5 as S,ae as O,af as H,n as U,X as k,aC as X,h as dt}from"./index-DEW_X-GI.js";import{V as A,_ as ut}from"./BaseBreadcrumb-D8eL82m3.js";import{u as ct}from"./demands-DlNYKW7M.js";import{u as F}from"./Controller-RiBA8nbS.js";import{f as b,a as B,b as ht}from"./formatters-DCCWVJxZ.js";import{V as E,a as M}from"./VCard-Bpy3DXDF.js";import{a as V}from"./VSpacer-CxOmCU6K.js";import{V as j}from"./VTooltip-CMgTxG17.js";import{u as pt}from"./customers-ddnXx7iJ.js";import{V as _t}from"./VAutocomplete-Bc_L3G8t.js";import{u as mt}from"./hall-sqCB9MTt.js";import{u as ft}from"./payments-Csztr3qp.js";import{u as $t}from"./paymentMethod-pPYpdQuR.js";import{u as yt}from"./eventType-BMviOV5s.js";import{V as w,a as vt}from"./VRow-BlXsxQKS.js";import"./VAvatar-Cp2w_-RN.js";import"./VSelect-BRAtLnXN.js";import"./VTextField-DQMV7h_e.js";import"./VMenu-nZysUX5z.js";import"./filter-C1cRly53.js";const gt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function bt(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${l}`]},[r])}function J(l){const[r,d]=l.split("@");return Array.from({length:d}).map(()=>L(r))}function L(l){let r=[];if(!l)return r;const d=gt[l];if(l!==d){if(l.includes(","))return z(l);if(l.includes("@"))return J(l);d.includes(",")?r=z(d):d.includes("@")?r=J(d):d&&r.push(L(d))}return[bt(l,r)]}function z(l){return l.replace(/\s/g,"").split(",").map(L)}const xt=q({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...K(),...Q(),...W()},"VSkeletonLoader"),T=Z()({name:"VSkeletonLoader",props:xt(),setup(l,r){let{slots:d}=r;const{backgroundColorClasses:h,backgroundColorStyles:$}=tt(et(l,"color")),{dimensionStyles:u}=st(l),{elevationClasses:a}=at(l),{themeClasses:p}=ot(l),{t:s}=lt(),_=nt(()=>L(it(l.type).join(",")));return rt(()=>{var v;const x=!d.default||l.loading;return n("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":l.boilerplate},p.value,h.value,a.value],style:[$.value,x?u.value:{}],"aria-busy":l.boilerplate?void 0:x,"aria-live":l.boilerplate?void 0:"polite","aria-label":l.boilerplate?void 0:s(l.loadingText),role:l.boilerplate?void 0:"alert"},[x?_.value:(v=d.default)==null?void 0:v.call(d)])}),{}}}),wt={class:"d-sm-flex align-center"},kt={class:"text-h4"},St={class:"ml-auto"},Ct={class:"text-subtitle-1 font-weight-medium"},At={key:0,class:"text-subtitle-1 font-weight-medium"},Et={class:"text-subtitle-1 font-weight-medium"},Mt={class:"text-subtitle-1 font-weight-medium"},Tt={key:1,class:"text-subtitle-1 font-weight-medium"},Dt=["onClick"],Vt={class:"text-no-wrap"},Nt={key:0,class:"text-no-wrap"},Pt={class:"text-no-wrap text-truncate"},It={key:1,class:"text-no-wrap text-truncate"},R=C({__name:"PrestastionTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(0),h=c(!0),$=F(),u=l;return $.fetchStats(u.options).then(a=>{r.value=a.data.data,d.value=a.data.total||0,h.value=!1}),(a,p)=>(o(),f(M,{elevation:"10"},{default:i(()=>[h.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",wt,[t("div",null,[t("h2",kt,e(l.title)+" : "+e(d.value||0)+" - "+e(y(b)(r.value.reduce((s,_)=>u.options.statistics!="closed"?parseFloat(s)+_.service_total:parseFloat(s)+(_.service_total-_.payment_total),0))),1)]),n(V),t("div",St,[n(P,{variant:"tonal",color:"primary",density:"compact",to:`/prestations?status=${l.options.status}`},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1},8,["to"])])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Ct,e(a.$t("Nom")),1),u.options.statistics!="closed"?(o(),m("th",At,e(a.$t("Date")),1)):D("",!0),t("th",Et,e(a.$t("Montant")),1),t("th",Mt,e(a.$t("Type")),1),u.options.statistics!="closed"?(o(),m("th",Tt,e(a.$t("Lieu")),1)):D("",!0)])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,s=>(o(),m("tr",{key:s.id,class:"month-item cursor-pointer",onClick:_=>a.$router.push("/prestations/"+s.id)},[t("td",Vt,e(s.customer?`${s.customer.firstname} ${s.customer.lastname}`:"-"),1),u.options.statistics!="closed"?(o(),m("td",Nt,e(y(B)(s.event_date)),1)):D("",!0),t("td",null,e(y(b)(u.options.statistics!="closed"?s.service_total:s.service_total-s.payment_total)),1),t("td",Pt,[n(j,{text:s.event_type},{activator:i(({props:_})=>[t("span",O(H(_)),e(s.event_type==null||s.event_type.length<30?s.event_type:`${s.event_type.replace(`
`," ").slice(0,29)}...`),17)]),_:2},1032,["text"])]),u.options.statistics!="closed"?(o(),m("td",It,[n(j,{text:s.hall?s.hall.name:""},{activator:i(({props:_})=>[s.hall?(o(),m("span",O(U({key:0},_)),e(s.hall.name.length<30?s.hall.name:`${s.hall.name.replace(`
`," ").slice(0,29)}...`),17)):D("",!0)]),_:2},1032,["text"])])):D("",!0)],8,Dt))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ot={class:"d-sm-flex align-center"},jt={class:"text-h4"},Lt={class:"ml-auto"},Rt={class:"text-subtitle-1 font-weight-medium"},Ft={class:"text-subtitle-1 font-weight-medium"},Bt={class:"text-subtitle-1 font-weight-medium"},Yt={class:"text-subtitle-1 font-weight-medium"},Jt=["onClick"],zt={class:"text-no-wrap"},Gt=C({__name:"CustomerTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(!0),h=c(0),$=pt(),u=l;return $.fetchItems(u.options).then(a=>{r.value=a.data.data,h.value=a.data.total,d.value=!1}),(a,p)=>(o(),f(M,{elevation:"10"},{default:i(()=>[d.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",Ot,[t("div",null,[t("h2",jt,e(l.title)+" : "+e(h.value),1)]),n(V),t("div",Lt,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/customers"},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1})])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Rt,e(a.$t("Nom")),1),t("th",Ft,e(a.$t("Mail")),1),t("th",Bt,e(a.$t("Tel")),1),t("th",Yt,e(a.$t("Prest")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,s=>(o(),m("tr",{onClick:_=>a.$router.push("/customers/"+s.id),key:s.id,class:"month-item cursor-pointer"},[t("td",null,e(`${s.firstname} ${s.lastname}`),1),t("td",null,e(`${s.email}`),1),t("td",null,e(`${s.phone}`),1),t("td",zt,e(s.prestations_count),1)],8,Jt))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ht={class:"d-sm-flex align-center"},Ut={class:"text-h4"},Xt={class:"ml-auto"},qt={class:"text-subtitle-1 font-weight-medium"},Kt={class:"text-subtitle-1 font-weight-medium"},Qt={class:"text-subtitle-1 font-weight-medium"},Wt={class:"text-subtitle-1 font-weight-medium"},Zt={class:"text-subtitle-1 font-weight-medium"},te={class:"text-subtitle-1 font-weight-medium"},ee={class:"text-subtitle-1 font-weight-medium"},se=["onClick"],ae={class:"text-no-wrap"},G=C({__name:"IncomePerMonthTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){const r=X(),d=new Date().getFullYear(),h=c(d);c(["March","April","May","June"]);const $=c([]),u=c(!0),a=F(),p=l,s=Array.from({length:20},(v,I)=>p.options.section=="future"?d+I:d-I);function _(){a.fetchYearStatistics({...p.options,year:h.value}).then(v=>{$.value=v.data,u.value=!1})}dt(()=>{_()});function x(v){_()}return(v,I)=>(o(),f(M,{elevation:"10"},{default:i(()=>[u.value?(o(),f(T,{key:0,height:"290",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",Ht,[t("div",null,[t("h2",Ut,e(l.title)+" : "+e(y(b)($.value.reduce((g,Y)=>parseFloat(g)+Y.total_amount,0))),1)]),n(V),t("div",Xt,[n(_t,{modelValue:h.value,"onUpdate:modelValue":[I[0]||(I[0]=g=>h.value=g),x],items:y(s),variant:"outlined",dense:"",density:"compact","hide-details":""},null,8,["modelValue","items"])])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",qt,e(v.$t("Mois")),1),t("th",Kt,e(v.$t("Reste")),1),t("th",Qt,e(v.$t("Déjà")),1),t("th",Wt,e(v.$t("CA")),1),t("th",Zt,e(v.$t("Cls")),1),t("th",te,e(v.$t("Fait")),1),t("th",ee,e(v.$t("Anlé")),1)])]),t("tbody",null,[(o(!0),m(k,null,S($.value,g=>(o(),m("tr",{key:g.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:Y=>v.$router.push(`/prestations?status=-5&date=${[y(r).format(g.date1,"shortDate"),y(r).format(g.date2,"shortDate")]}`)},e(y(ht)(g.label)),9,se),t("td",ae,e(y(b)(g.amount_left)),1),t("td",null,e(y(b)(g.amount_paid)),1),t("td",null,e(y(b)(g.total_amount)),1),t("td",null,e(g.customers_count||0),1),t("td",null,e(g.prestations_closed||0),1),t("td",null,e(g.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),oe={class:"d-sm-flex align-center"},le={class:"text-h4"},ne={class:"text-subtitle-1 font-weight-medium"},ie={class:"text-subtitle-1 font-weight-medium"},re={class:"text-subtitle-1 font-weight-medium"},de={class:"text-subtitle-1 font-weight-medium"},ue={class:"text-subtitle-1 font-weight-medium"},ce={class:"text-subtitle-1 font-weight-medium"},he={class:"text-subtitle-1 font-weight-medium"},pe=["onClick"],_e={class:"text-no-wrap"},me=C({__name:"IncomePerYearTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){const r=X();c("March"),c(["March","April","May","June"]);const d=c([]),h=c(!0),$=F(),u=l;return $.fetchYearStatistics(u.options).then(a=>{d.value=a.data,h.value=!1}),(a,p)=>(o(),f(M,{elevation:"10"},{default:i(()=>[h.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",oe,[t("div",null,[t("h2",le,e(l.title),1)])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ne,e(a.$t("Année")),1),t("th",ie,e(a.$t("Reste")),1),t("th",re,e(a.$t("Déjà")),1),t("th",de,e(a.$t("CA")),1),t("th",ue,e(a.$t("Cls")),1),t("th",ce,e(a.$t("Fait")),1),t("th",he,e(a.$t("Anlé")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(d.value,s=>(o(),m("tr",{key:s.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:_=>a.$router.push(`/prestations?status=-5&date=${[y(r).format(s.date1,"shortDate"),y(r).format(s.date2,"shortDate")]}`)},e(s.year),9,pe),t("td",_e,e(y(b)(s.amount_left)),1),t("td",null,e(y(b)(s.amount_paid)),1),t("td",null,e(y(b)(s.total_amount)),1),t("td",null,e(s.customers_count||0),1),t("td",null,e(s.prestations_closed||0),1),t("td",null,e(s.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),fe={class:"d-sm-flex align-center"},$e={class:"text-h4"},ye={class:"ml-auto"},ve={class:"text-subtitle-1 font-weight-medium"},ge={class:"text-subtitle-1 font-weight-medium"},be={class:"text-subtitle-1 font-weight-medium"},xe=["onClick"],we={class:"text-no-wrap"},ke={class:"text-no-wrap"},Se=C({__name:"HallTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(!0),h=c(0),$=mt(),u=l;return $.fetchItems(u.options).then(a=>{r.value=a.data.data,h.value=a.data.total,d.value=!1}),(a,p)=>(o(),f(M,{elevation:"10"},{default:i(()=>[d.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",fe,[t("div",null,[t("h2",$e,e(l.title)+" : "+e(h.value),1)]),n(V),t("div",ye,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/halls"},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1})])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ve,e(a.$t("Nom")),1),t("th",ge,e(a.$t("Faite")),1),t("th",be,e(a.$t("Venir")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,s=>(o(),m("tr",{key:s.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:_=>a.$router.push(`/prestations?hall=${s.id}`)},e(`${s.name}`),9,xe),t("td",we,e(s.prestations_past),1),t("td",ke,e(s.prestations_coming),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ce={class:"d-sm-flex align-center"},Ae={class:"text-h4"},Ee={class:"ml-auto"},Me={class:"text-subtitle-1 font-weight-medium"},Te={class:"text-subtitle-1 font-weight-medium"},De={class:"text-subtitle-1 font-weight-medium"},Ve={class:"text-subtitle-1 font-weight-medium"},Ne=["onClick"],Pe={class:"text-no-wrap"},Ie={class:"text-no-wrap"},Oe={class:"text-no-wrap"},je={class:"text-no-wrap"},Le=C({__name:"PaymentTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(!0),h=ft(),$=l;return h.fetchItems($.options).then(u=>{r.value=u.data.data,d.value=!1}),(u,a)=>(o(),f(M,{elevation:"10"},{default:i(()=>[d.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",Ce,[t("div",null,[t("h2",Ae,e(l.title)+" : "+e(y(b)(r.value.reduce((p,s)=>parseFloat(p)+parseFloat(s.amount),0))),1)]),n(V),t("div",Ee,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:i(()=>[N(e(u.$t("Voir plus")),1)]),_:1})])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Me,e(u.$t("Montant")),1),t("th",Te,e(u.$t("Client")),1),t("th",De,e(u.$t("Prest")),1),t("th",Ve,e(u.$t("Date")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,p=>(o(),m("tr",{key:p.id,class:"month-item cursor-pointer",onClick:s=>u.$router.push("/prestations/"+p.prestation_id)},[t("td",Pe,e(y(b)(p.amount)),1),t("td",Ie,e(`${p.prestation&&p.prestation.customer?`${p.prestation.customer.firstname} ${p.prestation.customer.lastname}`:""}`),1),t("td",Oe,e(`${p.prestation?`${p.prestation.event_type||"-"}`:""}`),1),t("td",je,e(y(B)(p.payment_date)),1)],8,Ne))),128))])]),_:1})]),_:1}))]),_:1}))}}),Re={class:"d-sm-flex align-center"},Fe={class:"text-h4"},Be={class:"ml-auto"},Ye={class:"text-subtitle-1 font-weight-medium"},Je={class:"text-subtitle-1 font-weight-medium"},ze={class:"text-subtitle-1 font-weight-medium"},Ge=["onClick"],He={class:"text-no-wrap"},Ue={class:"text-no-wrap"},Xe=C({__name:"PaymentTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(!0),h=$t(),$=l;return h.fetchItems($.options).then(u=>{r.value=u.data.data,d.value=!1}),(u,a)=>(o(),f(M,{elevation:"10"},{default:i(()=>[d.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",Re,[t("div",null,[t("h2",Fe,e(l.title)+" : "+e(y(b)(r.value.reduce((p,s)=>parseFloat(p)+s.payments_sum_amount,0))),1)]),n(V),t("div",Be,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:i(()=>[N(e(u.$t("Voir plus")),1)]),_:1})])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Ye,e(u.$t("Nom")),1),t("th",Je,e(u.$t("Montant")),1),t("th",ze,e(u.$t("NB Réglements")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,p=>(o(),m("tr",{key:p.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:s=>u.$router.push(`/payments?method=${p.name}`)},e(p.name),9,Ge),t("td",He,e(y(b)(p.payments_sum_amount)),1),t("td",Ue,e(p.payments_count),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),qe={class:"d-sm-flex align-center"},Ke={class:"text-h4"},Qe={class:"ml-auto"},We={class:"text-subtitle-1 font-weight-medium"},Ze={class:"text-subtitle-1 font-weight-medium"},ts=["onClick"],es={class:"text-no-wrap"},ss=C({__name:"PrestationTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(!0),h=yt(),$=l,u=c([]),a=new Date().getFullYear();return Array.from({length:4},(p,s)=>a-s),h.fetchItems($.options).then(p=>{r.value=p.data.data;for(let s=0;s<4;s++){const _=new Date().getFullYear()-s;for(let x=0;x<r.value.length;x++)r.value[x][`prestation_${_}`]>0&&u.value.indexOf(_)==-1&&u.value.push(_)}d.value=!1}),(p,s)=>(o(),f(M,{elevation:"10"},{default:i(()=>[d.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",qe,[t("div",null,[t("h2",Ke,e(l.title),1)]),n(V),t("div",Qe,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/event_types"},{default:i(()=>[N(e(p.$t("Voir plus")),1)]),_:1})])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",We,e(p.$t("Nom")),1),(o(!0),m(k,null,S(u.value,_=>(o(),m("th",Ze,e(_),1))),256))])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,_=>(o(),m("tr",{key:_.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:x=>p.$router.push(`/prestations?event_type=${_.name}`)},e(_.name),9,ts),(o(!0),m(k,null,S(u.value,x=>(o(),m("td",es,e(_[`prestation_${x}`]||0),1))),256))]))),128))])]),_:1})]),_:1}))]),_:1}))}}),as={class:"d-sm-flex align-center"},os={class:"text-h4"},ls={class:"ml-auto"},ns={class:"text-subtitle-1 font-weight-medium"},is={class:"text-subtitle-1 font-weight-medium"},rs={class:"text-subtitle-1 font-weight-medium"},ds={class:"text-subtitle-1 font-weight-medium"},us={class:"text-subtitle-1 font-weight-medium"},cs=["onClick"],hs={class:"text-no-wrap"},ps={key:0,class:"text-no-wrap"},_s={class:"text-no-wrap"},ms={class:"text-no-wrap text-truncate"},fs={key:1,class:"text-no-wrap text-truncate"},$s=C({__name:"DemandTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){c("March"),c(["March","April","May","June"]);const r=c([]),d=c(0),h=c(!0),$=ct(),u=l;return $.fetchStats(u.options).then(a=>{r.value=a.data.data,d.value=a.data.total||0,h.value=!1}),(a,p)=>(o(),f(M,{elevation:"10"},{default:i(()=>[h.value?(o(),f(T,{key:0,height:"200",type:"table-tbody"})):(o(),f(E,{key:1},{default:i(()=>[t("div",as,[t("div",null,[t("h2",os,e(l.title)+" : "+e(d.value||0),1)]),n(V),t("div",ls,[n(P,{variant:"tonal",color:"primary",density:"compact",to:`/demands?status=${l.options.status}`},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1},8,["to"])])]),n(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ns,e(a.$t("Nom")),1),t("th",is,e(a.$t("Date")),1),t("th",rs,e(a.$t("Source")),1),t("th",ds,e(a.$t("Type")),1),t("th",us,e(a.$t("Lieu")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(r.value,s=>(o(),m("tr",{key:s.id,class:"month-item cursor-pointer",onClick:_=>a.$router.push("/demands/"+s.id)},[t("td",hs,e(s.customer?`${s.customer.firstname} ${s.customer.lastname}`:"-"),1),u.options.statistics!="closed"?(o(),m("td",ps,e(y(B)(s.event_date)),1)):D("",!0),t("td",_s,e(s.source),1),t("td",ms,[n(j,{text:s.event_type},{activator:i(({props:_})=>[t("span",O(H(_)),e(s.event_type==null||s.event_type.length<30?s.event_type:`${s.event_type.replace(`
`," ").slice(0,29)}...`),17)]),_:2},1032,["text"])]),u.options.statistics!="closed"?(o(),m("td",fs,[n(j,{text:s.hall?s.hall.name:""},{activator:i(({props:_})=>[s.hall?(o(),m("span",O(U({key:0},_)),e(s.hall.name.length<30?s.hall.name:`${s.hall.name.replace(`
`," ").slice(0,29)}...`),17)):D("",!0)]),_:2},1032,["text"])])):D("",!0)],8,cs))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ls=C({__name:"Dashboard",setup(l){const r=c({title:"Dashboard"}),d=c([]);return(h,$)=>(o(),m(k,null,[n(ut,{title:r.value.title,breadcrumbs:d.value},null,8,["title","breadcrumbs"]),n(vt,{class:"dashboard"},{default:i(()=>[n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(R,{class:"h-100",title:h.$t("PRESTATION A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"future",status:1}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(R,{class:"h-100",title:h.$t("PRESTATION DEJA PASSE"),options:{per_page:10,order_by:"event_date",direction:"DESC",statistics:"past",status:3}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(Gt,{class:"h-100",title:h.$t("CLIENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"past",status:1}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n($s,{class:"h-100",title:h.$t("DEMANDES RECENTS"),options:{per_page:10,order_by:"event_date",direction:"asc",statistics:"past",status:1}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(G,{class:"h-100",title:h.$t("CA/MOIS DÉJÀ PASSÉ"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"past"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(G,{class:"h-100",title:h.$t("CA/MOIS A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"future"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(me,{class:"h-100",title:h.$t("CA A L’ANNEE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"year_income"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(Se,{class:"h-100",title:h.$t("LISTE SALLES"),options:{per_page:10,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(Le,{class:"h-100",title:h.$t("REGLEMENTS"),options:{per_page:10,order_by:"payment_date",direction:"DESC",statistics:"dashboard"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(R,{class:"h-100",title:h.$t("REG. EN ATTENTE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"closed"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(Xe,{class:"h-100",title:h.$t("TYPE REGLEMENTS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(ss,{class:"h-100",title:h.$t("TYPE PRESTATIONS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1})]),_:1})],64))}});export{Ls as default};
