import{u as q}from"./customers-jwbx1cBA.js";import{O as G,r,aa as O,ae as _,ag as Q,h as H,e as y,g as J,q as K,o as i,c as v,F as p,L as U,w as l,b as s,ah as W,a as t,t as e,Q as u,d as c,M as w,N as j,V as B}from"./index--eSAaoua.js";import{_ as X}from"./BaseBreadcrumb-CZWnI0nK.js";import{f as g,a as Y}from"./formatters-Dv1Ro_l4.js";import{u as E}from"./demands-Dky71OLi.js";import{u as L}from"./Controller-AM4no6_5.js";import{V as d,a as $}from"./VRow-BqVouQvo.js";import{V as m,d as V,c as h}from"./VCard-C_EOskDD.js";import{V as b}from"./VChip-BkiHneXL.js";import{V as x}from"./VSpacer-BLion4vj.js";import{V as A}from"./VTable-BUYeiApe.js";/* empty css              */import"./createSimpleFunctional-BNLeBn9G.js";import"./VAvatar-DO5dze8k.js";import"./index-DyKrsRPI.js";import"./VSlideGroup-xxvn732U.js";const Z={class:"text-h6"},tt={class:"text-subtitle-1 textSecondary mt-3"},et={class:"text-subtitle-1 textSecondary mt-3"},st={class:"text-subtitle-1 textSecondary mt-3"},at={class:"text-subtitle-1 textSecondary mt-3"},lt={class:"text-subtitle-1 textSecondary mt-3"},ot={class:"text-subtitle-1 textSecondary mt-3"},rt={class:"d-flex align-start"},nt={class:"text-h4 mt-1"},it={class:"mt-9"},dt={class:"text-h4 font-weight-semibold mb-1"},ut={class:"d-flex align-start"},ct={class:"text-h4 mt-1"},mt={class:"mt-9"},ht={class:"text-h4 font-weight-semibold mb-1"},ft={class:"d-flex align-start"},_t={class:"text-h4 mt-1"},vt={class:"mt-9"},pt={class:"text-h4 font-weight-semibold mb-1"},gt={class:"d-flex align-start"},yt={class:"text-h4 mt-1"},bt={class:"mt-9"},xt={class:"text-h4 font-weight-semibold mb-1"},wt={class:"text-h6"},$t={class:"text-h6"},Vt={class:"text-h6"},kt={class:"text-h6"},Pt={class:"text-h6"},Ct={class:"text-h6"},Dt={style:{"max-height":"500px"},class:"overflow-y-auto"},St={class:"text-h6 font-weight-medium text-medium-emphasis"},Nt={class:"text-h6"},Tt={class:"text-h6"},It={class:"text-h6"},jt={class:"text-h6"},Bt={class:"text-h6"},Et={class:"text-h6"},Lt={class:"text-h6 font-weight-medium text-medium-emphasis"},te=G({__name:"View",setup(At){r(),O();const o=r({id:null,status:0,service:"",created_at:null,customer_id:null,prestation_id:null,customer:{id:null,firstname:"",lastname:"",email:"",phone:"",is_customer:!1,created_at:null,demands:[],prestations:[]}}),k=r({title:_("Détails du devis")+" "+(o.value.event_type||"")+" "+(o.value.customer||{firstname:""}).firstname+" "+(o.value.customer||{lastname:""}).lastname+" "+(g(o.value.created_at)||"")}),P=r([{text:_("Dashboard"),disabled:!1,href:"/"},{text:_("Client"),disabled:!1,href:"/customers"},{text:o.value.event_type||"",disabled:!0,href:"#"}]);function M(){k.value={title:_("Détails du devis")+" "+(o.value.event_type||"")+" ("+(o.value.customer||{firstname:""}).firstname+" "+(o.value.customer||{lastname:""}).lastname+" "+(g(o.value.created_at)||"")+")"},P.value=[{text:_("Dashboard"),disabled:!1,href:"/"},{text:_("Gestion des devis"),disabled:!1,href:"/customers"},{text:o.value.event_type||"",disabled:!0,href:"#"}]}const C=q(),D=Q();H(()=>{T()});const f=r(!1);r(!1),r(10);const S=r(2),N=r(2);r(!1),r(!1),r(null);const z=r("");r(["primary","secondary","error","success","warning"]),r([{key:"created_at",order:"DESC"}]),r(0),r({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"created_at",order:"DESC"}]});const F=r(-1);r({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),r({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),r(!1),r([{title:"Prénom",align:"start",key:"customer.firstname",sortable:!1},{title:"Nom",align:"start",key:"customer.lastname",sortable:!1},{title:"Email",align:"start",key:"customer.email",sortable:!1},{title:"Téléphone",align:"start",key:"customer.phone",sortable:!1},{title:"Prestation",align:"start",key:"event_type"},{title:"Date de la customere",align:"start",key:"created_at"},{title:"Status",align:"start",key:"status"},{title:"Actions",key:"actions",sortable:!1}]),y(()=>C.customers.data.filter(a=>a.email.toLowerCase().includes(z.value.toLowerCase())));const R=y(()=>D.params.id);y(()=>o.value.customer.customers?o.value.customer.customers.filter(a=>a.id!=o.value.id):[]),y(()=>F.value===-1?"Nouvel administrateur":"Modifier l’administrateur");function T(){f.value=!0,C.fetchItem(D.params.id).then(a=>{a.data.error||(f.value=!1,o.value=a.data,M())}).catch(a=>{f.value=!1}).then(()=>{f.value=!1})}return J(R,(a,I)=>{a!=I&&T()},{deep:!0}),K(()=>{S.value>N.value&&(S.value=N.value)}),(a,I)=>(i(),v(w,null,[f.value?U("",!0):(i(),p(X,{key:0,title:k.value.title,breadcrumbs:P.value},null,8,["title","breadcrumbs"])),f.value?(i(),p($,{key:1,justify:"center",align:"center","align-content":"center"},{default:l(()=>[s(d,{cols:"12",justify:"center",align:"center","align-content":"center"},{default:l(()=>[s(W,{indeterminate:"",color:"primary",size:"150"})]),_:1})]),_:1})):(i(),p($,{key:2},{default:l(()=>[s(d,{cols:"12",md:"4"},{default:l(()=>[s(m,{elevation:"10",class:"overflow-hidden h-100"},{default:l(()=>[s(V,{class:"py-4 px-6 text-white bg-primary"},{default:l(()=>[t("h4",Z,e(a.$t("Identification du customereur")),1)]),_:1}),s(h,{class:"pa-6"},{default:l(()=>[t("p",tt,e(a.$t("Prénom :"))+" "+e(o.value.firstname||""),1),t("p",et,e(a.$t("Nom :"))+" "+e(o.value.lastname||""),1),t("p",st,e(a.$t("Email :"))+" "+e(o.value.email||""),1),t("p",at,e(a.$t("Téléphone :"))+" "+e(o.value.phone||""),1),t("p",lt,e(a.$t("Date d'enregistrement :"))+" "+e(u(g)(o.value.created_at)||""),1),t("p",ot,[c(e(a.$t("Type :"))+" ",1),o.value&&o.value.is_customer?(i(),p(b,{key:0,color:"success"},{default:l(()=>[c(e(a.$t("Client")),1)]),_:1})):(i(),p(b,{key:1,color:"error"},{default:l(()=>[c(e(a.$t("Prospect")),1)]),_:1}))])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"8"},{default:l(()=>[s($,{class:""},{default:l(()=>[s(d,{cols:"12",md:"6"},{default:l(()=>[s(m,{elevation:"10"},{default:l(()=>[s(h,null,{default:l(()=>[t("div",rt,[t("h2",nt,e(a.$t("Devis")),1),s(x)]),t("div",it,[t("h2",dt,e(o.value.demands?o.value.demands.length:0),1)])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"6"},{default:l(()=>[s(m,{elevation:"10"},{default:l(()=>[s(h,null,{default:l(()=>[t("div",ut,[t("h2",ct,e(a.$t("Prestations")),1),s(x)]),t("div",mt,[t("h2",ht,e(o.value.prestations?o.value.prestations.length:0),1)])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"6"},{default:l(()=>[s(m,{elevation:"10"},{default:l(()=>[s(h,null,{default:l(()=>[t("div",ft,[t("h2",_t,e(a.$t("Paiements")),1),s(x)]),t("div",vt,[t("h2",pt,e(u(Y)(o.value.payments_sum_amount||0)),1)])]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",md:"6"},{default:l(()=>[s(m,{elevation:"10"},{default:l(()=>[s(h,null,{default:l(()=>[t("div",gt,[t("h2",yt,e(a.$t("Prestations Clôturées")),1),s(x)]),t("div",bt,[t("h2",xt,e(o.value.prestations_count||0),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",lg:"6"},{default:l(()=>[s(m,{elevation:"10",class:"overflow-hidden h-100"},{default:l(()=>[s(V,{class:"py-4 px-6 text-white bg-info"},{default:l(()=>[t("h4",wt,e(a.$t("Les devis de"))+" "+e(o.value.firstname||"")+" "+e(o.value.lastname||""),1)]),_:1}),s(h,{class:"pa-6"},{default:l(()=>[s(A,{class:"month-table"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",$t,e(a.$t("ID")),1),t("th",Vt,e(a.$t("Prestation")),1),t("th",kt,e(a.$t("Date")),1),t("th",Pt,e(a.$t("Status")),1),t("th",Ct,e(a.$t("Action")),1)])]),t("tbody",Dt,[(i(!0),v(w,null,j(o.value.demands||[],n=>(i(),v("tr",{key:n.id,class:"month-item"},[t("td",null,e(n.id),1),t("td",null,[t("h6",St,e(n.event_type),1)]),t("td",null,e(u(g)(n.demand_date)),1),t("td",null,[s(b,{rounded:"md",class:"font-weight-bold",color:u(E)().statusColor(n.status),size:"small",label:""},{default:l(()=>[c(e(u(E)().statusText(n.status)),1)]),_:2},1032,["color"])]),t("td",null,[s(B,{variant:"outlined",density:"compact",color:"info",to:"/demands/"+n.id},{default:l(()=>[c(e(a.$t("Voir")),1)]),_:2},1032,["to"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),s(d,{cols:"12",lg:"6"},{default:l(()=>[s(m,{elevation:"10",class:"overflow-hidden h-100"},{default:l(()=>[s(V,{class:"py-4 px-6 text-white bg-info"},{default:l(()=>[t("h4",Nt,e(a.$t("Prestations de devis de"))+" "+e(o.value.firstname||"")+" "+e(o.value.lastname||""),1)]),_:1}),s(h,{class:"pa-6"},{default:l(()=>[s(A,{class:"month-table"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",Tt,e(a.$t("ID")),1),t("th",It,e(a.$t("Prestation")),1),t("th",jt,e(a.$t("Date")),1),t("th",Bt,e(a.$t("Status")),1),t("th",Et,e(a.$t("Action")),1)])]),t("tbody",null,[(i(!0),v(w,null,j(o.value.prestations||[],n=>(i(),v("tr",{key:n.id,class:"month-item"},[t("td",null,e(n.id),1),t("td",null,[t("h6",Lt,e(n.demand?n.demand.event_type:""),1)]),t("td",null,e(u(g)(n.demand_date)),1),t("td",null,[s(b,{rounded:"md",class:"font-weight-bold",color:u(L)().statusColor(n.status),size:"small",label:""},{default:l(()=>[c(e(u(L)().statusText(n.status)),1)]),_:2},1032,["color"])]),t("td",null,[s(B,{variant:"outlined",density:"compact",color:"info",to:"/prestations/"+n.id},{default:l(()=>[c(e(a.$t("Voir")),1)]),_:2},1032,["to"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}});export{te as default};
