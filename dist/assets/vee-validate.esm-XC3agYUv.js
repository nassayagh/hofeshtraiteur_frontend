import{O as ur,l as Ae,G as or,b1 as lr,Q as d,e as R,h as Ue,aq as Le,cI as he,g as U,i as sr,cJ as Ge,r as K,aZ as Ie,a_ as fe,q as cr,b2 as fr,cK as dr}from"./index-D1vr5Jkw.js";/**
  * vee-validate v4.6.7
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function oe(e){return typeof e=="function"}function $e(e){return e==null}const te=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function xe(e){return Number(e)>=0}function vr(e){const r=parseFloat(e);return isNaN(r)?e:r}const mr={};function yr(e){return mr[e]}const ve=Symbol("vee-validate-form"),hr=Symbol("vee-validate-field-instance"),Ce=Symbol("Default empty value");function je(e){return oe(e)&&!!e.__locatorRef}function de(e){return!!e&&oe(e.validate)}function qe(e){return e==="checkbox"||e==="radio"}function gr(e){return te(e)||Array.isArray(e)}function Ke(e){return Array.isArray(e)?e.length===0:te(e)&&Object.keys(e).length===0}function ge(e){return/^\[.+\]$/i.test(e)}function Or(e){return We(e)&&e.multiple}function We(e){return e.tagName==="SELECT"}function Ye(e){return Me(e)&&e.target&&"submit"in e.target}function Me(e){return e?!!(typeof Event<"u"&&oe(Event)&&e instanceof Event||e&&e.srcElement):!1}var Be=function e(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var i,n,a;if(Array.isArray(r)){if(i=r.length,i!=t.length)return!1;for(n=i;n--!==0;)if(!e(r[n],t[n]))return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if(a=Object.keys(r),i=a.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;for(n=i;n--!==0;){var l=a[n];if(!e(r[l],t[l]))return!1}return!0}return r!==r&&t!==t};function pe(e){return ge(e)?e.replace(/\[|\]/gi,""):e}function P(e,r,t){return e?ge(r)?e[pe(r)]:(r||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((n,a)=>gr(n)&&a in n?n[a]:t,e):t}function re(e,r,t){if(ge(r)){e[pe(r)]=t;return}const i=r.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let a=0;a<i.length;a++){if(a===i.length-1){n[i[a]]=t;return}(!(i[a]in n)||$e(n[i[a]]))&&(n[i[a]]=xe(i[a+1])?[]:{}),n=n[i[a]]}}function Se(e,r){if(Array.isArray(e)&&xe(r)){e.splice(Number(r),1);return}te(e)&&delete e[r]}function Ee(e,r){if(ge(r)){delete e[pe(r)];return}const t=r.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let a=0;a<t.length;a++){if(a===t.length-1){Se(i,t[a]);break}if(!(t[a]in i)||$e(i[t[a]]))break;i=i[t[a]]}const n=t.map((a,l)=>P(e,t.slice(0,l).join(".")));for(let a=n.length-1;a>=0;a--)if(Ke(n[a])){if(a===0){Se(e,t[0]);continue}Se(n[a-1],t[a-1])}}function I(e){return Object.keys(e)}function Oe(e,r=void 0){const t=Ge();return(t==null?void 0:t.provides[e])||fr(e,r)}function we(e,r,t){if(Array.isArray(e)){const i=[...e],n=i.findIndex(a=>Be(a,r));return n>=0?i.splice(n,1):i.push(r),i}return Be(e,r)?t:r}function Pe(e,r=0){let t=null,i=[];return function(...n){return t&&window.clearTimeout(t),t=window.setTimeout(()=>{const a=e(...n);i.forEach(l=>l(a)),i=[]},r),new Promise(a=>i.push(a))}}function Vr(e,r){return te(r)&&r.number?vr(e):e}function _e(e,r){let t;return async function(...n){const a=e(...n);t=a;const l=await a;return a!==t||(t=void 0,r(l,n)),l}}const br=(e,r,t)=>r.slots.default?typeof e=="string"||!e?r.slots.default(t()):{default:()=>{var i,n;return(n=(i=r.slots).default)===null||n===void 0?void 0:n.call(i,t())}}:r.slots.default;function Fe(e){if(He(e))return e._value}function He(e){return"_value"in e}function Je(e){if(!Me(e))return e;const r=e.target;if(qe(r.type)&&He(r))return Fe(r);if(r.type==="file"&&r.files){const t=Array.from(r.files);return r.multiple?t:t[0]}if(Or(r))return Array.from(r.options).filter(t=>t.selected&&!t.disabled).map(Fe);if(We(r)){const t=Array.from(r.options).find(i=>i.selected);return t?Fe(t):r.value}return r.value}function Qe(e){const r={};return Object.defineProperty(r,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?te(e)&&e._$$isNormalized?e:te(e)?Object.keys(e).reduce((t,i)=>{const n=Ar(e[i]);return e[i]!==!1&&(t[i]=Ne(n)),t},r):typeof e!="string"?r:e.split("|").reduce((t,i)=>{const n=Sr(i);return n.name&&(t[n.name]=Ne(n.params)),t},r):r}function Ar(e){return e===!0?[]:Array.isArray(e)||te(e)?e:[e]}function Ne(e){const r=t=>typeof t=="string"&&t[0]==="@"?Er(t.slice(1)):t;return Array.isArray(e)?e.map(r):e instanceof RegExp?[e]:Object.keys(e).reduce((t,i)=>(t[i]=r(e[i]),t),{})}const Sr=e=>{let r=[];const t=e.split(":")[0];return e.includes(":")&&(r=e.split(":").slice(1).join(":").split(",")),{name:t,params:r}};function Er(e){const r=t=>P(t,e)||t[e];return r.__locatorRef=e,r}function Fr(e){return Array.isArray(e)?e.filter(je):I(e).filter(r=>je(e[r])).map(r=>e[r])}const jr={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let wr=Object.assign({},jr);const _r=()=>wr;async function Xe(e,r,t={}){const i=t==null?void 0:t.bails,n={name:(t==null?void 0:t.name)||"{field}",rules:r,bails:i??!0,formData:(t==null?void 0:t.values)||{}},l=(await Ir(n,e)).errors;return{errors:l,valid:!l.length}}async function Ir(e,r){if(de(e.rules))return Mr(r,e.rules,{bails:e.bails});if(oe(e.rules)||Array.isArray(e.rules)){const l={field:e.name,form:e.formData,value:r},v=Array.isArray(e.rules)?e.rules:[e.rules],c=v.length,m=[];for(let V=0;V<c;V++){const g=v[V],O=await g(r,l);if(typeof O!="string"&&O)continue;const k=typeof O=="string"?O:Ze(l);if(m.push(k),e.bails)return{errors:m}}return{errors:m}}const t=Object.assign(Object.assign({},e),{rules:Qe(e.rules)}),i=[],n=Object.keys(t.rules),a=n.length;for(let l=0;l<a;l++){const v=n[l],c=await pr(t,r,{name:v,params:t.rules[v]});if(c.error&&(i.push(c.error),e.bails))return{errors:i}}return{errors:i}}async function Mr(e,r,t){var i;return{errors:await r.validate(e,{abortEarly:(i=t.bails)!==null&&i!==void 0?i:!0}).then(()=>[]).catch(a=>{if(a.name==="ValidationError")return a.errors;throw a})}}async function pr(e,r,t){const i=yr(t.name);if(!i)throw new Error(`No such validator '${t.name}' exists.`);const n=Rr(t.params,e.formData),a={field:e.name,value:r,form:e.formData,rule:Object.assign(Object.assign({},t),{params:n})},l=await i(r,n,a);return typeof l=="string"?{error:l}:{error:l?void 0:Ze(a)}}function Ze(e){const r=_r().generateMessage;return r?r(e):"Field is invalid"}function Rr(e,r){const t=i=>je(i)?i(r):i;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((i,n)=>(i[n]=t(e[n]),i),{})}async function kr(e,r){const t=await e.validate(r,{abortEarly:!1}).then(()=>[]).catch(a=>{if(a.name!=="ValidationError")throw a;return a.inner||[]}),i={},n={};for(const a of t){const l=a.errors;i[a.path]={valid:!l.length,errors:l},l.length&&(n[a.path]=l[0])}return{valid:!t.length,results:i,errors:n}}async function Cr(e,r,t){const n=I(e).map(async m=>{var V,g,O;const w=await Xe(P(r,m),e[m],{name:((V=t==null?void 0:t.names)===null||V===void 0?void 0:V[m])||m,values:r,bails:(O=(g=t==null?void 0:t.bailsMap)===null||g===void 0?void 0:g[m])!==null&&O!==void 0?O:!0});return Object.assign(Object.assign({},w),{path:m})});let a=!0;const l=await Promise.all(n),v={},c={};for(const m of l)v[m.path]={valid:m.valid,errors:m.errors},m.valid||(a=!1,c[m.path]=m.errors[0]);return{valid:a,results:v,errors:c}}function Te(e,r,t){typeof t.value=="object"&&(t.value=E(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||r==="__proto__"?Object.defineProperty(e,r,t):e[r]=t.value}function E(e){if(typeof e!="object")return e;var r=0,t,i,n,a=Object.prototype.toString.call(e);if(a==="[object Object]"?n=Object.create(e.__proto__||null):a==="[object Array]"?n=Array(e.length):a==="[object Set]"?(n=new Set,e.forEach(function(l){n.add(E(l))})):a==="[object Map]"?(n=new Map,e.forEach(function(l,v){n.set(E(v),E(l))})):a==="[object Date]"?n=new Date(+e):a==="[object RegExp]"?n=new RegExp(e.source,e.flags):a==="[object DataView]"?n=new e.constructor(E(e.buffer)):a==="[object ArrayBuffer]"?n=e.slice(0):a.slice(-6)==="Array]"&&(n=new e.constructor(e)),n){for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)Te(n,i[r],Object.getOwnPropertyDescriptor(e,i[r]));for(r=0,i=Object.getOwnPropertyNames(e);r<i.length;r++)Object.hasOwnProperty.call(n,t=i[r])&&n[t]===e[t]||Te(n,t,Object.getOwnPropertyDescriptor(e,t))}return n||e}var L=function e(r,t){if(r===t)return!0;if(r&&t&&typeof r=="object"&&typeof t=="object"){if(r.constructor!==t.constructor)return!1;var i,n,a;if(Array.isArray(r)){if(i=r.length,i!=t.length)return!1;for(n=i;n--!==0;)if(!e(r[n],t[n]))return!1;return!0}if(r instanceof Map&&t instanceof Map){if(r.size!==t.size)return!1;for(n of r.entries())if(!t.has(n[0]))return!1;for(n of r.entries())if(!e(n[1],t.get(n[0])))return!1;return!0}if(r instanceof Set&&t instanceof Set){if(r.size!==t.size)return!1;for(n of r.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(r)&&ArrayBuffer.isView(t)){if(i=r.length,i!=t.length)return!1;for(n=i;n--!==0;)if(r[n]!==t[n])return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if(a=Object.keys(r),i=a.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;for(n=i;n--!==0;){var l=a[n];if(!e(r[l],t[l]))return!1}return!0}return r!==r&&t!==t};let De=0;function Br(e,r){const{value:t,initialValue:i,setInitialValue:n}=er(e,r.modelValue,!r.standalone),{errorMessage:a,errors:l,setErrors:v}=Nr(e,!r.standalone),c=Pr(t,i,l),m=De>=Number.MAX_SAFE_INTEGER?0:++De;function V(g){var O;"value"in g&&(t.value=g.value),"errors"in g&&v(g.errors),"touched"in g&&(c.touched=(O=g.touched)!==null&&O!==void 0?O:c.touched),"initialValue"in g&&n(g.initialValue)}return{id:m,path:e,value:t,initialValue:i,meta:c,errors:l,errorMessage:a,setState:V}}function er(e,r,t=!0){const i=t===!0?Oe(ve,void 0):void 0,n=K(d(r));function a(){return i?P(i.meta.value.initialValues,d(e),d(n)):d(n)}function l(V){if(!i){n.value=V;return}i.stageInitialValue(d(e),V,!0)}const v=R(a);if(!i)return{value:K(a()),initialValue:v,setInitialValue:l};const c=r?d(r):P(i.values,d(e),d(v));return i.stageInitialValue(d(e),c,!0),{value:R({get(){return P(i.values,d(e))},set(V){i.setFieldValue(d(e),V)}}),initialValue:v,setInitialValue:l}}function Pr(e,r,t){const i=Ie({touched:!1,pending:!1,valid:!0,validated:!!d(t).length,initialValue:R(()=>d(r)),dirty:R(()=>!L(d(e),d(r)))});return U(t,n=>{i.valid=!n.length},{immediate:!0,flush:"sync"}),i}function Nr(e,r){const t=r?Oe(ve,void 0):void 0;function i(a){return a?Array.isArray(a)?a:[a]:[]}if(!t){const a=K([]);return{errors:a,errorMessage:R(()=>a.value[0]),setErrors:l=>{a.value=i(l)}}}const n=R(()=>t.errorBag.value[d(e)]||[]);return{errors:n,errorMessage:R(()=>n.value[0]),setErrors:a=>{t.setFieldErrorBag(d(e),i(a))}}}function Yr(e,r,t){return qe(t==null?void 0:t.type)?zr(e,r,t):rr(e,r,t)}function rr(e,r,t){const{initialValue:i,validateOnMount:n,bails:a,type:l,checkedValue:v,label:c,validateOnValueUpdate:m,uncheckedValue:V,standalone:g,keepValueOnUnmount:O,modelPropName:w,syncVModel:k}=Tr(d(e),t),S=g?void 0:Oe(ve);let W=!1;const{id:G,value:B,initialValue:Z,meta:F,setState:N,errors:ne,errorMessage:$}=Br(e,{modelValue:i,standalone:g});k&&Ur({value:B,prop:w,handleChange:se});const le=()=>{F.touched=!0},ie=R(()=>{let s=d(r);const A=d(S==null?void 0:S.schema);return A&&!de(A)&&(s=Dr(A,d(e))||s),de(s)||oe(s)||Array.isArray(s)?s:Qe(s)});async function C(s){var A,M;return S!=null&&S.validateSchema?(A=(await S.validateSchema(s)).results[d(e)])!==null&&A!==void 0?A:{valid:!0,errors:[]}:Xe(B.value,ie.value,{name:d(c)||d(e),values:(M=S==null?void 0:S.values)!==null&&M!==void 0?M:{},bails:a})}const b=_e(async()=>(F.pending=!0,F.validated=!0,C("validated-only")),s=>(W&&(s.valid=!0,s.errors=[]),N({errors:s.errors}),F.pending=!1,s)),_=_e(async()=>C("silent"),s=>(W&&(s.valid=!0),F.valid=s.valid,s));function Y(s){return(s==null?void 0:s.mode)==="silent"?_():b()}function se(s,A=!0){const M=Je(s);B.value=M,!m&&A&&b()}Ue(()=>{if(n)return b();(!S||!S.validateSchema)&&_()});function H(s){F.touched=s}let T;function J(){T=U(B,(s,A)=>{if(L(s,A))return;(m?b:_)()},{deep:!0})}J();function Q(s){var A;T==null||T();const M=s&&"value"in s?s.value:Z.value;N({value:E(M),initialValue:E(M),touched:(A=s==null?void 0:s.touched)!==null&&A!==void 0?A:!1,errors:(s==null?void 0:s.errors)||[]}),F.pending=!1,F.validated=!1,_(),fe(()=>{J()})}function me(s){B.value=s}function ye(s){N({errors:Array.isArray(s)?s:[s]})}const D={id:G,name:e,label:c,value:B,meta:F,errors:ne,errorMessage:$,type:l,checkedValue:v,uncheckedValue:V,bails:a,keepValueOnUnmount:O,resetField:Q,handleReset:()=>Q(),validate:Y,handleChange:se,handleBlur:le,setState:N,setTouched:H,setErrors:ye,setValue:me};if(Le(hr,D),he(r)&&typeof d(r)!="function"&&U(r,(s,A)=>{L(s,A)||(F.validated?b():_())},{deep:!0}),!S)return D;S.register(D),sr(()=>{W=!0,S.unregister(D)});const X=R(()=>{const s=ie.value;return!s||oe(s)||de(s)||Array.isArray(s)?{}:Object.keys(s).reduce((A,M)=>{const Ve=Fr(s[M]).map(ae=>ae.__locatorRef).reduce((ae,x)=>{const ee=P(S.values,x)||S.values[x];return ee!==void 0&&(ae[x]=ee),ae},{});return Object.assign(A,Ve),A},{})});return U(X,(s,A)=>{if(!Object.keys(s).length)return;!L(s,A)&&(F.validated?b():_())}),D}function Tr(e,r){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0});if(!r)return t();const i="valueProp"in r?r.valueProp:r.checkedValue;return Object.assign(Object.assign(Object.assign({},t()),r||{}),{checkedValue:i})}function Dr(e,r){if(e)return e[r]}function zr(e,r,t){const i=t!=null&&t.standalone?void 0:Oe(ve),n=t==null?void 0:t.checkedValue,a=t==null?void 0:t.uncheckedValue;function l(v){const c=v.handleChange,m=R(()=>{const g=d(v.value),O=d(n);return Array.isArray(g)?g.findIndex(w=>L(w,O))>=0:L(O,g)});function V(g,O=!0){var w;if(m.value===((w=g==null?void 0:g.target)===null||w===void 0?void 0:w.checked))return;let k=Je(g);i||(k=we(d(v.value),d(n),d(a))),c(k,O)}return Object.assign(Object.assign({},v),{checked:m,checkedValue:n,uncheckedValue:a,handleChange:V})}return l(rr(e,r,t))}function Ur({prop:e,value:r,handleChange:t}){const i=Ge();if(!i)return;const n=e||"modelValue",a=`update:${n}`;n in i.props&&(U(r,l=>{L(l,ze(i,n))||i.emit(a,l)}),U(()=>ze(i,n),l=>{if(l===Ce&&r.value===void 0)return;const v=l===Ce?void 0:l;L(v,Vr(r.value,i.props.modelModifiers))||t(v)}))}function ze(e,r){return e.props[r]}let Lr=0;function Gr(e){var r;const t=Lr++;let i=!1;const n=K({}),a=K(!1),l=K(0),v=[],c=Ie(E(d(e==null?void 0:e.initialValues)||{})),{errorBag:m,setErrorBag:V,setFieldErrorBag:g}=qr(e==null?void 0:e.initialErrors),O=R(()=>I(m.value).reduce((u,o)=>{const y=m.value[o];return y&&y.length&&(u[o]=y[0]),u},{}));function w(u){const o=n.value[u];return Array.isArray(o)?o[0]:o}function k(u){return!!n.value[u]}const S=R(()=>I(n.value).reduce((u,o)=>{const y=w(o);return y&&(u[o]=d(y.label||y.name)||""),u},{})),W=R(()=>I(n.value).reduce((u,o)=>{var y;const h=w(o);return h&&(u[o]=(y=h.bails)!==null&&y!==void 0?y:!0),u},{})),G=Object.assign({},(e==null?void 0:e.initialErrors)||{}),B=(r=e==null?void 0:e.keepValuesOnUnmount)!==null&&r!==void 0?r:!1,{initialValues:Z,originalInitialValues:F,setInitialValues:N}=xr(n,c,e==null?void 0:e.initialValues),ne=$r(n,c,F,O),$=e==null?void 0:e.validationSchema,le=Pe(ke,5),ie=Pe(ke,5),C=_e(async u=>await u==="silent"?le():ie(),(u,[o])=>{const y=b.fieldsByPath.value||{},h=I(b.errorBag.value);return[...new Set([...I(u.results),...I(y),...h])].reduce((j,p)=>{const q=y[p],ue=(u.results[p]||{errors:[]}).errors,z={errors:ue,valid:!ue.length};if(j.results[p]=z,z.valid||(j.errors[p]=z.errors[0]),!q)return H(p,ue),j;if(Y(q,ce=>ce.meta.valid=z.valid),o==="silent")return j;const ar=Array.isArray(q)?q.some(ce=>ce.meta.validated):q.meta.validated;return o==="validated-only"&&!ar||Y(q,ce=>ce.setState({errors:z.errors})),j},{valid:u.valid,results:{},errors:{}})}),b={formId:t,fieldsByPath:n,values:c,errorBag:m,errors:O,schema:$,submitCount:l,meta:ne,isSubmitting:a,fieldArrays:v,keepValuesOnUnmount:B,validateSchema:d($)?C:void 0,validate:x,register:Ve,unregister:ae,setFieldErrorBag:g,validateField:ee,setFieldValue:J,setValues:Q,setErrors:T,setFieldError:H,setFieldTouched:D,setTouched:X,resetForm:s,handleSubmit:be,stageInitialValue:nr,unsetInitialValue:tr,setFieldInitialValue:Re,useFieldModel:ye};function _(u){return Array.isArray(u)}function Y(u,o){return Array.isArray(u)?u.forEach(o):o(u)}function se(u){Object.values(n.value).forEach(o=>{o&&Y(o,u)})}function H(u,o){g(u,o)}function T(u){V(u)}function J(u,o,{force:y}={force:!1}){var h;const f=n.value[u],j=E(o);if(!f){re(c,u,j);return}if(_(f)&&((h=f[0])===null||h===void 0?void 0:h.type)==="checkbox"&&!Array.isArray(o)){const q=E(we(P(c,u)||[],o,void 0));re(c,u,q);return}let p=o;!_(f)&&f.type==="checkbox"&&!y&&!i&&(p=E(we(P(c,u),o,d(f.uncheckedValue)))),re(c,u,p)}function Q(u){I(c).forEach(o=>{delete c[o]}),I(u).forEach(o=>{J(o,u[o])}),v.forEach(o=>o&&o.reset())}function me(u){const{value:o}=er(u);return U(o,()=>{k(d(u))||x({mode:"validated-only"})},{deep:!0}),o}function ye(u){return Array.isArray(u)?u.map(me):me(u)}function D(u,o){const y=n.value[u];y&&Y(y,h=>h.setTouched(o))}function X(u){I(u).forEach(o=>{D(o,!!u[o])})}function s(u){i=!0,u!=null&&u.values?(N(u.values),Q(u==null?void 0:u.values)):(N(F.value),Q(F.value)),se(o=>o.resetField()),u!=null&&u.touched&&X(u.touched),T((u==null?void 0:u.errors)||{}),l.value=(u==null?void 0:u.submitCount)||0,fe(()=>{i=!1})}function A(u,o){const y=dr(u),h=o;if(!n.value[h]){n.value[h]=y;return}const f=n.value[h];f&&!Array.isArray(f)&&(n.value[h]=[f]),n.value[h]=[...n.value[h],y]}function M(u,o){const y=o,h=n.value[y];if(h){if(!_(h)&&u.id===h.id){delete n.value[y];return}if(_(h)){const f=h.findIndex(j=>j.id===u.id);if(f===-1)return;h.splice(f,1),h.length||delete n.value[y]}}}function Ve(u){const o=d(u.name);A(u,o),he(u.name)&&U(u.name,async(h,f)=>{await fe(),M(u,f),A(u,h),(O.value[f]||O.value[h])&&(H(f,void 0),ee(h)),await fe(),k(f)||Ee(c,f)});const y=d(u.errorMessage);y&&(G==null?void 0:G[o])!==y&&ee(o),delete G[o]}function ae(u){const o=d(u.name),y=n.value[o],h=!!y&&_(y);M(u,o),fe(()=>{var f;const j=(f=d(u.keepValueOnUnmount))!==null&&f!==void 0?f:d(B),p=P(c,o);if(h&&(y===n.value[o]||!n.value[o])&&Array.isArray(p)&&!j){const ue=p.findIndex(z=>L(z,d(u.checkedValue)));if(ue>-1){const z=[...p];z.splice(ue,1),J(o,z,{force:!0})}}if(!k(o)){if(H(o,void 0),j||h&&!Ke(P(c,o)))return;Ee(c,o)}})}async function x(u){if(se(f=>f.meta.validated=!0),b.validateSchema)return b.validateSchema((u==null?void 0:u.mode)||"force");const o=await Promise.all(Object.values(n.value).map(f=>{const j=Array.isArray(f)?f[0]:f;return j?j.validate(u).then(p=>({key:d(j.name),valid:p.valid,errors:p.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),y={},h={};for(const f of o)y[f.key]={valid:f.valid,errors:f.errors},f.errors.length&&(h[f.key]=f.errors[0]);return{valid:o.every(f=>f.valid),results:y,errors:h}}async function ee(u){const o=n.value[u];return o?Array.isArray(o)?o.map(y=>y.validate())[0]:o.validate():Promise.resolve({errors:[],valid:!0})}function be(u,o){return function(h){return h instanceof Event&&(h.preventDefault(),h.stopPropagation()),X(I(n.value).reduce((f,j)=>(f[j]=!0,f),{})),a.value=!0,l.value++,x().then(f=>{if(f.valid&&typeof u=="function")return u(E(c),{evt:h,setErrors:T,setFieldError:H,setTouched:X,setFieldTouched:D,setValues:Q,setFieldValue:J,resetForm:s});!f.valid&&typeof o=="function"&&o({values:E(c),evt:h,errors:f.errors,results:f.results})}).then(f=>(a.value=!1,f),f=>{throw a.value=!1,f})}}function Re(u,o){re(Z.value,u,E(o))}function tr(u){Ee(Z.value,u)}function nr(u,o,y=!1){re(c,u,o),Re(u,o),y&&!(e!=null&&e.initialValues)&&re(F.value,u,E(o))}async function ke(){const u=d($);return u?de(u)?await kr(u,c):await Cr(u,c,{names:S.value,bailsMap:W.value}):{valid:!0,results:{},errors:{}}}const ir=be((u,{evt:o})=>{Ye(o)&&o.target.submit()});return Ue(()=>{if(e!=null&&e.initialErrors&&T(e.initialErrors),e!=null&&e.initialTouched&&X(e.initialTouched),e!=null&&e.validateOnMount){x();return}b.validateSchema&&b.validateSchema("silent")}),he($)&&U($,()=>{var u;(u=b.validateSchema)===null||u===void 0||u.call(b,"validated-only")}),Le(ve,b),{errors:O,meta:ne,values:c,isSubmitting:a,submitCount:l,validate:x,validateField:ee,handleReset:()=>s(),resetForm:s,handleSubmit:be,submitForm:ir,setFieldError:H,setErrors:T,setFieldValue:J,setValues:Q,setFieldTouched:D,setTouched:X,useFieldModel:ye}}function $r(e,r,t,i){const n={touched:"some",pending:"some",valid:"every"},a=R(()=>!L(r,d(t)));function l(){const c=Object.values(e.value).flat(1).filter(Boolean);return I(n).reduce((m,V)=>{const g=n[V];return m[V]=c[g](O=>O.meta[V]),m},{})}const v=Ie(l());return cr(()=>{const c=l();v.touched=c.touched,v.valid=c.valid,v.pending=c.pending}),R(()=>Object.assign(Object.assign({initialValues:d(t)},v),{valid:v.valid&&!I(i.value).length,dirty:a.value}))}function xr(e,r,t){const i=K(E(d(t))||{}),n=K(E(d(t))||{});function a(l,v=!1){i.value=E(l),n.value=E(l),v&&I(e.value).forEach(c=>{const m=e.value[c],V=Array.isArray(m)?m.some(O=>O.meta.touched):m==null?void 0:m.meta.touched;if(!m||V)return;const g=P(i.value,c);re(r,c,E(g))})}return he(t)&&U(t,l=>{a(l,!0)},{deep:!0}),{initialValues:i,originalInitialValues:n,setInitialValues:a}}function qr(e){const r=K({});function t(a){return Array.isArray(a)?a:a?[a]:[]}function i(a,l){if(!l){delete r.value[a];return}r.value[a]=t(l)}function n(a){r.value=I(a).reduce((l,v)=>{const c=a[v];return c&&(l[v]=t(c)),l},{})}return e&&n(e),{errorBag:r,setErrorBag:n,setFieldErrorBag:i}}const Kr=ur({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,r){const t=Ae(e,"initialValues"),i=Ae(e,"validationSchema"),n=Ae(e,"keepValues"),{errors:a,values:l,meta:v,isSubmitting:c,submitCount:m,validate:V,validateField:g,handleReset:O,resetForm:w,handleSubmit:k,setErrors:S,setFieldError:W,setFieldValue:G,setValues:B,setFieldTouched:Z,setTouched:F}=Gr({validationSchema:i.value?i:void 0,initialValues:t,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:n}),N=k((C,{evt:b})=>{Ye(b)&&b.target.submit()},e.onInvalidSubmit),ne=e.onSubmit?k(e.onSubmit,e.onInvalidSubmit):N;function $(C){Me(C)&&C.preventDefault(),O(),typeof r.attrs.onReset=="function"&&r.attrs.onReset()}function le(C,b){return k(typeof C=="function"&&!b?C:b,e.onInvalidSubmit)(C)}function ie(){return{meta:v.value,errors:a.value,values:l,isSubmitting:c.value,submitCount:m.value,validate:V,validateField:g,handleSubmit:le,handleReset:O,submitForm:N,setErrors:S,setFieldError:W,setFieldValue:G,setValues:B,setFieldTouched:Z,setTouched:F,resetForm:w}}return r.expose({setFieldError:W,setErrors:S,setFieldValue:G,setValues:B,setFieldTouched:Z,setTouched:F,resetForm:w,validate:V,validateField:g}),function(){const b=e.as==="form"?e.as:or(e.as),_=br(b,r,ie);if(!e.as)return _;const Y=e.as==="form"?{novalidate:!0}:{};return lr(b,Object.assign(Object.assign(Object.assign({},Y),r.attrs),{onSubmit:ne,onReset:$}),_)}}}),Hr=Kr;export{Hr as F,Yr as u};
