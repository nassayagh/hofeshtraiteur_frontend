import{p as q,ay as K,I as Q,z as W,j as Z,M as tt,l as et,az as st,N as at,A as ot,aA as lt,e as nt,aB as it,m as rt,b as n,a6 as A,r as d,o,_ as f,w as i,a as t,t as e,a8 as y,d as N,V as P,c as m,a4 as C,a5 as S,ae as O,af as H,n as U,X as k,aC as X,h as dt}from"./index-D3DdXZdG.js";import{V as E,_ as ut}from"./BaseBreadcrumb-DYaFDkdC.js";import{u as ct}from"./demands-BJt2E3Si.js";import{u as B}from"./Controller-mKaDTZCd.js";import{f as x,a as J,b as ht}from"./formatters-DCCWVJxZ.js";import{V as M,a as T}from"./VCard-1m9q3-_R.js";import{i as V}from"./VSpacer-DdAD-FGi.js";import{V as j}from"./VTooltip-Bont2L7V.js";import{u as pt}from"./customers-C-cc3von.js";import{V as _t}from"./VAutocomplete-D4CQMLo9.js";import{u as mt}from"./hall-EocmXO1s.js";import{u as ft}from"./payments-BpnBSsoS.js";import{u as $t}from"./paymentMethod-Bk9oicCP.js";import{u as yt}from"./eventType-DLchTHlx.js";import{V as w,a as vt}from"./VRow-Bx-LvG9A.js";import"./VTextField-DLykypQv.js";import"./VAvatar-D6zO78xn.js";const gt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function bt(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${l}`]},[c])}function F(l){const[c,u]=l.split("@");return Array.from({length:u}).map(()=>L(c))}function L(l){let c=[];if(!l)return c;const u=gt[l];if(l!==u){if(l.includes(","))return z(l);if(l.includes("@"))return F(l);u.includes(",")?c=z(u):u.includes("@")?c=F(u):u&&c.push(L(u))}return[bt(l,c)]}function z(l){return l.replace(/\s/g,"").split(",").map(L)}const xt=q({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...K(),...Q(),...W()},"VSkeletonLoader"),D=Z()({name:"VSkeletonLoader",props:xt(),setup(l,c){let{slots:u}=c;const{backgroundColorClasses:h,backgroundColorStyles:$}=tt(et(l,"color")),{dimensionStyles:_}=st(l),{elevationClasses:a}=at(l),{themeClasses:p}=ot(l),{t:s}=lt(),r=nt(()=>L(it(l.type).join(",")));return rt(()=>{var g;const v=!u.default||l.loading;return n("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":l.boilerplate},p.value,h.value,a.value],style:[$.value,v?_.value:{}],"aria-busy":l.boilerplate?void 0:v,"aria-live":l.boilerplate?void 0:"polite","aria-label":l.boilerplate?void 0:s(l.loadingText),role:l.boilerplate?void 0:"alert"},[v?r.value:(g=u.default)==null?void 0:g.call(u)])}),{}}}),wt={class:"d-sm-flex align-center"},kt={class:"text-h4"},St={class:"ml-auto"},Ct={class:"text-subtitle-1 font-weight-medium"},At={class:"text-subtitle-1 font-weight-medium"},Et={class:"text-subtitle-1 font-weight-medium"},Mt={class:"text-subtitle-1 font-weight-medium"},Tt={key:0,class:"text-subtitle-1 font-weight-medium"},Dt={key:1,class:"text-subtitle-1 font-weight-medium"},Vt=["onClick"],Nt={class:"text-no-wrap"},Pt={class:"text-no-wrap"},It={class:"text-no-wrap text-truncate"},Ot={key:0,class:"text-no-wrap text-truncate"},jt={key:1},R=A({__name:"PrestastionTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(0),h=d(0),$=d(!0),_=B(),a=l;return _.fetchStats(a.options).then(p=>{c.value=p.data.data,u.value=p.data.total||0,h.value=p.data.total_amount||0,$.value=!1}),(p,s)=>(o(),f(T,{elevation:"10"},{default:i(()=>[$.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",wt,[t("div",null,[t("h2",kt,e(l.title)+" : "+e(u.value||0)+" | "+e(y(x)(h.value)),1)]),n(V),t("div",St,[n(P,{variant:"tonal",color:"primary",density:"compact",to:`/prestations?status=${l.options.status}`},{default:i(()=>[N(e(p.$t("Voir plus")),1)]),_:1},8,["to"])])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Ct,e(p.$t("Nom")),1),t("th",At,e(p.$t("Date")),1),t("th",Et,e(p.$t("Montant")),1),t("th",Mt,e(p.$t("Type")),1),a.options.statistics!="closed"?(o(),m("th",Tt,e(p.$t("Lieu")),1)):C("",!0),a.options.statistics=="future"?(o(),m("th",Dt,e(p.$t("NB Jour")),1)):C("",!0)])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,r=>(o(),m("tr",{key:r.id,class:"month-item cursor-pointer",onClick:v=>p.$router.push("/prestations/"+r.id)},[t("td",Nt,e(r.customer?`${r.customer.firstname} ${r.customer.lastname}`:"-"),1),t("td",Pt,e(y(J)(r.event_date)),1),t("td",null,e(y(x)(a.options.statistics!="closed"?r.service_total:r.service_total-r.payment_total)),1),t("td",It,[r.eventtype?(o(),f(j,{key:0,text:r.eventtype.name},{activator:i(({props:v})=>[t("span",O(H(v)),e(r.eventtype.name==null||r.eventtype.name.length<30?r.eventtype.name:`${r.eventtype.name.replace(`
`," ").slice(0,29)}...`),17)]),_:2},1032,["text"])):C("",!0)]),a.options.statistics!="closed"?(o(),m("td",Ot,[n(j,{text:r.hall?r.hall.name:""},{activator:i(({props:v})=>[r.hall?(o(),m("span",O(U({key:0},v)),e(r.hall.name.length<30?r.hall.name:`${r.hall.name.replace(`
`," ").slice(0,29)}...`),17)):C("",!0)]),_:2},1032,["text"])])):C("",!0),a.options.statistics=="future"?(o(),m("td",jt,e(r.days_left),1)):C("",!0)],8,Vt))),128))])]),_:1})]),_:1}))]),_:1}))}}),Lt={class:"d-sm-flex align-center"},Rt={class:"text-h4"},Bt={class:"ml-auto"},Jt={class:"text-subtitle-1 font-weight-medium"},Yt={class:"text-subtitle-1 font-weight-medium"},Ft={class:"text-subtitle-1 font-weight-medium"},zt={class:"text-subtitle-1 font-weight-medium"},Gt=["onClick"],Ht={class:"text-no-wrap"},Ut=A({__name:"CustomerTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=d(0),$=pt(),_=l;return $.fetchItems(_.options).then(a=>{c.value=a.data.data,h.value=a.data.total,u.value=!1}),(a,p)=>(o(),f(T,{elevation:"10"},{default:i(()=>[u.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",Lt,[t("div",null,[t("h2",Rt,e(l.title)+" : "+e(h.value),1)]),n(V),t("div",Bt,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/customers"},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1})])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Jt,e(a.$t("Nom")),1),t("th",Yt,e(a.$t("Mail")),1),t("th",Ft,e(a.$t("Tel")),1),t("th",zt,e(a.$t("Prest")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,s=>(o(),m("tr",{onClick:r=>a.$router.push("/customers/"+s.id),key:s.id,class:"month-item cursor-pointer"},[t("td",null,e(`${s.firstname} ${s.lastname}`),1),t("td",null,e(`${s.email}`),1),t("td",null,e(`${s.phone}`),1),t("td",Ht,e(s.prestations_count),1)],8,Gt))),128))])]),_:1})]),_:1}))]),_:1}))}}),Xt={class:"d-sm-flex align-center"},qt={class:"text-h4"},Kt={class:"ml-auto"},Qt={class:"text-subtitle-1 font-weight-medium"},Wt={class:"text-subtitle-1 font-weight-medium"},Zt={class:"text-subtitle-1 font-weight-medium"},te={class:"text-subtitle-1 font-weight-medium"},ee={class:"text-subtitle-1 font-weight-medium"},se={class:"text-subtitle-1 font-weight-medium"},ae={class:"text-subtitle-1 font-weight-medium"},oe=["onClick"],le={class:"text-no-wrap"},G=A({__name:"IncomePerMonthTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){const c=X(),u=new Date().getFullYear(),h=d(u);d(["March","April","May","June"]);const $=d([]),_=d(!0),a=B(),p=l,s=Array.from({length:20},(g,I)=>p.options.section=="future"?u+I:u-I);function r(){a.fetchYearStatistics({...p.options,year:h.value}).then(g=>{$.value=g.data,_.value=!1})}dt(()=>{r()});function v(g){r()}return(g,I)=>(o(),f(T,{elevation:"10"},{default:i(()=>[_.value?(o(),f(D,{key:0,height:"290",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",Xt,[t("div",null,[t("h2",qt,e(l.title)+" : "+e(y(x)($.value.reduce((b,Y)=>parseFloat(b)+Y.total_amount,0))),1)]),n(V),t("div",Kt,[n(_t,{modelValue:h.value,"onUpdate:modelValue":[I[0]||(I[0]=b=>h.value=b),v],items:y(s),variant:"outlined",dense:"",density:"compact","hide-details":""},null,8,["modelValue","items"])])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Qt,e(g.$t("Mois")),1),t("th",Wt,e(g.$t("Reste")),1),t("th",Zt,e(g.$t("Déjà")),1),t("th",te,e(g.$t("CA")),1),t("th",ee,e(g.$t("Cls")),1),t("th",se,e(g.$t("Fait")),1),t("th",ae,e(g.$t("Anlé")),1)])]),t("tbody",null,[(o(!0),m(k,null,S($.value,b=>(o(),m("tr",{key:b.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:Y=>g.$router.push(`/prestations?status=-5&date=${[y(c).format(b.date1,"shortDate"),y(c).format(b.date2,"shortDate")]}`)},e(y(ht)(b.label)),9,oe),t("td",le,e(y(x)(b.amount_left)),1),t("td",null,e(y(x)(b.amount_paid)),1),t("td",null,e(y(x)(b.total_amount)),1),t("td",null,e(b.customers_count||0),1),t("td",null,e(b.prestations_closed||0),1),t("td",null,e(b.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),ne={class:"d-sm-flex align-center"},ie={class:"text-h4"},re={class:"text-subtitle-1 font-weight-medium"},de={class:"text-subtitle-1 font-weight-medium"},ue={class:"text-subtitle-1 font-weight-medium"},ce={class:"text-subtitle-1 font-weight-medium"},he={class:"text-subtitle-1 font-weight-medium"},pe={class:"text-subtitle-1 font-weight-medium"},_e={class:"text-subtitle-1 font-weight-medium"},me=["onClick"],fe={class:"text-no-wrap"},$e=A({__name:"IncomePerYearTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){const c=X();d("March"),d(["March","April","May","June"]);const u=d([]),h=d(!0),$=B(),_=l;return $.fetchYearStatistics(_.options).then(a=>{u.value=a.data,h.value=!1}),(a,p)=>(o(),f(T,{elevation:"10"},{default:i(()=>[h.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",ne,[t("div",null,[t("h2",ie,e(l.title),1)])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",re,e(a.$t("Année")),1),t("th",de,e(a.$t("Reste")),1),t("th",ue,e(a.$t("Déjà")),1),t("th",ce,e(a.$t("CA")),1),t("th",he,e(a.$t("Cls")),1),t("th",pe,e(a.$t("Fait")),1),t("th",_e,e(a.$t("Anlé")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(u.value,s=>(o(),m("tr",{key:s.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:r=>a.$router.push(`/prestations?status=-5&date=${[y(c).format(s.date1,"shortDate"),y(c).format(s.date2,"shortDate")]}`)},e(s.year),9,me),t("td",fe,e(y(x)(s.amount_left)),1),t("td",null,e(y(x)(s.amount_paid)),1),t("td",null,e(y(x)(s.total_amount)),1),t("td",null,e(s.customers_count||0),1),t("td",null,e(s.prestations_closed||0),1),t("td",null,e(s.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),ye={class:"d-sm-flex align-center"},ve={class:"text-h4"},ge={class:"ml-auto"},be={class:"text-subtitle-1 font-weight-medium"},xe={class:"text-subtitle-1 font-weight-medium"},we={class:"text-subtitle-1 font-weight-medium"},ke=["onClick"],Se={class:"text-no-wrap"},Ce={class:"text-no-wrap"},Ae=A({__name:"HallTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=d(0),$=mt(),_=l;return $.fetchItems(_.options).then(a=>{c.value=a.data.data,h.value=a.data.total,u.value=!1}),(a,p)=>(o(),f(T,{elevation:"10"},{default:i(()=>[u.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",ye,[t("div",null,[t("h2",ve,e(l.title)+" : "+e(h.value),1)]),n(V),t("div",ge,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/halls"},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1})])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",be,e(a.$t("Nom")),1),t("th",xe,e(a.$t("Faite")),1),t("th",we,e(a.$t("Venir")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,s=>(o(),m("tr",{key:s.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:r=>a.$router.push(`/prestations?hall=${s.id}`)},e(`${s.name}`),9,ke),t("td",Se,e(s.prestations_past),1),t("td",Ce,e(s.prestations_coming),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ee={class:"d-sm-flex align-center"},Me={class:"text-h4"},Te={class:"ml-auto"},De={class:"text-subtitle-1 font-weight-medium"},Ve={class:"text-subtitle-1 font-weight-medium"},Ne={class:"text-subtitle-1 font-weight-medium"},Pe={class:"text-subtitle-1 font-weight-medium"},Ie=["onClick"],Oe={class:"text-no-wrap"},je={class:"text-no-wrap"},Le={class:"text-no-wrap"},Re={class:"text-no-wrap"},Be=A({__name:"PaymentTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(0),h=d(!0),$=ft(),_=l;return $.fetchStats(_.options).then(a=>{console.log(a.data),c.value=a.data.data.data,u.value=a.data.total_amount||0,h.value=!1}),(a,p)=>(o(),f(T,{elevation:"10"},{default:i(()=>[h.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",Ee,[t("div",null,[t("h2",Me,e(l.title)+" : "+e(y(x)(u.value)),1)]),n(V),t("div",Te,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1})])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",De,e(a.$t("Montant")),1),t("th",Ve,e(a.$t("Client")),1),t("th",Ne,e(a.$t("Prest")),1),t("th",Pe,e(a.$t("Date")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,s=>(o(),m("tr",{key:s.id,class:"month-item cursor-pointer",onClick:r=>a.$router.push("/prestations/"+s.prestation_id)},[t("td",Oe,e(y(x)(s.amount)),1),t("td",je,e(`${s.prestation&&s.prestation.customer?`${s.prestation.customer.firstname} ${s.prestation.customer.lastname}`:""}`),1),t("td",Le,e(`${s.prestation&&s.prestation.eventtype?`${s.prestation.eventtype.name||"-"}`:""}`),1),t("td",Re,e(y(J)(s.payment_date)),1)],8,Ie))),128))])]),_:1})]),_:1}))]),_:1}))}}),Je={class:"d-sm-flex align-center"},Ye={class:"text-h4"},Fe={class:"ml-auto"},ze={class:"text-subtitle-1 font-weight-medium"},Ge={class:"text-subtitle-1 font-weight-medium"},He={class:"text-subtitle-1 font-weight-medium"},Ue=["onClick"],Xe={class:"text-no-wrap"},qe={class:"text-no-wrap"},Ke=A({__name:"PaymentTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=$t(),$=l;return h.fetchItems($.options).then(_=>{c.value=_.data.data,u.value=!1}),(_,a)=>(o(),f(T,{elevation:"10"},{default:i(()=>[u.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",Je,[t("div",null,[t("h2",Ye,e(l.title)+" : "+e(y(x)(c.value.reduce((p,s)=>parseFloat(p)+s.payments_sum_amount,0))),1)]),n(V),t("div",Fe,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:i(()=>[N(e(_.$t("Voir plus")),1)]),_:1})])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ze,e(_.$t("Nom")),1),t("th",Ge,e(_.$t("Montant")),1),t("th",He,e(_.$t("NB Réglements")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,p=>(o(),m("tr",{key:p.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:s=>_.$router.push(`/payments?method=${p.name}`)},e(p.name),9,Ue),t("td",Xe,e(y(x)(p.payments_sum_amount)),1),t("td",qe,e(p.payments_count),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),Qe={class:"d-sm-flex align-center"},We={class:"text-h4"},Ze={class:"ml-auto"},ts={class:"text-subtitle-1 font-weight-medium"},es={class:"text-subtitle-1 font-weight-medium"},ss=["onClick"],as={class:"text-no-wrap"},os=A({__name:"PrestationTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=yt(),$=l,_=d([]),a=new Date().getFullYear();return Array.from({length:4},(p,s)=>a-s),h.fetchItems($.options).then(p=>{c.value=p.data.data;for(let s=0;s<4;s++){const r=new Date().getFullYear()-s;for(let v=0;v<c.value.length;v++)c.value[v][`prestation_${r}`]>0&&_.value.indexOf(r)==-1&&_.value.push(r)}u.value=!1}),(p,s)=>(o(),f(T,{elevation:"10"},{default:i(()=>[u.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",Qe,[t("div",null,[t("h2",We,e(l.title),1)]),n(V),t("div",Ze,[n(P,{variant:"tonal",color:"primary",density:"compact",to:"/event_types"},{default:i(()=>[N(e(p.$t("Voir plus")),1)]),_:1})])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ts,e(p.$t("Nom")),1),(o(!0),m(k,null,S(_.value,r=>(o(),m("th",es,e(r),1))),256))])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,r=>(o(),m("tr",{key:r.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:v=>p.$router.push(`/prestations?event_type=${r.id}`)},e(r.name),9,ss),(o(!0),m(k,null,S(_.value,v=>(o(),m("td",as,e(r[`prestation_${v}`]||0),1))),256))]))),128))])]),_:1})]),_:1}))]),_:1}))}}),ls={class:"d-sm-flex align-center"},ns={class:"text-h4"},is={class:"ml-auto"},rs={class:"text-subtitle-1 font-weight-medium"},ds={class:"text-subtitle-1 font-weight-medium"},us={class:"text-subtitle-1 font-weight-medium"},cs={class:"text-subtitle-1 font-weight-medium"},hs={class:"text-subtitle-1 font-weight-medium"},ps=["onClick"],_s={class:"text-no-wrap"},ms={key:0,class:"text-no-wrap"},fs={class:"text-no-wrap"},$s={class:"text-no-wrap text-truncate"},ys={key:1,class:"text-no-wrap text-truncate"},vs=A({__name:"DemandTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(l){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(0),h=d(!0),$=ct(),_=l;return $.fetchStats(_.options).then(a=>{c.value=a.data.data,u.value=a.data.total||0,h.value=!1}),(a,p)=>(o(),f(T,{elevation:"10"},{default:i(()=>[h.value?(o(),f(D,{key:0,height:"200",type:"table-tbody"})):(o(),f(M,{key:1},{default:i(()=>[t("div",ls,[t("div",null,[t("h2",ns,e(l.title)+" : "+e(u.value||0),1)]),n(V),t("div",is,[n(P,{variant:"tonal",color:"primary",density:"compact",to:`/demands?status=${l.options.status}`},{default:i(()=>[N(e(a.$t("Voir plus")),1)]),_:1},8,["to"])])]),n(E,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",rs,e(a.$t("Nom")),1),t("th",ds,e(a.$t("Date")),1),t("th",us,e(a.$t("Source")),1),t("th",cs,e(a.$t("Type")),1),t("th",hs,e(a.$t("Lieu")),1)])]),t("tbody",null,[(o(!0),m(k,null,S(c.value,s=>(o(),m("tr",{key:s.id,class:"month-item cursor-pointer",onClick:r=>a.$router.push("/demands/"+s.id)},[t("td",_s,e(s.customer?`${s.customer.firstname} ${s.customer.lastname}`:"-"),1),_.options.statistics!="closed"?(o(),m("td",ms,e(y(J)(s.event_date)),1)):C("",!0),t("td",fs,e(s.source),1),t("td",$s,[s.eventtype?(o(),f(j,{key:0,text:s.eventtype.name},{activator:i(({props:r})=>[t("span",O(H(r)),e(s.eventtype.name==null||s.eventtype.name.length<30?s.eventtype.name:`${s.eventtype.name.replace(`
`," ").slice(0,29)}...`),17)]),_:2},1032,["text"])):C("",!0)]),_.options.statistics!="closed"?(o(),m("td",ys,[n(j,{text:s.hall?s.hall.name:""},{activator:i(({props:r})=>[s.hall?(o(),m("span",O(U({key:0},r)),e(s.hall.name.length<30?s.hall.name:`${s.hall.name.replace(`
`," ").slice(0,29)}...`),17)):C("",!0)]),_:2},1032,["text"])])):C("",!0)],8,ps))),128))])]),_:1})]),_:1}))]),_:1}))}}),js=A({__name:"Dashboard",setup(l){const c=d({title:"Dashboard"}),u=d([]);return(h,$)=>(o(),m(k,null,[n(ut,{title:c.value.title,breadcrumbs:u.value},null,8,["title","breadcrumbs"]),n(vt,{class:"dashboard"},{default:i(()=>[n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(R,{class:"h-100",title:h.$t("PRESTATION A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"future",status:1}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(R,{class:"h-100",title:h.$t("PRESTATION DEJA PASSE"),options:{per_page:10,order_by:"event_date",direction:"DESC",statistics:"past",status:3}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(Ut,{class:"h-100",title:h.$t("CLIENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"past",status:1}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[n(vs,{class:"h-100",title:h.$t("DEMANDES RECENTS"),options:{per_page:10,order_by:"event_date",direction:"asc",statistics:"past",status:1}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(G,{class:"h-100",title:h.$t("CA/MOIS DÉJÀ PASSÉ"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"past"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(G,{class:"h-100",title:h.$t("CA/MOIS A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"future"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n($e,{class:"h-100",title:h.$t("CA A L’ANNEE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"year_income"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(Ae,{class:"h-100",title:h.$t("LISTE SALLES"),options:{per_page:10,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(Be,{class:"h-100",title:h.$t("REGLEMENTS"),options:{per_page:10,order_by:"payment_date",direction:"DESC",statistics:"dashboard"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(R,{class:"h-100",title:h.$t("REG. EN ATTENTE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"closed"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(Ke,{class:"h-100",title:h.$t("TYPE REGLEMENTS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),n(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[n(os,{class:"h-100",title:h.$t("TYPE PRESTATIONS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1})]),_:1})],64))}});export{js as default};
