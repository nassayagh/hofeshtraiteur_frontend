import{u as qe}from"./demands-BCpI2BCm.js";import{u as Ge}from"./eventType-BmYSahMU.js";import{u as Je}from"./customers-DHLsUk1K.js";import{_ as We}from"./BaseBreadcrumb-D4W4jOVF.js";import{r as Ie}from"./validators-BPi-vT8z.js";import{f as Ue}from"./formatters-Dv1Ro_l4.js";import{p as Xe,ay as Ye,az as Ze,j as Qe,aA as el,r as d,s as ne,u as Te,e as w,aB as ll,g as ae,Y as Ae,aC as al,m as tl,b as l,X as re,n as L,ac as Fe,aD as ol,aE as ul,d as x,aF as nl,aG as rl,aH as sl,aI as il,a6 as dl,aJ as ml,av as vl,aK as b,h as cl,q as fl,Z as Ee,o as ce,c as Re,w as o,a8 as N,V as U,t as k,a as De,a4 as we,_ as Le}from"./index-BVT76tkN.js";import{F as pl,V as Vl}from"./vee-validate.esm-3obUiQbF.js";import{_ as gl}from"./DemandsDashboard.vue_vue_type_script_setup_true_lang-wu4jpM58.js";import{_ as bl}from"./ValidateDemand.vue_vue_type_script_setup_true_lang-h1sevRgQ.js";import{V as y,a as Se}from"./VRow-DqmqQvj3.js";import{V as yl}from"./VDataTableServer-DkmkJeGh.js";import{V as hl}from"./VToolbar-LPmnHrvV.js";import{m as kl,u as Cl,V as T}from"./VTextField-DNAm_YFN.js";import{m as xl,u as Dl,V as wl,a as Sl,b as $e,c as fe}from"./VDialog-Ffo6rHHt.js";import{V as Me}from"./VLocaleProvider-8-zKc0lR.js";import{V as Ne}from"./VDatePicker-BW1SRjt-.js";import{V as le}from"./VSpacer-CxuDBXtu.js";import{V as Oe,a as Be,b as $l,c as je}from"./VCard-BKFM0s_d.js";import{V as _l}from"./VContainer-B3MfChVv.js";import{V as Pl}from"./VAutocomplete-BzbtuMC5.js";import{m as Il,u as Ul}from"./filter-Dzf0L7R9.js";import{h as Tl,t as pe,g as Al,e as Fl,c as Ke}from"./VMenu-DdtHvTp4.js";import{V as El}from"./VAvatar-QwZ81rXr.js";import{V as He}from"./VChip-Cey96Mfc.js";import{V as Rl}from"./VTextarea-DBu6cste.js";import{V as ze}from"./VTooltip-DtgaC8kd.js";import"./createSimpleFunctional-C9UvAl1a.js";import"./hall-DtM8w-ui.js";import"./VTable-BnDrA0bq.js";import"./index-DvK9tNy3.js";import"./VSheet-DICkUtXN.js";function Ll(a,h,O){if(h==null)return a;if(Array.isArray(h))throw new Error("Multiple matches is not implemented");return typeof h=="number"&&~h?l(re,null,[l("span",{class:"v-combobox__unmask"},[a.substr(0,h)]),l("span",{class:"v-combobox__mask"},[a.substr(h,O)]),l("span",{class:"v-combobox__unmask"},[a.substr(h+O)])]):a}const Ml=Xe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Il({filterKeys:["title"]}),...xl({hideNoData:!0,returnObject:!0}),...Ye(kl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:!1})},"VCombobox"),Nl=Qe()({name:"VCombobox",props:Ml(),emits:{"update:focused":a=>!0,"update:modelValue":a=>!0,"update:search":a=>!0,"update:menu":a=>!0},setup(a,h){var u;let{emit:O,slots:c}=h;const{t:te}=el(),F=d(),A=ne(!1),E=ne(!0),D=ne(!1),G=d(),J=d(),S=Te(a,"menu"),V=w({get:()=>S.value,set:e=>{var s;S.value&&!e&&((s=G.value)!=null&&s.ΨopenChildren)||(S.value=e)}}),p=ne(-1);let W=!1;const X=w(()=>{var e;return(e=F.value)==null?void 0:e.color}),B=w(()=>V.value?a.closeText:a.openText),{items:oe,transformIn:j,transformOut:Y}=Tl(a),{textColorClasses:ue,textColorStyles:se}=ll(X),v=Te(a,"modelValue",[],e=>j(sl(e)),e=>{const s=Y(e);return a.multiple?s:s[0]??null}),R=Cl(),$=ne(a.multiple?"":((u=v.value[0])==null?void 0:u.title)??""),i=w({get:()=>$.value,set:e=>{var s;if($.value=e??"",a.multiple||(v.value=[pe(a,e)]),e&&a.multiple&&((s=a.delimiters)!=null&&s.length)){const f=e.split(new RegExp(`(?:${a.delimiters.join("|")})+`));f.length>1&&(f.forEach(t=>{t=t.trim(),t&&I(pe(a,t))}),$.value="")}e||(p.value=-1),E.value=!e}}),K=w(()=>typeof a.counterValue=="function"?a.counterValue(v.value):typeof a.counterValue=="number"?a.counterValue:a.multiple?v.value.length:i.value.length);ae($,e=>{W?Ae(()=>W=!1):A.value&&!V.value&&(V.value=!0),O("update:search",e)}),ae(v,e=>{var s;a.multiple||($.value=((s=e[0])==null?void 0:s.title)??"")});const{filteredItems:M,getMatches:m}=Ul(a,oe,()=>E.value?"":i.value),P=w(()=>a.hideSelected?M.value.filter(e=>!v.value.some(s=>s.value===e.value)):M.value),z=w(()=>v.value.map(e=>e.value)),Z=w(()=>{var s;return(a.autoSelectFirst===!0||a.autoSelectFirst==="exact"&&i.value===((s=P.value[0])==null?void 0:s.title))&&P.value.length>0&&!E.value&&!D.value}),Q=w(()=>a.hideNoData&&!P.value.length||a.readonly||(R==null?void 0:R.isReadonly.value)),ee=d(),{onListScroll:ie,onListKeydown:Ve}=Dl(ee,F);function ge(e){W=!0,a.openOnClear&&(V.value=!0)}function be(){Q.value||(V.value=!0)}function ye(e){Q.value||(A.value&&(e.preventDefault(),e.stopPropagation()),V.value=!V.value)}function he(e){var t;if(il(e)||a.readonly||R!=null&&R.isReadonly.value)return;const s=F.value.selectionStart,f=v.value.length;if((p.value>-1||["Enter","ArrowDown","ArrowUp"].includes(e.key))&&e.preventDefault(),["Enter","ArrowDown"].includes(e.key)&&(V.value=!0),["Escape"].includes(e.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(e.key)&&(Z.value&&["Enter","Tab"].includes(e.key)&&I(M.value[0]),E.value=!0),e.key==="ArrowDown"&&Z.value&&((t=ee.value)==null||t.focus("next")),!!a.multiple){if(["Backspace","Delete"].includes(e.key)){if(p.value<0){e.key==="Backspace"&&!i.value&&(p.value=f-1);return}const n=p.value,r=v.value[p.value];r&&!r.props.disabled&&I(r,!1),p.value=n>=f-1?f-2:n}if(e.key==="ArrowLeft"){if(p.value<0&&s>0)return;const n=p.value>-1?p.value-1:f-1;v.value[n]?p.value=n:(p.value=-1,F.value.setSelectionRange(i.value.length,i.value.length))}if(e.key==="ArrowRight"){if(p.value<0)return;const n=p.value+1;v.value[n]?p.value=n:(p.value=-1,F.value.setSelectionRange(0,0))}e.key==="Enter"&&i.value&&(I(pe(a,i.value)),i.value="")}}function ke(){var e;A.value&&(E.value=!0,(e=F.value)==null||e.focus())}function I(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(a.multiple){const f=v.value.findIndex(n=>a.valueComparator(n.value,e.value)),t=s??!~f;if(~f){const n=t?[...v.value,e]:[...v.value];n.splice(f,1),v.value=n}else t&&(v.value=[...v.value,e]);a.clearOnSelect&&(i.value="")}else{const f=s!==!1;v.value=f?[e]:[],$.value=f?e.title:"",Ae(()=>{V.value=!1,E.value=!0})}}function de(e){A.value=!0,setTimeout(()=>{D.value=!0})}function Ce(e){D.value=!1}function xe(e){(e==null||e===""&&!a.multiple)&&(v.value=[])}return ae(A,(e,s)=>{e||e===s||(p.value=-1,V.value=!1,Z.value&&!D.value&&!v.value.some(f=>{let{value:t}=f;return t===P.value[0].value})?I(P.value[0]):a.multiple&&i.value&&I(pe(a,i.value)))}),ae(V,()=>{if(!a.hideSelected&&V.value&&v.value.length){const e=P.value.findIndex(s=>v.value.some(f=>a.valueComparator(f.value,s.value)));al&&window.requestAnimationFrame(()=>{var s;e>=0&&((s=J.value)==null||s.scrollToIndex(e))})}}),ae(P,(e,s)=>{A.value&&(!e.length&&a.hideNoData&&(V.value=!1),!s.length&&e.length&&(V.value=!0))}),tl(()=>{const e=!!(a.chips||c.chip),s=!!(!a.hideNoData||P.value.length||c["prepend-item"]||c["append-item"]||c["no-data"]),f=v.value.length>0,t=T.filterProps(a);return l(T,L({ref:F},t,{modelValue:i.value,"onUpdate:modelValue":[n=>i.value=n,xe],focused:A.value,"onUpdate:focused":n=>A.value=n,validationValue:v.externalValue,counterValue:K.value,dirty:f,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!a.chips,"v-combobox--selection-slot":!!c.selection,"v-combobox--selecting-index":p.value>-1,[`v-combobox--${a.multiple?"multiple":"single"}`]:!0},a.class],style:a.style,readonly:a.readonly,placeholder:f?void 0:a.placeholder,"onClick:clear":ge,"onMousedown:control":be,onKeydown:he}),{...c,default:()=>l(re,null,[l(Al,L({ref:G,modelValue:V.value,"onUpdate:modelValue":n=>V.value=n,activator:"parent",contentClass:"v-combobox__content",disabled:Q.value,eager:a.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:a.transition,onAfterLeave:ke},a.menuProps),{default:()=>[s&&l(Fl,L({ref:ee,selected:z.value,selectStrategy:a.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:Ve,onFocusin:de,onFocusout:Ce,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:a.itemColor??a.color},a.listProps),{default:()=>{var n,r,g;return[(n=c["prepend-item"])==null?void 0:n.call(c),!P.value.length&&!a.hideNoData&&(((r=c["no-data"])==null?void 0:r.call(c))??l(Ke,{title:te(a.noDataText)},null)),l(wl,{ref:J,renderless:!0,items:P.value},{default:_=>{var Pe;let{item:C,index:H,itemRef:q}=_;const _e=L(C.props,{ref:q,key:H,active:Z.value&&H===0?!0:void 0,onClick:()=>I(C,null)});return((Pe=c.item)==null?void 0:Pe.call(c,{item:C,index:H,props:_e}))??l(Ke,_e,{prepend:me=>{let{isSelected:ve}=me;return l(re,null,[a.multiple&&!a.hideSelected?l(Sl,{key:C.value,modelValue:ve,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&l(El,{image:C.props.prependAvatar},null),C.props.prependIcon&&l(Fe,{icon:C.props.prependIcon},null)])},title:()=>{var me,ve;return E.value?C.title:Ll(C.title,(me=m(C))==null?void 0:me.title,((ve=i.value)==null?void 0:ve.length)??0)}})}}),(g=c["append-item"])==null?void 0:g.call(c)]}})]}),v.value.map((n,r)=>{function g(q){q.stopPropagation(),q.preventDefault(),I(n,!1)}const _={"onClick:close":g,onMousedown(q){q.preventDefault(),q.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=e?!!c.chip:!!c.selection,H=C?ol(e?c.chip({item:n,index:r,props:_}):c.selection({item:n,index:r})):void 0;if(!(C&&!H))return l("div",{key:n.value,class:["v-combobox__selection",r===p.value&&["v-combobox__selection--selected",ue.value]],style:r===p.value?se.value:{}},[e?c.chip?l(ul,{key:"chip-defaults",defaults:{VChip:{closable:a.closableChips,size:"small",text:n.title}}},{default:()=>[H]}):l(He,L({key:"chip",closable:a.closableChips,size:"small",text:n.title,disabled:n.props.disabled},_),null):H??l("span",{class:"v-combobox__selection-text"},[n.title,a.multiple&&r<v.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[x(",")])])])})]),"append-inner":function(){var _;for(var n=arguments.length,r=new Array(n),g=0;g<n;g++)r[g]=arguments[g];return l(re,null,[(_=c["append-inner"])==null?void 0:_.call(c,...r),(!a.hideNoData||a.items.length)&&a.menuIcon?l(Fe,{class:"v-combobox__menu-icon",icon:a.menuIcon,onMousedown:ye,onClick:nl,"aria-label":te(B.value),title:te(B.value)},null):void 0])}})}),rl({isFocused:A,isPristine:E,menu:V,search:i,selectionIndex:p,filteredItems:M,select:I},F)}}),Ol={class:"text-h5"},Bl={key:0,class:"mt-2"},jl={class:"d-flex align-center"},ka=dl({__name:"List",setup(a){const h=ml(),O=d(),c=vl(),te=Ge(),F=Je(),A=d({title:b("Gestion des demandes")}),E=d([{text:b("Dashboard"),disabled:!1,href:"/"},{text:b("Gestion des demandes"),disabled:!0,href:"#"}]),D=d([]),G=d([]),J=d([]),S=qe();cl(()=>{I(),de(),Ce()}),d(!1);const V=d(!1),p=d(!1);d(!1),d(!1),d(!1),d(""),d(),d(!1);const W=d(null);d(null),d(null),d(null);const X=d(!1),B=d(!1);d();const oe=d(10),j=d(2),Y=d(2),ue=d(0),se=d(!1),v=d(!1);d(null);const R=d("");d(["primary","secondary","error","success","warning"]);const $=d([{key:"id",order:"DESC"}]);d(0),d({total:0,validated:0,unvalidated:0});const i=d({search:null,status:null,date:null,event_type:null}),K=d({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"id",order:"DESC"}]}),M=d(-1),m=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),P=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),z=d(!1),Z=d([{title:b("ID"),align:"start",key:"id",sortable:!0},{title:b("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:b("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:b("Email"),align:"start",key:"customer.email",sortable:!1},{title:b("Téléphone"),align:"start",key:"customer.phone",sortable:!1},{title:b("Prestation"),align:"start",key:"event_type"},{title:b("Statut"),align:"start",key:"status"},{title:b("Source"),align:"start",key:"source"},{title:b("Date de l'événement "),key:"event_date"},{title:b("Heure"),key:"reception_start_time"},{title:b("Lieu"),key:"event_location"},{title:b("Convives"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),Q=w(()=>i.value.date&&i.value.date.length>0?h.format(i.value.date[0],"shortDate")+" - "+h.format(i.value.date[i.value.date.length-1],"shortDate"):null),ee=w(()=>m.value.event_date?h.format(m.value.event_date,"shortDate"):null);w(()=>S.demands.data.filter(u=>u.email.toLowerCase().includes(R.value.toLowerCase())));function ie(u){V.value=!1,M.value=D.value.indexOf(u),m.value=Object.assign({},u),v.value=!0}function Ve(u){m.value=u,z.value=!0}function ge(){v.value=!1,setTimeout(()=>{m.value=Object.assign({customer:{}},P.value),M.value=-1},300)}function be(u,{setErrors:e}){var s;(s=O.value)==null||s.validate().then(({valid:f})=>{f&&(p.value=!0,S.addItem(m.value).then(t=>{if(t.data.error){e({apiError:t.data.message});return}m.value.id!=null?Object.assign(D.value[M.value],t.data):D.value.unshift(t.data),p.value=!1,v.value=!1,m.value={customer:{}},c.showSuccess(b("Demande enregistrée avec succès")),de(),S.fetchStatistics()}).catch(t=>{p.value=!1,e({apiError:t})}).then(()=>{p.value=!1,e({apiError:null})}))})}function ye(){S.deleteItem(m.value.id);const u=D.value.findIndex(e=>e.id==m.value.id);D.value.splice(u,1),z.value=!1,c.showSuccess(b("Demande supprimée avec succès")),S.fetchStatistics()}const he=w(()=>M.value===-1?"Nouvelle demande":"Modifier la demande"),ke=w(()=>i.value.date&&i.value.date.length?i.value.date.length>1?[h.format(i.value.date[0],"shortDate"),h.format(i.value.date[i.value.date.length-1],"shortDate")]:[h.format(i.value.date[0],"shortDate"),h.format(i.value.date[0],"shortDate")]:null);function I(){try{clearTimeout(W.value)}catch{}W.value=setTimeout(()=>{V.value=!0;let u="id",e="desc";console.log($.value),$.value.length>0&&(u=$.value[0].key,e=$.value[0].order),S.fetchItems({term:R.value,paginate:oe.value,current_page:j.value,direction:e,order_by:u,page:K.value.page,per_page:K.value.itemsPerPage,...i.value,date:ke.value}).then(s=>{if(s.data){const{data:f,current_page:t,next_page_url:n,total:r,per_page:g,to:_,last_page:C}=s.data;D.value=f,Y.value=C,ue.value=r}}).catch(s=>{console.error(s)}).then(()=>{V.value=!1})},1e3)}function de(){te.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(u=>{if(u.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:n,to:r,last_page:g}=u.data;G.value=e}}).catch(u=>{console.error(u)}).then(()=>{})}function Ce(){F.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(u=>{if(u.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:n,to:r,last_page:g}=u.data;J.value=e.map(_=>({..._,name:_.firstname+" "+_.lastname+" ("+(_.is_customer?b("Client"):b("Prospect"))+")"}))}}).catch(u=>{console.error(u)}).then(()=>{})}ae([R,K,i],()=>{I()},{deep:!0}),fl(()=>{j.value>Y.value&&(j.value=Y.value)});function xe(u){if(u){const e=J.value.find(s=>s.id==u);e&&(m.value.customer=e)}}return(u,e)=>{const s=Ee("PencilIcon"),f=Ee("TrashIcon");return ce(),Re(re,null,[l(We,{title:A.value.title,breadcrumbs:E.value},null,8,["title","breadcrumbs"]),l(Se,null,{default:o(()=>[l(y,{cols:"12"},{default:o(()=>[l(gl)]),_:1}),l(y,{cols:"12"},{default:o(()=>[l(yl,{class:"border rounded-md",headers:Z.value,loading:V.value,items:D.value,"multi-sort":!1,"items-per-page":oe.value,"onUpdate:itemsPerPage":e[33]||(e[33]=t=>oe.value=t),"items-per-page-text":u.$t("Articles par page"),options:K.value,"onUpdate:options":e[34]||(e[34]=t=>K.value=t),"sort-by":$.value,"onUpdate:sortBy":e[35]||(e[35]=t=>$.value=t),page:j.value,"onUpdate:page":e[36]||(e[36]=t=>j.value=t),"items-length":ue.value,"onUpdate:itemsLength":e[37]||(e[37]=t=>ue.value=t),"show-select":!1,"loading-text":u.$t("Chargement des éléments"),"no-data-text":u.$t("Pas de données"),"no-results-text":u.$t("Aucun résultat"),onPageCount:e[38]||(e[38]=t=>Y.value=t)},{top:o(()=>[l(hl,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:o(()=>[l(Se,null,{default:o(()=>[l(y,null,{default:o(()=>[l(T,{density:"compact",modelValue:i.value.search,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.search=t),placeholder:u.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(y,null,{default:o(()=>[l($e,{density:"compact",modelValue:i.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.event_type=t),placeholder:u.$t("Prestation"),items:G.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,null,{default:o(()=>[l($e,{density:"compact",modelValue:i.value.status,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.status=t),placeholder:u.$t("Statut"),items:N(S).statusesList,"item-value":"id","item-title":"label",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,null,{default:o(()=>[l($e,{density:"compact",modelValue:i.value.source,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.source=t),placeholder:u.$t("Source"),items:["admin","site"],clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),l(y,null,{default:o(()=>[l(fe,{ref:"dialog",modelValue:X.value,"onUpdate:modelValue":e[9]||(e[9]=t=>X.value=t),"return-value":i.value.date,"onUpdate:returnValue":e[10]||(e[10]=t=>i.value.date=t),persistent:"",width:"290px"},{activator:o(({props:t})=>[l(T,L({modelValue:Q.value,"onUpdate:modelValue":e[4]||(e[4]=n=>Q.value=n),"prepend-inner-icon":"bx-calendar"},t,{density:"compact",placeholder:u.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[5]||(e[5]=n=>i.value.date=null)}),null,16,["modelValue","placeholder"])]),default:o(({isActive:t})=>[l(Me,{locale:"fr"},{default:o(()=>[l(Ne,{modelValue:i.value.date,"onUpdate:modelValue":e[8]||(e[8]=n=>i.value.date=n),"hide-header":"",multiple:"range"},{actions:o(()=>[l(U,{color:"primary",onClick:e[6]||(e[6]=n=>X.value=!1)},{default:o(()=>[x(k(u.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[7]||(e[7]=n=>X.value=!1)},{default:o(()=>[x(k(u.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(y,{class:""},{default:o(()=>[l(fe,{modelValue:v.value,"onUpdate:modelValue":e[30]||(e[30]=t=>v.value=t),"max-width":"600px"},{activator:o(({props:t})=>[l(U,L({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[11]||(e[11]=n=>ie({customer:{},source:"admin"})),dark:""},t),{default:o(()=>[x(k(u.$t("Ajouter une demande")),1)]),_:2},1040)]),default:o(()=>[l(Oe,null,{default:o(()=>[l(Be,{class:"pa-4 bg-secondary"},{default:o(()=>[De("span",Ol,k(he.value),1)]),_:1}),l(N(pl),{ref_key:"refForm",ref:O,modelValue:se.value,"onUpdate:modelValue":e[29]||(e[29]=t=>se.value=t),onSubmit:be},{default:o(({errors:t,isSubmitting:n})=>[l($l,null,{default:o(()=>[l(_l,{class:"px-0"},{default:o(()=>[l(Se,null,{default:o(()=>[l(y,{cols:"12"},{default:o(()=>[l(Pl,{modelValue:m.value.customer_id,"onUpdate:modelValue":[e[12]||(e[12]=r=>m.value.customer_id=r),xe],placeholder:u.$t("Client"),items:J.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.customer.firstname,"onUpdate:modelValue":e[13]||(e[13]=r=>m.value.customer.firstname=r),rules:[N(Ie)],label:u.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.customer.lastname,"onUpdate:modelValue":e[14]||(e[14]=r=>m.value.customer.lastname=r),rules:[N(Ie)],label:u.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.customer.email,"onUpdate:modelValue":e[15]||(e[15]=r=>m.value.customer.email=r),label:u.$t("Email")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.customer.phone,"onUpdate:modelValue":e[16]||(e[16]=r=>m.value.customer.phone=r),label:u.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(Nl,{modelValue:m.value.event_type,"onUpdate:modelValue":e[17]||(e[17]=r=>m.value.event_type=r),placeholder:u.$t("Type d'événement"),items:G.value.map(r=>r.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(fe,{ref:"dialogDemandDate",modelValue:B.value,"onUpdate:modelValue":e[23]||(e[23]=r=>B.value=r),"return-value":m.value.event_date,"onUpdate:returnValue":e[24]||(e[24]=r=>m.value.event_date=r),persistent:"",width:"290px"},{activator:o(({props:r})=>[l(T,L({modelValue:ee.value,"onUpdate:modelValue":e[18]||(e[18]=g=>ee.value=g),"prepend-inner-icon":"bx-calendar"},r,{placeholder:u.$t("Date de la demande"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[19]||(e[19]=g=>m.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:o(({isActive:r})=>[l(Me,{locale:"fr"},{default:o(()=>[l(Ne,{modelValue:m.value.event_date,"onUpdate:modelValue":e[22]||(e[22]=g=>m.value.event_date=g),"hide-header":""},{actions:o(()=>[l(U,{color:"primary",onClick:e[20]||(e[20]=g=>B.value=!1)},{default:o(()=>[x(k(u.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[21]||(e[21]=g=>B.value=!1)},{default:o(()=>[x(k(u.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.reception_start_time,"onUpdate:modelValue":e[25]||(e[25]=r=>m.value.reception_start_time=r),"hide-details":"",label:u.$t("La réception se déroulera plutôt")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.event_location,"onUpdate:modelValue":e[26]||(e[26]=r=>m.value.event_location=r),"hide-details":"",label:u.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:o(()=>[l(T,{modelValue:m.value.number_people,"onUpdate:modelValue":e[27]||(e[27]=r=>m.value.number_people=r),"hide-details":"",type:"number",label:u.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12"},{default:o(()=>[l(Rl,{modelValue:m.value.comment,"onUpdate:modelValue":e[28]||(e[28]=r=>m.value.comment=r),"hide-details":"",label:u.$t("Description de la demande")},null,8,["modelValue","label"])]),_:1})]),_:1}),t.apiError?(ce(),Re("div",Bl,[l(Vl,{color:"error"},{default:o(()=>[x(k(t.apiError),1)]),_:2},1024)])):we("",!0)]),_:2},1024)]),_:2},1024),l(je,null,{default:o(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:ge},{default:o(()=>[x(k(u.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",loading:p.value,type:"submit"},{default:o(()=>[x(k(u.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(le)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(fe,{modelValue:z.value,"onUpdate:modelValue":e[32]||(e[32]=t=>z.value=t),"max-width":"500px"},{default:o(()=>[l(Oe,null,{default:o(()=>[l(Be,{class:"text-h5 text-center py-6"},{default:o(()=>[x(k(u.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(je,null,{default:o(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:e[31]||(e[31]=t=>z.value=!1)},{default:o(()=>[x(k(u.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",dark:"",onClick:ye},{default:o(()=>[x(k(u.$t("OK")),1)]),_:1}),l(le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.demand_date":o(({item:t})=>[x(k(N(Ue)(t.demand_date)),1)]),"item.event_date":o(({item:t})=>[x(k(N(Ue)(t.event_date)),1)]),"item.status":o(({item:t})=>[l(He,{color:N(S).statusColor(t.status),size:"small",label:""},{default:o(()=>[x(k(N(S).statusText(t.status)),1)]),_:2},1032,["color"])]),"item.actions":o(({index:t,item:n})=>[De("div",jl,[n.prestation?we("",!0):(ce(),Le(bl,{key:0,density:"compact",modelValue:D.value[t],"onUpdate:modelValue":r=>D.value[t]=r},null,8,["modelValue","onUpdate:modelValue"])),l(U,{density:"compact",color:"primary",class:"mx-2",variant:"outlined",to:"/demands/"+n.id},{default:o(()=>[x(k(u.$t("Voir")),1)]),_:2},1032,["to"]),l(ze,{text:u.$t("Modifier")},{activator:o(({props:r})=>[l(U,L({icon:"",flat:"",onClick:g=>ie(n)},r),{default:o(()=>[l(s,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),n.prestation==null?(ce(),Le(ze,{key:1,text:u.$t("Supprimer")},{activator:o(({props:r})=>[l(U,L({icon:"",flat:"",onClick:g=>Ve(n)},r),{default:o(()=>[l(f,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):we("",!0)])]),"no-data":o(()=>[De("span",null,k(u.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{ka as default};
