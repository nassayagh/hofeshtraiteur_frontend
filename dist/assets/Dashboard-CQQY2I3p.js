import{p as q,ay as K,I as Q,z as W,j as Z,M as tt,l as et,az as st,N as at,A as ot,aA as lt,e as nt,aB as it,m as rt,b as l,a6 as C,r as d,o as n,_ as f,w as i,a as t,t as e,a8 as y,d as V,V as N,c as m,a4 as P,a5 as S,ae as O,af as H,n as U,X as k,aC as X,h as dt}from"./index-CyDPjvhG.js";import{V as A,_ as ut}from"./BaseBreadcrumb-DHrsxMF1.js";import{u as ct}from"./demands-DdqTb5sQ.js";import{u as B}from"./Controller-DbdfW8V9.js";import{f as x,a as Y,b as ht}from"./formatters-DCCWVJxZ.js";import{V as E,a as M}from"./VCard-Cq26GZkA.js";import{a as D}from"./VSpacer-Bb4zFbSh.js";import{V as j}from"./VTooltip-DXSps8b4.js";import{u as pt}from"./customers-DfvB46NP.js";import{V as _t}from"./VAutocomplete-DhRFIrST.js";import{u as mt}from"./hall-CHrvEoUF.js";import{u as ft}from"./payments-Bg80O_Mc.js";import{u as $t}from"./paymentMethod-D9Ig0JYF.js";import{u as yt}from"./eventType-CRg-ULnk.js";import{V as w,a as vt}from"./VRow-B-WDQiBW.js";import"./VAvatar-B6iclkLS.js";import"./VSelect-CxOuPc92.js";import"./VTextField-BOa6WVOz.js";import"./VMenu-C2-kO3b7.js";import"./filter-B-JLXdZ1.js";const gt={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function bt(o){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return l("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${o}`]},[c])}function F(o){const[c,u]=o.split("@");return Array.from({length:u}).map(()=>L(c))}function L(o){let c=[];if(!o)return c;const u=gt[o];if(o!==u){if(o.includes(","))return z(o);if(o.includes("@"))return F(o);u.includes(",")?c=z(u):u.includes("@")?c=F(u):u&&c.push(L(u))}return[bt(o,c)]}function z(o){return o.replace(/\s/g,"").split(",").map(L)}const xt=q({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...K(),...Q(),...W()},"VSkeletonLoader"),T=Z()({name:"VSkeletonLoader",props:xt(),setup(o,c){let{slots:u}=c;const{backgroundColorClasses:h,backgroundColorStyles:$}=tt(et(o,"color")),{dimensionStyles:_}=st(o),{elevationClasses:a}=at(o),{themeClasses:p}=ot(o),{t:s}=lt(),r=nt(()=>L(it(o.type).join(",")));return rt(()=>{var g;const v=!u.default||o.loading;return l("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":o.boilerplate},p.value,h.value,a.value],style:[$.value,v?_.value:{}],"aria-busy":o.boilerplate?void 0:v,"aria-live":o.boilerplate?void 0:"polite","aria-label":o.boilerplate?void 0:s(o.loadingText),role:o.boilerplate?void 0:"alert"},[v?r.value:(g=u.default)==null?void 0:g.call(u)])}),{}}}),wt={class:"d-sm-flex align-center"},kt={class:"text-h4"},St={class:"ml-auto"},Ct={class:"text-subtitle-1 font-weight-medium"},At={class:"text-subtitle-1 font-weight-medium"},Et={class:"text-subtitle-1 font-weight-medium"},Mt={class:"text-subtitle-1 font-weight-medium"},Tt={key:0,class:"text-subtitle-1 font-weight-medium"},Dt=["onClick"],Vt={class:"text-no-wrap"},Nt={class:"text-no-wrap"},Pt={class:"text-no-wrap text-truncate"},It={key:0,class:"text-no-wrap text-truncate"},R=C({__name:"PrestastionTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(0),h=d(0),$=d(!0),_=B(),a=o;return _.fetchStats(a.options).then(p=>{c.value=p.data.data,u.value=p.data.total||0,h.value=p.data.total_amount||0,$.value=!1}),(p,s)=>(n(),f(M,{elevation:"10"},{default:i(()=>[$.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",wt,[t("div",null,[t("h2",kt,e(o.title)+" : "+e(u.value||0)+" | "+e(y(x)(h.value)),1)]),l(D),t("div",St,[l(N,{variant:"tonal",color:"primary",density:"compact",to:`/prestations?status=${o.options.status}`},{default:i(()=>[V(e(p.$t("Voir plus")),1)]),_:1},8,["to"])])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Ct,e(p.$t("Nom")),1),t("th",At,e(p.$t("Date")),1),t("th",Et,e(p.$t("Montant")),1),t("th",Mt,e(p.$t("Type")),1),a.options.statistics!="closed"?(n(),m("th",Tt,e(p.$t("Lieu")),1)):P("",!0)])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,r=>(n(),m("tr",{key:r.id,class:"month-item cursor-pointer",onClick:v=>p.$router.push("/prestations/"+r.id)},[t("td",Vt,e(r.customer?`${r.customer.firstname} ${r.customer.lastname}`:"-"),1),t("td",Nt,e(y(Y)(r.event_date)),1),t("td",null,e(y(x)(a.options.statistics!="closed"?r.service_total:r.service_total-r.payment_total)),1),t("td",Pt,[l(j,{text:r.event_type},{activator:i(({props:v})=>[t("span",O(H(v)),e(r.event_type==null||r.event_type.length<30?r.event_type:`${r.event_type.replace(`
`," ").slice(0,29)}...`),17)]),_:2},1032,["text"])]),a.options.statistics!="closed"?(n(),m("td",It,[l(j,{text:r.hall?r.hall.name:""},{activator:i(({props:v})=>[r.hall?(n(),m("span",O(U({key:0},v)),e(r.hall.name.length<30?r.hall.name:`${r.hall.name.replace(`
`," ").slice(0,29)}...`),17)):P("",!0)]),_:2},1032,["text"])])):P("",!0)],8,Dt))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ot={class:"d-sm-flex align-center"},jt={class:"text-h4"},Lt={class:"ml-auto"},Rt={class:"text-subtitle-1 font-weight-medium"},Bt={class:"text-subtitle-1 font-weight-medium"},Yt={class:"text-subtitle-1 font-weight-medium"},Jt={class:"text-subtitle-1 font-weight-medium"},Ft=["onClick"],zt={class:"text-no-wrap"},Gt=C({__name:"CustomerTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=d(0),$=pt(),_=o;return $.fetchItems(_.options).then(a=>{c.value=a.data.data,h.value=a.data.total,u.value=!1}),(a,p)=>(n(),f(M,{elevation:"10"},{default:i(()=>[u.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",Ot,[t("div",null,[t("h2",jt,e(o.title)+" : "+e(h.value),1)]),l(D),t("div",Lt,[l(N,{variant:"tonal",color:"primary",density:"compact",to:"/customers"},{default:i(()=>[V(e(a.$t("Voir plus")),1)]),_:1})])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Rt,e(a.$t("Nom")),1),t("th",Bt,e(a.$t("Mail")),1),t("th",Yt,e(a.$t("Tel")),1),t("th",Jt,e(a.$t("Prest")),1)])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,s=>(n(),m("tr",{onClick:r=>a.$router.push("/customers/"+s.id),key:s.id,class:"month-item cursor-pointer"},[t("td",null,e(`${s.firstname} ${s.lastname}`),1),t("td",null,e(`${s.email}`),1),t("td",null,e(`${s.phone}`),1),t("td",zt,e(s.prestations_count),1)],8,Ft))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ht={class:"d-sm-flex align-center"},Ut={class:"text-h4"},Xt={class:"ml-auto"},qt={class:"text-subtitle-1 font-weight-medium"},Kt={class:"text-subtitle-1 font-weight-medium"},Qt={class:"text-subtitle-1 font-weight-medium"},Wt={class:"text-subtitle-1 font-weight-medium"},Zt={class:"text-subtitle-1 font-weight-medium"},te={class:"text-subtitle-1 font-weight-medium"},ee={class:"text-subtitle-1 font-weight-medium"},se=["onClick"],ae={class:"text-no-wrap"},G=C({__name:"IncomePerMonthTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){const c=X(),u=new Date().getFullYear(),h=d(u);d(["March","April","May","June"]);const $=d([]),_=d(!0),a=B(),p=o,s=Array.from({length:20},(g,I)=>p.options.section=="future"?u+I:u-I);function r(){a.fetchYearStatistics({...p.options,year:h.value}).then(g=>{$.value=g.data,_.value=!1})}dt(()=>{r()});function v(g){r()}return(g,I)=>(n(),f(M,{elevation:"10"},{default:i(()=>[_.value?(n(),f(T,{key:0,height:"290",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",Ht,[t("div",null,[t("h2",Ut,e(o.title)+" : "+e(y(x)($.value.reduce((b,J)=>parseFloat(b)+J.total_amount,0))),1)]),l(D),t("div",Xt,[l(_t,{modelValue:h.value,"onUpdate:modelValue":[I[0]||(I[0]=b=>h.value=b),v],items:y(s),variant:"outlined",dense:"",density:"compact","hide-details":""},null,8,["modelValue","items"])])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",qt,e(g.$t("Mois")),1),t("th",Kt,e(g.$t("Reste")),1),t("th",Qt,e(g.$t("Déjà")),1),t("th",Wt,e(g.$t("CA")),1),t("th",Zt,e(g.$t("Cls")),1),t("th",te,e(g.$t("Fait")),1),t("th",ee,e(g.$t("Anlé")),1)])]),t("tbody",null,[(n(!0),m(k,null,S($.value,b=>(n(),m("tr",{key:b.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:J=>g.$router.push(`/prestations?status=-5&date=${[y(c).format(b.date1,"shortDate"),y(c).format(b.date2,"shortDate")]}`)},e(y(ht)(b.label)),9,se),t("td",ae,e(y(x)(b.amount_left)),1),t("td",null,e(y(x)(b.amount_paid)),1),t("td",null,e(y(x)(b.total_amount)),1),t("td",null,e(b.customers_count||0),1),t("td",null,e(b.prestations_closed||0),1),t("td",null,e(b.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),oe={class:"d-sm-flex align-center"},le={class:"text-h4"},ne={class:"text-subtitle-1 font-weight-medium"},ie={class:"text-subtitle-1 font-weight-medium"},re={class:"text-subtitle-1 font-weight-medium"},de={class:"text-subtitle-1 font-weight-medium"},ue={class:"text-subtitle-1 font-weight-medium"},ce={class:"text-subtitle-1 font-weight-medium"},he={class:"text-subtitle-1 font-weight-medium"},pe=["onClick"],_e={class:"text-no-wrap"},me=C({__name:"IncomePerYearTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){const c=X();d("March"),d(["March","April","May","June"]);const u=d([]),h=d(!0),$=B(),_=o;return $.fetchYearStatistics(_.options).then(a=>{u.value=a.data,h.value=!1}),(a,p)=>(n(),f(M,{elevation:"10"},{default:i(()=>[h.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",oe,[t("div",null,[t("h2",le,e(o.title),1)])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ne,e(a.$t("Année")),1),t("th",ie,e(a.$t("Reste")),1),t("th",re,e(a.$t("Déjà")),1),t("th",de,e(a.$t("CA")),1),t("th",ue,e(a.$t("Cls")),1),t("th",ce,e(a.$t("Fait")),1),t("th",he,e(a.$t("Anlé")),1)])]),t("tbody",null,[(n(!0),m(k,null,S(u.value,s=>(n(),m("tr",{key:s.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:r=>a.$router.push(`/prestations?status=-5&date=${[y(c).format(s.date1,"shortDate"),y(c).format(s.date2,"shortDate")]}`)},e(s.year),9,pe),t("td",_e,e(y(x)(s.amount_left)),1),t("td",null,e(y(x)(s.amount_paid)),1),t("td",null,e(y(x)(s.total_amount)),1),t("td",null,e(s.customers_count||0),1),t("td",null,e(s.prestations_closed||0),1),t("td",null,e(s.prestations_cancelled||0),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),fe={class:"d-sm-flex align-center"},$e={class:"text-h4"},ye={class:"ml-auto"},ve={class:"text-subtitle-1 font-weight-medium"},ge={class:"text-subtitle-1 font-weight-medium"},be={class:"text-subtitle-1 font-weight-medium"},xe=["onClick"],we={class:"text-no-wrap"},ke={class:"text-no-wrap"},Se=C({__name:"HallTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=d(0),$=mt(),_=o;return $.fetchItems(_.options).then(a=>{c.value=a.data.data,h.value=a.data.total,u.value=!1}),(a,p)=>(n(),f(M,{elevation:"10"},{default:i(()=>[u.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",fe,[t("div",null,[t("h2",$e,e(o.title)+" : "+e(h.value),1)]),l(D),t("div",ye,[l(N,{variant:"tonal",color:"primary",density:"compact",to:"/halls"},{default:i(()=>[V(e(a.$t("Voir plus")),1)]),_:1})])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ve,e(a.$t("Nom")),1),t("th",ge,e(a.$t("Faite")),1),t("th",be,e(a.$t("Venir")),1)])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,s=>(n(),m("tr",{key:s.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:r=>a.$router.push(`/prestations?hall=${s.id}`)},e(`${s.name}`),9,xe),t("td",we,e(s.prestations_past),1),t("td",ke,e(s.prestations_coming),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ce={class:"d-sm-flex align-center"},Ae={class:"text-h4"},Ee={class:"ml-auto"},Me={class:"text-subtitle-1 font-weight-medium"},Te={class:"text-subtitle-1 font-weight-medium"},De={class:"text-subtitle-1 font-weight-medium"},Ve={class:"text-subtitle-1 font-weight-medium"},Ne=["onClick"],Pe={class:"text-no-wrap"},Ie={class:"text-no-wrap"},Oe={class:"text-no-wrap"},je={class:"text-no-wrap"},Le=C({__name:"PaymentTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(0),h=d(!0),$=ft(),_=o;return $.fetchStats(_.options).then(a=>{console.log(a.data),c.value=a.data.data.data,u.value=a.data.total_amount||0,h.value=!1}),(a,p)=>(n(),f(M,{elevation:"10"},{default:i(()=>[h.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",Ce,[t("div",null,[t("h2",Ae,e(o.title)+" : "+e(y(x)(u.value)),1)]),l(D),t("div",Ee,[l(N,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:i(()=>[V(e(a.$t("Voir plus")),1)]),_:1})])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Me,e(a.$t("Montant")),1),t("th",Te,e(a.$t("Client")),1),t("th",De,e(a.$t("Prest")),1),t("th",Ve,e(a.$t("Date")),1)])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,s=>(n(),m("tr",{key:s.id,class:"month-item cursor-pointer",onClick:r=>a.$router.push("/prestations/"+s.prestation_id)},[t("td",Pe,e(y(x)(s.amount)),1),t("td",Ie,e(`${s.prestation&&s.prestation.customer?`${s.prestation.customer.firstname} ${s.prestation.customer.lastname}`:""}`),1),t("td",Oe,e(`${s.prestation?`${s.prestation.event_type||"-"}`:""}`),1),t("td",je,e(y(Y)(s.payment_date)),1)],8,Ne))),128))])]),_:1})]),_:1}))]),_:1}))}}),Re={class:"d-sm-flex align-center"},Be={class:"text-h4"},Ye={class:"ml-auto"},Je={class:"text-subtitle-1 font-weight-medium"},Fe={class:"text-subtitle-1 font-weight-medium"},ze={class:"text-subtitle-1 font-weight-medium"},Ge=["onClick"],He={class:"text-no-wrap"},Ue={class:"text-no-wrap"},Xe=C({__name:"PaymentTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=$t(),$=o;return h.fetchItems($.options).then(_=>{c.value=_.data.data,u.value=!1}),(_,a)=>(n(),f(M,{elevation:"10"},{default:i(()=>[u.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",Re,[t("div",null,[t("h2",Be,e(o.title)+" : "+e(y(x)(c.value.reduce((p,s)=>parseFloat(p)+s.payments_sum_amount,0))),1)]),l(D),t("div",Ye,[l(N,{variant:"tonal",color:"primary",density:"compact",to:"/payments"},{default:i(()=>[V(e(_.$t("Voir plus")),1)]),_:1})])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",Je,e(_.$t("Nom")),1),t("th",Fe,e(_.$t("Montant")),1),t("th",ze,e(_.$t("NB Réglements")),1)])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,p=>(n(),m("tr",{key:p.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:s=>_.$router.push(`/payments?method=${p.name}`)},e(p.name),9,Ge),t("td",He,e(y(x)(p.payments_sum_amount)),1),t("td",Ue,e(p.payments_count),1)]))),128))])]),_:1})]),_:1}))]),_:1}))}}),qe={class:"d-sm-flex align-center"},Ke={class:"text-h4"},Qe={class:"ml-auto"},We={class:"text-subtitle-1 font-weight-medium"},Ze={class:"text-subtitle-1 font-weight-medium"},ts=["onClick"],es={class:"text-no-wrap"},ss=C({__name:"PrestationTypeTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(!0),h=yt(),$=o,_=d([]),a=new Date().getFullYear();return Array.from({length:4},(p,s)=>a-s),h.fetchItems($.options).then(p=>{c.value=p.data.data;for(let s=0;s<4;s++){const r=new Date().getFullYear()-s;for(let v=0;v<c.value.length;v++)c.value[v][`prestation_${r}`]>0&&_.value.indexOf(r)==-1&&_.value.push(r)}u.value=!1}),(p,s)=>(n(),f(M,{elevation:"10"},{default:i(()=>[u.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",qe,[t("div",null,[t("h2",Ke,e(o.title),1)]),l(D),t("div",Qe,[l(N,{variant:"tonal",color:"primary",density:"compact",to:"/event_types"},{default:i(()=>[V(e(p.$t("Voir plus")),1)]),_:1})])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",We,e(p.$t("Nom")),1),(n(!0),m(k,null,S(_.value,r=>(n(),m("th",Ze,e(r),1))),256))])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,r=>(n(),m("tr",{key:r.id,class:"month-item"},[t("td",{class:"text-no-wrap cursor-pointer",onClick:v=>p.$router.push(`/prestations?event_type=${r.name}`)},e(r.name),9,ts),(n(!0),m(k,null,S(_.value,v=>(n(),m("td",es,e(r[`prestation_${v}`]||0),1))),256))]))),128))])]),_:1})]),_:1}))]),_:1}))}}),as={class:"d-sm-flex align-center"},os={class:"text-h4"},ls={class:"ml-auto"},ns={class:"text-subtitle-1 font-weight-medium"},is={class:"text-subtitle-1 font-weight-medium"},rs={class:"text-subtitle-1 font-weight-medium"},ds={class:"text-subtitle-1 font-weight-medium"},us={class:"text-subtitle-1 font-weight-medium"},cs=["onClick"],hs={class:"text-no-wrap"},ps={key:0,class:"text-no-wrap"},_s={class:"text-no-wrap"},ms={class:"text-no-wrap text-truncate"},fs={key:1,class:"text-no-wrap text-truncate"},$s=C({__name:"DemandTable",props:{title:{type:String,default:""},options:{type:Object,default:()=>({per_page:"10",order_by:"id",direction:"DESC"})}},setup(o){d("March"),d(["March","April","May","June"]);const c=d([]),u=d(0),h=d(!0),$=ct(),_=o;return $.fetchStats(_.options).then(a=>{c.value=a.data.data,u.value=a.data.total||0,h.value=!1}),(a,p)=>(n(),f(M,{elevation:"10"},{default:i(()=>[h.value?(n(),f(T,{key:0,height:"200",type:"table-tbody"})):(n(),f(E,{key:1},{default:i(()=>[t("div",as,[t("div",null,[t("h2",os,e(o.title)+" : "+e(u.value||0),1)]),l(D),t("div",ls,[l(N,{variant:"tonal",color:"primary",density:"compact",to:`/demands?status=${o.options.status}`},{default:i(()=>[V(e(a.$t("Voir plus")),1)]),_:1},8,["to"])])]),l(A,{density:"compact"},{default:i(()=>[t("thead",null,[t("tr",null,[t("th",ns,e(a.$t("Nom")),1),t("th",is,e(a.$t("Date")),1),t("th",rs,e(a.$t("Source")),1),t("th",ds,e(a.$t("Type")),1),t("th",us,e(a.$t("Lieu")),1)])]),t("tbody",null,[(n(!0),m(k,null,S(c.value,s=>(n(),m("tr",{key:s.id,class:"month-item cursor-pointer",onClick:r=>a.$router.push("/demands/"+s.id)},[t("td",hs,e(s.customer?`${s.customer.firstname} ${s.customer.lastname}`:"-"),1),_.options.statistics!="closed"?(n(),m("td",ps,e(y(Y)(s.event_date)),1)):P("",!0),t("td",_s,e(s.source),1),t("td",ms,[l(j,{text:s.event_type},{activator:i(({props:r})=>[t("span",O(H(r)),e(s.event_type==null||s.event_type.length<30?s.event_type:`${s.event_type.replace(`
`," ").slice(0,29)}...`),17)]),_:2},1032,["text"])]),_.options.statistics!="closed"?(n(),m("td",fs,[l(j,{text:s.hall?s.hall.name:""},{activator:i(({props:r})=>[s.hall?(n(),m("span",O(U({key:0},r)),e(s.hall.name.length<30?s.hall.name:`${s.hall.name.replace(`
`," ").slice(0,29)}...`),17)):P("",!0)]),_:2},1032,["text"])])):P("",!0)],8,cs))),128))])]),_:1})]),_:1}))]),_:1}))}}),Ls=C({__name:"Dashboard",setup(o){const c=d({title:"Dashboard"}),u=d([]);return(h,$)=>(n(),m(k,null,[l(ut,{title:c.value.title,breadcrumbs:u.value},null,8,["title","breadcrumbs"]),l(vt,{class:"dashboard"},{default:i(()=>[l(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[l(R,{class:"h-100",title:h.$t("PRESTATION A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"future",status:1}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[l(R,{class:"h-100",title:h.$t("PRESTATION DEJA PASSE"),options:{per_page:10,order_by:"event_date",direction:"DESC",statistics:"past",status:3}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[l(Gt,{class:"h-100",title:h.$t("CLIENTS"),options:{per_page:10,order_by:"created_at",direction:"DESC",statistics:"past",status:1}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"6",xxl:"6"},{default:i(()=>[l($s,{class:"h-100",title:h.$t("DEMANDES RECENTS"),options:{per_page:10,order_by:"event_date",direction:"asc",statistics:"past",status:1}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(G,{class:"h-100",title:h.$t("CA/MOIS DÉJÀ PASSÉ"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"past"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(G,{class:"h-100",title:h.$t("CA/MOIS A VENIR"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"month_income",section:"future"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(me,{class:"h-100",title:h.$t("CA A L’ANNEE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"year_income"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(Se,{class:"h-100",title:h.$t("LISTE SALLES"),options:{per_page:10,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(Le,{class:"h-100",title:h.$t("REGLEMENTS"),options:{per_page:10,order_by:"payment_date",direction:"DESC",statistics:"dashboard"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(R,{class:"h-100",title:h.$t("REG. EN ATTENTE"),options:{per_page:10,order_by:"event_date",direction:"ASC",statistics:"closed"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(Xe,{class:"h-100",title:h.$t("TYPE REGLEMENTS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1}),l(w,{cols:"12",md:"6",lg:"6",xl:"4",xxl:"4"},{default:i(()=>[l(ss,{class:"h-100",title:h.$t("TYPE PRESTATIONS"),options:{per_page:1e3,order_by:"name",direction:"ASC",statistics:"dashboard"}},null,8,["title"])]),_:1})]),_:1})],64))}});export{Ls as default};
