import{u as Je}from"./demands-Cyboid_1.js";import{u as We}from"./eventType-BHrr9HVE.js";import{u as Xe}from"./customers-DMpjK90p.js";import{u as Ye}from"./hall-1_kRcPty.js";import{_ as Ze}from"./BaseBreadcrumb-Bp39IOCQ.js";import{r as Ae}from"./validators-BPi-vT8z.js";import{a as Ee}from"./formatters-ChhyeSK0.js";import{p as Qe,ay as el,az as ll,j as al,aA as tl,r as s,s as se,u as Fe,e as w,aB as ol,g as ae,Y as Re,aC as nl,m as ul,b as l,X as me,n as E,ac as Me,aD as rl,aE as sl,d as D,aF as il,aG as dl,aH as ml,aI as vl,a6 as cl,aJ as fl,av as pl,aK as k,h as Vl,q as gl,Z as Ie,o as ee,c as Le,w as u,V as I,t as _,a as ie,a8 as G,_ as ke,a4 as Ue,ae as Oe,af as Ne}from"./index-D4NqtLTp.js";import{F as bl}from"./vee-validate.esm-tmMXiorV.js";import{_ as yl}from"./ValidateDemand.vue_vue_type_script_setup_true_lang-Df3zvUEl.js";import{V as C,a as Te}from"./VRow-DWLkePA4.js";import{V as hl}from"./VDataTableServer-DZ465ET8.js";import{V as kl}from"./VToolbar-CN4GSA_V.js";import{m as Cl,u as _l,V as U}from"./VTextField-Bt8H8ul5.js";import{m as xl,u as $l,V as Dl,a as wl,b as Ce}from"./VSelect-aUsnZRPj.js";import{V as _e}from"./VDialog-C8GPX9E5.js";import{V as Be}from"./VLocaleProvider-CFb7282C.js";import{V as je}from"./VDatePicker-CwBYc65f.js";import{V as Ge,a as le}from"./VSpacer-lO7MNm1A.js";import{a as Ke,b as ze,V as Sl,c as He}from"./VCard-DA9krIf3.js";import{V as Pl}from"./VContainer-B1iLqQHs.js";import{V as Il}from"./VAutocomplete-DDopvPbQ.js";import{m as Ul,u as Tl}from"./filter-N7bs83nJ.js";import{h as Al,t as xe,g as El,e as Fl,c as qe}from"./VMenu-qMil_YxV.js";import{V as Rl}from"./VAvatar-DumI1WKs.js";import{V as Ml}from"./VTextarea-DwvnE-P8.js";import{V as Ll}from"./VAlert-D6dSeqbA.js";import{V as de}from"./VTooltip-s-EtZT8E.js";import"./VSheet-F9cQmJJd.js";function Ol(t,x,j){if(x==null)return t;if(Array.isArray(x))throw new Error("Multiple matches is not implemented");return typeof x=="number"&&~x?l(me,null,[l("span",{class:"v-combobox__unmask"},[t.substr(0,x)]),l("span",{class:"v-combobox__mask"},[t.substr(x,j)]),l("span",{class:"v-combobox__unmask"},[t.substr(x+j)])]):t}const Nl=Qe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Ul({filterKeys:["title"]}),...xl({hideNoData:!0,returnObject:!0}),...el(Cl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ll({transition:!1})},"VCombobox"),Bl=al()({name:"VCombobox",props:Nl(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,x){var ge;let{emit:j,slots:p}=x;const{t:te}=tl(),F=s(),T=se(!1),R=se(!0),J=se(!1),S=s(),W=s(),K=Fe(t,"menu"),b=w({get:()=>K.value,set:o=>{var a;K.value&&!o&&((a=S.value)!=null&&a.ΨopenChildren)||(K.value=o)}}),c=se(-1);let N=!1;const z=w(()=>{var o;return(o=F.value)==null?void 0:o.color}),oe=w(()=>b.value?t.closeText:t.openText),{items:X,transformIn:Y,transformOut:ne}=Al(t),{textColorClasses:H,textColorStyles:Z}=ol(z),m=Fe(t,"modelValue",[],o=>Y(ml(o)),o=>{const a=ne(o);return t.multiple?a:a[0]??null}),M=_l(),P=se(t.multiple?"":((ge=m.value[0])==null?void 0:ge.title)??""),h=w({get:()=>P.value,set:o=>{var a;if(P.value=o??"",t.multiple||(m.value=[xe(t,o)]),o&&t.multiple&&((a=t.delimiters)!=null&&a.length)){const e=o.split(new RegExp(`(?:${t.delimiters.join("|")})+`));e.length>1&&(e.forEach(V=>{V=V.trim(),V&&A(xe(t,V))}),P.value="")}o||(c.value=-1),R.value=!o}}),B=w(()=>typeof t.counterValue=="function"?t.counterValue(m.value):typeof t.counterValue=="number"?t.counterValue:t.multiple?m.value.length:h.value.length);ae(P,o=>{N?Re(()=>N=!1):T.value&&!b.value&&(b.value=!0),j("update:search",o)}),ae(m,o=>{var a;t.multiple||(P.value=((a=o[0])==null?void 0:a.title)??"")});const{filteredItems:v,getMatches:q}=Tl(t,X,()=>R.value?"":h.value),$=w(()=>t.hideSelected?v.value.filter(o=>!m.value.some(a=>a.value===o.value)):v.value),d=w(()=>m.value.map(o=>o.value)),Q=w(()=>{var a;return(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&h.value===((a=$.value[0])==null?void 0:a.title))&&$.value.length>0&&!R.value&&!J.value}),L=w(()=>t.hideNoData&&!$.value.length||t.readonly||(M==null?void 0:M.isReadonly.value)),ue=s(),{onListScroll:ve,onListKeydown:ce}=$l(ue,F);function fe(o){N=!0,t.openOnClear&&(b.value=!0)}function $e(){L.value||(b.value=!0)}function De(o){L.value||(T.value&&(o.preventDefault(),o.stopPropagation()),b.value=!b.value)}function we(o){var V;if(vl(o)||t.readonly||M!=null&&M.isReadonly.value)return;const a=F.value.selectionStart,e=m.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(o.key))&&o.preventDefault(),["Enter","ArrowDown"].includes(o.key)&&(b.value=!0),["Escape"].includes(o.key)&&(b.value=!1),["Enter","Escape","Tab"].includes(o.key)&&(Q.value&&["Enter","Tab"].includes(o.key)&&A(v.value[0]),R.value=!0),o.key==="ArrowDown"&&Q.value&&((V=ue.value)==null||V.focus("next")),!!t.multiple){if(["Backspace","Delete"].includes(o.key)){if(c.value<0){o.key==="Backspace"&&!h.value&&(c.value=e-1);return}const i=c.value,g=m.value[c.value];g&&!g.props.disabled&&A(g,!1),c.value=i>=e-1?e-2:i}if(o.key==="ArrowLeft"){if(c.value<0&&a>0)return;const i=c.value>-1?c.value-1:e-1;m.value[i]?c.value=i:(c.value=-1,F.value.setSelectionRange(h.value.length,h.value.length))}if(o.key==="ArrowRight"){if(c.value<0)return;const i=c.value+1;m.value[i]?c.value=i:(c.value=-1,F.value.setSelectionRange(0,0))}o.key==="Enter"&&h.value&&(A(xe(t,h.value)),h.value="")}}function Se(){var o;T.value&&(R.value=!0,(o=F.value)==null||o.focus())}function A(o){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.multiple){const e=m.value.findIndex(i=>t.valueComparator(i.value,o.value)),V=a??!~e;if(~e){const i=V?[...m.value,o]:[...m.value];i.splice(e,1),m.value=i}else V&&(m.value=[...m.value,o]);t.clearOnSelect&&(h.value="")}else{const e=a!==!1;m.value=e?[o]:[],P.value=e?o.title:"",Re(()=>{b.value=!1,R.value=!0})}}function Pe(o){T.value=!0,setTimeout(()=>{J.value=!0})}function pe(o){J.value=!1}function Ve(o){(o==null||o===""&&!t.multiple)&&(m.value=[])}return ae(T,(o,a)=>{o||o===a||(c.value=-1,b.value=!1,Q.value&&!J.value&&!m.value.some(e=>{let{value:V}=e;return V===$.value[0].value})?A($.value[0]):t.multiple&&h.value&&A(xe(t,h.value)))}),ae(b,()=>{if(!t.hideSelected&&b.value&&m.value.length){const o=$.value.findIndex(a=>m.value.some(e=>t.valueComparator(e.value,a.value)));nl&&window.requestAnimationFrame(()=>{var a;o>=0&&((a=W.value)==null||a.scrollToIndex(o))})}}),ae($,(o,a)=>{T.value&&(!o.length&&t.hideNoData&&(b.value=!1),!a.length&&o.length&&(b.value=!0))}),ul(()=>{const o=!!(t.chips||p.chip),a=!!(!t.hideNoData||$.value.length||p["prepend-item"]||p["append-item"]||p["no-data"]),e=m.value.length>0,V=U.filterProps(t);return l(U,E({ref:F},V,{modelValue:h.value,"onUpdate:modelValue":[i=>h.value=i,Ve],focused:T.value,"onUpdate:focused":i=>T.value=i,validationValue:m.externalValue,counterValue:B.value,dirty:e,class:["v-combobox",{"v-combobox--active-menu":b.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!p.selection,"v-combobox--selecting-index":c.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:t.readonly,placeholder:e?void 0:t.placeholder,"onClick:clear":fe,"onMousedown:control":$e,onKeydown:we}),{...p,default:()=>l(me,null,[l(El,E({ref:S,modelValue:b.value,"onUpdate:modelValue":i=>b.value=i,activator:"parent",contentClass:"v-combobox__content",disabled:L.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:Se},t.menuProps),{default:()=>[a&&l(Fl,E({ref:ue,selected:d.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:i=>i.preventDefault(),onKeydown:ce,onFocusin:Pe,onFocusout:pe,onScrollPassive:ve,tabindex:"-1","aria-live":"polite",color:t.itemColor??t.color},t.listProps),{default:()=>{var i,g,n;return[(i=p["prepend-item"])==null?void 0:i.call(p),!$.value.length&&!t.hideNoData&&(((g=p["no-data"])==null?void 0:g.call(p))??l(qe,{title:te(t.noDataText)},null)),l(Dl,{ref:W,renderless:!0,items:$.value},{default:f=>{var be;let{item:r,index:y,itemRef:O}=f;const re=E(r.props,{ref:O,key:y,active:Q.value&&y===0?!0:void 0,onClick:()=>A(r,null)});return((be=p.item)==null?void 0:be.call(p,{item:r,index:y,props:re}))??l(qe,re,{prepend:ye=>{let{isSelected:he}=ye;return l(me,null,[t.multiple&&!t.hideSelected?l(wl,{key:r.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,r.props.prependAvatar&&l(Rl,{image:r.props.prependAvatar},null),r.props.prependIcon&&l(Me,{icon:r.props.prependIcon},null)])},title:()=>{var ye,he;return R.value?r.title:Ol(r.title,(ye=q(r))==null?void 0:ye.title,((he=h.value)==null?void 0:he.length)??0)}})}}),(n=p["append-item"])==null?void 0:n.call(p)]}})]}),m.value.map((i,g)=>{function n(O){O.stopPropagation(),O.preventDefault(),A(i,!1)}const f={"onClick:close":n,onMousedown(O){O.preventDefault(),O.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},r=o?!!p.chip:!!p.selection,y=r?rl(o?p.chip({item:i,index:g,props:f}):p.selection({item:i,index:g})):void 0;if(!(r&&!y))return l("div",{key:i.value,class:["v-combobox__selection",g===c.value&&["v-combobox__selection--selected",H.value]],style:g===c.value?Z.value:{}},[o?p.chip?l(sl,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:i.title}}},{default:()=>[y]}):l(Ge,E({key:"chip",closable:t.closableChips,size:"small",text:i.title,disabled:i.props.disabled},f),null):y??l("span",{class:"v-combobox__selection-text"},[i.title,t.multiple&&g<m.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[D(",")])])])})]),"append-inner":function(){var f;for(var i=arguments.length,g=new Array(i),n=0;n<i;n++)g[n]=arguments[n];return l(me,null,[(f=p["append-inner"])==null?void 0:f.call(p,...g),(!t.hideNoData||t.items.length)&&t.menuIcon?l(Me,{class:"v-combobox__menu-icon",icon:t.menuIcon,onMousedown:De,onClick:il,"aria-label":te(oe.value),title:te(oe.value)},null):void 0])}})}),dl({isFocused:T,isPristine:R,menu:b,search:h,selectionIndex:c,filteredItems:v,select:A},F)}}),jl={class:"text-h5"},Kl={key:0,class:"mt-2"},zl={class:"d-flex align-center"},ha=cl({__name:"List",setup(t){const x=fl(),j=s(),p=pl(),te=We(),F=Xe(),T=Ye(),R=s({title:k("Gestion des demandes")}),J=s([{text:k("Dashboard"),disabled:!1,href:"/"},{text:k("Gestion des demandes"),disabled:!0,href:"#"}]),S=s([]),W=s([]),K=s([]),b=s([]),c=Je();Vl(()=>{pe(),Ve(),ge(),T.fetchItems({per_page:1e3}).then(a=>{b.value=a.data.data})}),s(!1);const N=s(!1),z=s(!1);s(!1),s(!1),s(!1),s(""),s(),s(!1);const oe=s(null);s(null),s(null),s(null);const X=s(!1),Y=s(!1);s();const ne=s(100),H=s(2),Z=s(2),m=s(0),M=s(!1),P=s(!1);s(null);const h=s("");s(["primary","secondary","error","success","warning"]);const B=s([{key:"id",order:"DESC"}]);s(0),s({total:0,validated:0,unvalidated:0});const v=s({search:null,status:null,date:null,event_type:null}),q=s({itemsPerPage:100,rowsPerPage:100,page:1,sortDesc:[!0],sortBy:[{key:"id",order:"DESC"}]}),$=s(-1),d=s({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),Q=s({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),L=s(!1),ue=s([{title:k("ID"),align:"start",key:"id",sortable:!0},{title:k("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:k("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:k("Email"),align:"start",key:"customer.email",sortable:!1},{title:k("Tél."),align:"start",key:"customer.phone",sortable:!1},{title:k("Prest."),align:"start",key:"event_type"},{title:k("Source"),align:"start",key:"source"},{title:k("Date 'évén"),key:"event_date"},{title:k("Moment"),key:"reception_period"},{title:k("Heure"),key:"reception_start_time"},{title:k("Lieu"),key:"event_location"},{title:k("Salle"),key:"hall.name"},{title:k("Conv"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),ve=w(()=>v.value.date&&v.value.date.length>0?x.format(v.value.date[0],"shortDate")+" - "+x.format(v.value.date[v.value.date.length-1],"shortDate"):null),ce=w(()=>d.value.event_date?x.format(d.value.event_date,"shortDate"):null);w(()=>c.demands.data.filter(a=>a.email.toLowerCase().includes(h.value.toLowerCase())));function fe(a){N.value=!1,$.value=S.value.indexOf(a),d.value=Object.assign({},a),P.value=!0}function $e(a){d.value=a,L.value=!0}function De(){P.value=!1,setTimeout(()=>{d.value=Object.assign({customer:{}},Q.value),$.value=-1},300)}function we(a,{setErrors:e}){var V;(V=j.value)==null||V.validate().then(({valid:i})=>{i&&(z.value=!0,c.addItem(d.value).then(g=>{if(g.data.error){e({apiError:g.data.message});return}d.value.id!=null?Object.assign(S.value[$.value],g.data):S.value.unshift(g.data),z.value=!1,P.value=!1,d.value={customer:{}},p.showSuccess(k("Demande enregistrée avec succès")),Ve(),c.fetchStatistics()}).catch(g=>{z.value=!1,e({apiError:g})}).then(()=>{z.value=!1,e({apiError:null})}))})}function Se(){c.deleteItem(d.value.id);const a=S.value.findIndex(e=>e.id==d.value.id);S.value.splice(a,1),L.value=!1,p.showSuccess(k("Demande supprimée avec succès")),c.fetchStatistics()}const A=w(()=>$.value===-1?"Nouvelle demande":"Modifier la demande"),Pe=w(()=>v.value.date&&v.value.date.length?v.value.date.length>1?[x.format(v.value.date[0],"shortDate"),x.format(v.value.date[v.value.date.length-1],"shortDate")]:[x.format(v.value.date[0],"shortDate"),x.format(v.value.date[0],"shortDate")]:null);function pe(){try{clearTimeout(oe.value)}catch{}oe.value=setTimeout(()=>{N.value=!0;let a="id",e="desc";console.log(B.value),B.value.length>0&&(a=B.value[0].key,e=B.value[0].order),c.fetchItems({term:h.value,paginate:ne.value,current_page:H.value,direction:e,order_by:a,page:q.value.page,per_page:q.value.itemsPerPage,...v.value,date:Pe.value}).then(V=>{if(V.data){const{data:i,current_page:g,next_page_url:n,total:f,per_page:r,to:y,last_page:O}=V.data;S.value=i.map(re=>{const be=new Date(re.event_date);return{...re,event_date:be}}),Z.value=O,m.value=f}}).catch(V=>{console.error(V)}).then(()=>{N.value=!1})},1e3)}function Ve(){te.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(a=>{if(a.data){const{data:e,current_page:V,next_page_url:i,total:g,per_page:n,to:f,last_page:r}=a.data;W.value=e}}).catch(a=>{console.error(a)}).then(()=>{})}function ge(){F.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(a=>{if(a.data){const{data:e,current_page:V,next_page_url:i,total:g,per_page:n,to:f,last_page:r}=a.data;K.value=e.map(y=>({...y,name:y.firstname+" "+y.lastname+" ("+(y.is_customer?k("Client"):k("Prospect"))+")"}))}}).catch(a=>{console.error(a)}).then(()=>{})}ae([h,q,v],()=>{pe()},{deep:!0}),gl(()=>{H.value>Z.value&&(H.value=Z.value)});function o(a){if(a){const e=K.value.find(V=>V.id==a);e&&(d.value.customer=e)}}return(a,e)=>{const V=Ie("EyeIcon"),i=Ie("PencilIcon"),g=Ie("TrashIcon");return ee(),Le(me,null,[l(Ze,{title:`${R.value.title}(${m.value})`,breadcrumbs:J.value},null,8,["title","breadcrumbs"]),l(Te,null,{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(hl,{class:"border rounded-md",headers:ue.value,loading:N.value,items:S.value,"multi-sort":!1,"items-per-page":ne.value,"onUpdate:itemsPerPage":e[34]||(e[34]=n=>ne.value=n),"items-per-page-text":a.$t("Articles par page"),options:q.value,"onUpdate:options":e[35]||(e[35]=n=>q.value=n),"sort-by":B.value,"onUpdate:sortBy":e[36]||(e[36]=n=>B.value=n),page:H.value,"onUpdate:page":e[37]||(e[37]=n=>H.value=n),"items-length":m.value,"onUpdate:itemsLength":e[38]||(e[38]=n=>m.value=n),"show-select":!1,"loading-text":a.$t("Chargement des éléments"),"no-data-text":a.$t("Pas de données"),"no-results-text":a.$t("Aucun résultat"),onPageCount:e[39]||(e[39]=n=>Z.value=n)},{top:u(()=>[l(kl,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:u(()=>[l(Te,null,{default:u(()=>[l(C,null,{default:u(()=>[l(U,{density:"compact",modelValue:v.value.search,"onUpdate:modelValue":e[0]||(e[0]=n=>v.value.search=n),placeholder:a.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(C,null,{default:u(()=>[l(Ce,{density:"compact",modelValue:v.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=n=>v.value.event_type=n),placeholder:a.$t("Prestation"),items:W.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(C,null,{default:u(()=>[l(Ce,{density:"compact",modelValue:v.value.source,"onUpdate:modelValue":e[2]||(e[2]=n=>v.value.source=n),placeholder:a.$t("Source"),items:["admin","site"],clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),l(C,null,{default:u(()=>[l(_e,{ref:"dialog",modelValue:X.value,"onUpdate:modelValue":e[8]||(e[8]=n=>X.value=n),"return-value":v.value.date,"onUpdate:returnValue":e[9]||(e[9]=n=>v.value.date=n),persistent:"",width:"290px"},{activator:u(({props:n})=>[l(U,E({modelValue:ve.value,"onUpdate:modelValue":e[3]||(e[3]=f=>ve.value=f),"prepend-inner-icon":"bx-calendar"},n,{density:"compact",placeholder:a.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[4]||(e[4]=f=>v.value.date=null)}),null,16,["modelValue","placeholder"])]),default:u(({isActive:n})=>[l(Be,{locale:"fr"},{default:u(()=>[l(je,{modelValue:v.value.date,"onUpdate:modelValue":e[7]||(e[7]=f=>v.value.date=f),"hide-header":"",multiple:"range"},{actions:u(()=>[l(I,{color:"primary",onClick:e[5]||(e[5]=f=>X.value=!1)},{default:u(()=>[D(_(a.$t("Annuler")),1)]),_:1}),l(le),l(I,{variant:"elevated",color:"primary",onClick:e[6]||(e[6]=f=>X.value=!1)},{default:u(()=>[D(_(a.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(C,{class:""},{default:u(()=>[l(_e,{modelValue:P.value,"onUpdate:modelValue":e[31]||(e[31]=n=>P.value=n),"max-width":"600px"},{activator:u(({props:n})=>[l(I,E({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[10]||(e[10]=f=>fe({customer:{},source:"admin"})),dark:""},n),{default:u(()=>[D(_(a.$t("Ajouter une demande")),1)]),_:2},1040)]),default:u(()=>[l(Ke,null,{default:u(()=>[l(ze,{class:"pa-4 bg-secondary"},{default:u(()=>[ie("span",jl,_(A.value),1)]),_:1}),l(G(bl),{ref_key:"refForm",ref:j,modelValue:M.value,"onUpdate:modelValue":e[30]||(e[30]=n=>M.value=n),onSubmit:we},{default:u(({errors:n,isSubmitting:f})=>[l(Sl,null,{default:u(()=>[l(Pl,{class:"px-0"},{default:u(()=>[l(Te,null,{default:u(()=>[l(C,{cols:"12"},{default:u(()=>[l(Il,{modelValue:d.value.customer_id,"onUpdate:modelValue":[e[11]||(e[11]=r=>d.value.customer_id=r),o],placeholder:a.$t("Client"),items:K.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.customer.firstname,"onUpdate:modelValue":e[12]||(e[12]=r=>d.value.customer.firstname=r),rules:[G(Ae)],label:a.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.customer.lastname,"onUpdate:modelValue":e[13]||(e[13]=r=>d.value.customer.lastname=r),rules:[G(Ae)],label:a.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.customer.email,"onUpdate:modelValue":e[14]||(e[14]=r=>d.value.customer.email=r),label:a.$t("Email")},null,8,["modelValue","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.customer.phone,"onUpdate:modelValue":e[15]||(e[15]=r=>d.value.customer.phone=r),label:a.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(Bl,{modelValue:d.value.event_type,"onUpdate:modelValue":e[16]||(e[16]=r=>d.value.event_type=r),placeholder:a.$t("Type d'événement"),items:W.value.map(r=>r.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(_e,{ref:"dialogDemandDate",modelValue:Y.value,"onUpdate:modelValue":e[22]||(e[22]=r=>Y.value=r),"return-value":d.value.event_date,"onUpdate:returnValue":e[23]||(e[23]=r=>d.value.event_date=r),persistent:"",width:"290px"},{activator:u(({props:r})=>[l(U,E({modelValue:ce.value,"onUpdate:modelValue":e[17]||(e[17]=y=>ce.value=y),"prepend-inner-icon":"bx-calendar"},r,{placeholder:a.$t("Date de la demande"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[18]||(e[18]=y=>d.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:u(({isActive:r})=>[l(Be,{locale:"fr"},{default:u(()=>[l(je,{modelValue:d.value.event_date,"onUpdate:modelValue":e[21]||(e[21]=y=>d.value.event_date=y),"hide-header":""},{actions:u(()=>[l(I,{color:"primary",onClick:e[19]||(e[19]=y=>Y.value=!1)},{default:u(()=>[D(_(a.$t("Annuler")),1)]),_:1}),l(le),l(I,{variant:"elevated",color:"primary",onClick:e[20]||(e[20]=y=>Y.value=!1)},{default:u(()=>[D(_(a.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(Ce,{modelValue:d.value.reception_period,"onUpdate:modelValue":e[24]||(e[24]=r=>d.value.reception_period=r),"hide-details":"",items:[a.$t("En matiné"),a.$t("Le midi"),a.$t("En soirée")],label:a.$t("La réception se déroulera plutôt"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),l(C,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.reception_start_time,"onUpdate:modelValue":e[25]||(e[25]=r=>d.value.reception_start_time=r),"hide-details":"",label:a.$t("Heure de réception"),clearable:""},null,8,["modelValue","label"])]),_:1}),d.value.source!="admin"?(ee(),ke(C,{key:0,cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.event_location,"onUpdate:modelValue":e[26]||(e[26]=r=>d.value.event_location=r),"hide-details":"",label:a.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1})):(ee(),ke(C,{key:1,cols:"12",md:"6"},{default:u(()=>[l(Ce,{modelValue:d.value.hall_id,"onUpdate:modelValue":e[27]||(e[27]=r=>d.value.hall_id=r),items:b.value,"item-value":"id","item-title":"name",label:a.$t("Salle liée")},null,8,["modelValue","items","label"])]),_:1})),l(C,{cols:"12",md:"6"},{default:u(()=>[l(U,{modelValue:d.value.number_people,"onUpdate:modelValue":e[28]||(e[28]=r=>d.value.number_people=r),"hide-details":"",type:"number",label:a.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1}),l(C,{cols:"12"},{default:u(()=>[l(Ml,{modelValue:d.value.comment,"onUpdate:modelValue":e[29]||(e[29]=r=>d.value.comment=r),"hide-details":"",label:a.$t("Description de la demande")},null,8,["modelValue","label"])]),_:1})]),_:1}),n.apiError?(ee(),Le("div",Kl,[l(Ll,{color:"error"},{default:u(()=>[D(_(n.apiError),1)]),_:2},1024)])):Ue("",!0)]),_:2},1024)]),_:2},1024),l(He,null,{default:u(()=>[l(le),l(I,{color:"error",variant:"flat",dark:"",onClick:De},{default:u(()=>[D(_(a.$t("Annuler")),1)]),_:1}),l(I,{color:"success",variant:"flat",loading:z.value,type:"submit"},{default:u(()=>[D(_(a.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(le)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(_e,{modelValue:L.value,"onUpdate:modelValue":e[33]||(e[33]=n=>L.value=n),"max-width":"500px"},{default:u(()=>[l(Ke,null,{default:u(()=>[l(ze,{class:"text-h5 text-center py-6"},{default:u(()=>[D(_(a.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(He,null,{default:u(()=>[l(le),l(I,{color:"error",variant:"flat",dark:"",onClick:e[32]||(e[32]=n=>L.value=!1)},{default:u(()=>[D(_(a.$t("Annuler")),1)]),_:1}),l(I,{color:"success",variant:"flat",dark:"",onClick:Se},{default:u(()=>[D(_(a.$t("OK")),1)]),_:1}),l(le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.demand_date":u(({item:n})=>[D(_(G(Ee)(n.demand_date)),1)]),"item.event_date":u(({item:n})=>[D(_(G(Ee)(n.event_date)),1)]),"item.event_location":u(({item:n})=>[l(de,{text:n.event_location},{activator:u(({props:f})=>[ie("span",Oe(Ne(f)),_(!n.event_location||n.event_location.length<10?n.event_location:`${n.event_location.slice(0,9)}...`),17)]),_:2},1032,["text"])]),"item.event_type":u(({item:n})=>[l(de,{text:n.event_type},{activator:u(({props:f})=>[ie("span",Oe(Ne(f)),_(!n.event_type||n.event_type.length<10?n.event_type:`${n.event_type.slice(0,9)}...`),17)]),_:2},1032,["text"])]),"item.status":u(({item:n})=>[l(Ge,{color:G(c).statusColor(n.status),size:"small",label:""},{default:u(()=>[D(_(G(c).statusText(n.status)),1)]),_:2},1032,["color"])]),"item.actions":u(({index:n,item:f})=>[ie("div",zl,[f.prestation?Ue("",!0):(ee(),ke(yl,{key:0,modelValue:S.value[n],"onUpdate:modelValue":r=>S.value[n]=r,icon:!0},null,8,["modelValue","onUpdate:modelValue"])),l(de,{text:a.$t("Voir")},{activator:u(({props:r})=>[l(I,E({icon:"",flat:"",to:"/demands/"+f.id},r),{default:u(()=>[l(V,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["to"])]),_:2},1032,["text"]),l(de,{text:a.$t("Modifier")},{activator:u(({props:r})=>[l(I,E({icon:"",flat:"",onClick:y=>fe(f)},r),{default:u(()=>[l(i,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),f.prestation==null?(ee(),ke(de,{key:1,text:a.$t("Supprimer")},{activator:u(({props:r})=>[l(I,E({icon:"",flat:"",onClick:y=>$e(f)},r),{default:u(()=>[l(g,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):Ue("",!0)])]),"no-data":u(()=>[ie("span",null,_(a.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{ha as default};
