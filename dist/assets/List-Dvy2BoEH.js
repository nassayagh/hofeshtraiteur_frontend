import{u as re}from"./paymentMethod-DFXXTadn.js";import{_ as ne}from"./BaseBreadcrumb-B00kM5Yn.js";import{r as ue}from"./validators-BPi-vT8z.js";import{a6 as de,r as s,av as ie,aD as u,h as me,e as ve,g as fe,q as ce,Z as D,o as N,c as O,b as a,w as o,V as v,n as pe,d as i,t as n,a as S,a8 as j,a4 as ge,X as Ve}from"./index-C98R_1pF.js";import{F as be,V as ke}from"./vee-validate.esm-CAInF6Y-.js";import{V as q,a as z}from"./VRow-D320YObp.js";import{V as Ce}from"./VDataTableServer-CFHNWUZ9.js";import{V as ye,a as he}from"./VToolbar-DwPd2tnt.js";import{V as L}from"./VTextField-DMnhlw83.js";import{i as _,a as $e}from"./VSpacer-BJ4qJf55.js";import{V as R}from"./VDialog-DfaISDo8.js";import{a as K,b as X,V as xe,c as Z}from"./VCard-ZLMnVf8s.js";import{V as _e}from"./VContainer-D0gjPn2G.js";import"./VAvatar-DY9ZlWYc.js";const Pe={class:"text-h5"},we={key:0,class:"mt-2"},Ie=["onClick"],Xe=de({__name:"List",setup(Te){const F=s(),A=ie(),G=s({title:"Modes de paiement"}),H=s([{text:u("Tableau de bord"),disabled:!1,href:"/"},{text:u("Modes de paiement"),disabled:!0,href:"#"}]),m=s([]),P=re();me(()=>{B()});const f=s(!1),w=s(!1),M=s(null),I=s(100),g=s(2),y=s(2),h=s(0),U=s(!1),c=s(!1),$=s("");s(["primary","secondary","error","success","warning"]);const p=s([{key:"name",order:"asc"}]);s(0);const V=s({itemsPerPage:100,rowsPerPage:100,page:1,sortDesc:[!0],sortBy:[{key:"name",order:"desc"}]}),x=s(-1),r=s({id:null,name:"",description:"",status:null}),J=s({id:null,name:"",description:"",status:null});function Q(l){return l==0?"#13DEB9":l==1?"#FA896B":l==2?"#5D87FF":"#FFAE1F"}function W(l){return l==0?u("Started"):l=="cancel"?u("Cancelled"):l=="completed"?u("Completed"):u("Started")}const b=s(!1),Y=s([{title:"Actions",key:"actions",sortable:!1},{title:"Nom",align:"start",key:"name"}]);function E(l){f.value=!1,x.value=m.value.indexOf(l),r.value=Object.assign({},l),c.value=!0}function ee(l){r.value=l,b.value=!0}function ae(){c.value=!1,setTimeout(()=>{r.value=Object.assign({},J.value),x.value=-1},300)}function te(l,{setErrors:t}){var d;(d=F.value)==null||d.validate().then(({valid:k})=>{k&&(w.value=!0,P.addItem(r.value).then(e=>{if(e.data.error){t({apiError:e.data.message});return}r.value.id!=null?Object.assign(m.value[x.value],e.data):m.value.unshift(e.data),f.value=!1,c.value=!1,r.value={changePassword:!0},A.showSuccess(u("Mode de paiement sauvée avec succès"))}).catch(e=>{w.value=!1,t({apiError:e})}).then(()=>{w.value=!1,t({apiError:null})}))})}function le(){P.deleteItem(r.value.id);const l=m.value.findIndex(t=>t.id==r.value.id);m.value.splice(l,1),b.value=!1,A.showSuccess(u("Mode de paiement supprimé avec succès"))}const oe=ve(()=>x.value===-1?u("Nouvel Mode de paiement"):u("Modifier la Mode de paiement"));function B(){try{clearTimeout(M.value)}catch{}M.value=setTimeout(()=>{f.value=!0;let l="id",t="desc";console.log(p.value),p.value.length>0&&(l=p.value[0].key,t=p.value[0].order),P.fetchItems({term:$.value,paginate:I.value,current_page:g.value,direction:t,order_by:l,page:V.value.page,per_page:V.value.itemsPerPage}).then(d=>{if(d.data){const{data:k,current_page:e,next_page_url:C,total:T,per_page:Se,to:Fe,last_page:se}=d.data;m.value=k,y.value=se,h.value=T}}).catch(d=>{console.error(d)}).then(()=>{c.value=!1,f.value=!1})},1e3)}return fe([$,V],()=>{B()},{deep:!0}),ce(()=>{g.value>y.value&&(g.value=y.value)}),(l,t)=>{const d=D("EditIcon"),k=D("TrashIcon");return N(),O(Ve,null,[a(ne,{title:`${G.value.title}(${h.value})`,breadcrumbs:H.value},null,8,["title","breadcrumbs"]),a(z,null,{default:o(()=>[a(q,{cols:"12"},{default:o(()=>[a(Ce,{class:"border rounded-md",headers:Y.value,loading:f.value,items:m.value,"multi-sort":!1,"items-per-page":I.value,"onUpdate:itemsPerPage":t[7]||(t[7]=e=>I.value=e),"items-per-page-text":l.$t("Articles par page"),options:V.value,"onUpdate:options":t[8]||(t[8]=e=>V.value=e),"sort-by":p.value,"onUpdate:sortBy":t[9]||(t[9]=e=>p.value=e),page:g.value,"onUpdate:page":t[10]||(t[10]=e=>g.value=e),"items-length":h.value,"onUpdate:itemsLength":t[11]||(t[11]=e=>h.value=e),"show-select":!1,"loading-text":l.$t("Chargement des éléments"),"no-data-text":l.$t("Pas de données"),"no-results-text":l.$t("Aucun résultat"),onPageCount:t[12]||(t[12]=e=>y.value=e)},{top:o(()=>[a(ye,{class:"rounded-t-md",flat:""},{default:o(()=>[a(he,null,{default:o(()=>[a(L,{density:"compact",modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=e=>$.value=e),placeholder:l.$t("Rechercher..."),"hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),a(_),a(R,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),"max-width":"350px"},{activator:o(({props:e})=>[a(v,pe({color:"primary",variant:"flat",onClick:t[1]||(t[1]=C=>r.value={}),dark:""},e),{default:o(()=>[i(n(l.$t("Ajouter une Mode de paiement")),1)]),_:2},1040)]),default:o(()=>[a(K,null,{default:o(()=>[a(X,{class:"pa-4 bg-secondary"},{default:o(()=>[S("span",Pe,n(oe.value),1)]),_:1}),a(j(be),{ref_key:"refForm",ref:F,modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=e=>U.value=e),onSubmit:te},{default:o(({errors:e,isSubmitting:C})=>[a(xe,null,{default:o(()=>[a(_e,{class:"px-0"},{default:o(()=>[a(z,null,{default:o(()=>[a(q,{cols:"12"},{default:o(()=>[a(L,{modelValue:r.value.name,"onUpdate:modelValue":t[2]||(t[2]=T=>r.value.name=T),rules:[j(ue)],label:l.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1})]),_:1}),e.apiError?(N(),O("div",we,[a(ke,{color:"error"},{default:o(()=>[i(n(e.apiError),1)]),_:2},1024)])):ge("",!0)]),_:2},1024)]),_:2},1024),a(Z,null,{default:o(()=>[a(_),a(v,{color:"error",variant:"flat",dark:"",onClick:ae},{default:o(()=>[i(n(l.$t("Annuler")),1)]),_:1}),a(v,{color:"success",variant:"flat",loading:f.value,type:"submit"},{default:o(()=>[i(n(l.$t("Sauvegarder")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(R,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),"max-width":"500px"},{default:o(()=>[a(K,null,{default:o(()=>[a(X,{class:"text-h5 text-center py-6"},{default:o(()=>[i(n(l.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),a(Z,null,{default:o(()=>[a(_),a(v,{color:"error",variant:"flat",dark:"",onClick:t[5]||(t[5]=e=>b.value=!1)},{default:o(()=>[i(n(l.$t("Annuler")),1)]),_:1}),a(v,{color:"success",variant:"flat",dark:"",onClick:le},{default:o(()=>[i(n(l.$t("OK")),1)]),_:1}),a(_)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.status":o(({item:e})=>[a($e,{color:Q(e.status)},{default:o(()=>[i(n(W(e.status)),1)]),_:2},1032,["color"])]),"item.name":o(({item:e})=>[S("span",{onClick:C=>E(e),class:"cursor-pointer"},n(e.name),9,Ie)]),"item.actions":o(({item:e})=>[a(v,{icon:"",small:"",onClick:C=>E(e),flat:""},{default:o(()=>[a(d,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1032,["onClick"]),a(v,{icon:"",small:"",onClick:C=>ee(e),flat:""},{default:o(()=>[a(k,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1032,["onClick"])]),"no-data":o(()=>[S("span",null,n(l.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{Xe as default};
