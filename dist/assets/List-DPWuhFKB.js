import{u as re}from"./eventType-Dm-jOKz3.js";import{_ as se}from"./BaseBreadcrumb-Hezx_i_T.js";import{r as ne}from"./validators-BPi-vT8z.js";import{O as ue,r,aa as ie,ae as n,h as de,e as me,g as pe,q as ve,o as B,c as E,b as a,w as o,V as C,n as fe,d as u,t as i,a as D,Q as N,L as ce,R as O,M as ge}from"./index-CUPAlSMw.js";import{F as Ve}from"./vee-validate.esm-HZAvNpmJ.js";import{V as j,a as L}from"./VRow-BsuNGtNO.js";import{V as be}from"./VDataTableServer-BFkWURHk.js";import{V as Ce,a as ke}from"./VToolbar-8rWnASPZ.js";import{V as M}from"./VTextField-C8gGEMa3.js";import{V as h}from"./VSpacer-NktmD2cS.js";import{V as R}from"./VDialog-CGt5LcvW.js";import{V as q,a as z,c as ye,b as G}from"./VCard-BO1ndkev.js";import{V as $e}from"./VContainer-CTgIcimK.js";import{V as he}from"./VAlert-sbw9GopK.js";import{V as xe}from"./VChip-oyYT5vSZ.js";/* empty css              */import"./VDataTable-BVkNS319.js";import"./VSelect-CRYGgsKi.js";import"./VInput-zc789c8J.js";import"./index-0xMZgKO4.js";import"./VList-Bbvp25zg.js";import"./ssrBoot-Bv-Phjmv.js";import"./createSimpleFunctional-B4HWgZLU.js";import"./VAvatar-rh1wg38R.js";import"./VDivider-DdpUburD.js";import"./dialog-transition-Bl1csaSv.js";import"./VMenu-C8ruu1bi.js";import"./VCheckboxBtn-DCQJCXrn.js";import"./VSelectionControl-C3v1ZqXl.js";import"./VLabel-kv_J4-_w.js";import"./VTable-K1dFTe9o.js";import"./filter-mVmYd1gp.js";/* empty css                   */import"./VField-C5J9Bt-Q.js";import"./VSlideGroup-DpvhW1l4.js";const Pe={class:"text-h5"},Te={key:0,class:"mt-2"},pt=ue({__name:"List",setup(we){const I=r(),S=ie(),K=r({title:"Gestions des événements"}),Q=r([{text:n("Tableau de bord"),disabled:!1,href:"/"},{text:n("Événements"),disabled:!0,href:"#"}]),m=r([]),x=re();de(()=>{U()});const v=r(!1),P=r(!1),F=r(null),T=r(10),c=r(2),k=r(2),w=r(0),_=r(!1),g=r(!1),y=r("");r(["primary","secondary","error","success","warning"]);const f=r([{key:"name",order:"asc"}]);r(0);const V=r({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"name",order:"desc"}]}),$=r(-1),s=r({id:null,name:"",description:"",status:null}),H=r({id:null,name:"",description:"",status:null});function J(l){return l==0?"#13DEB9":l==1?"#FA896B":l==2?"#5D87FF":"#FFAE1F"}function W(l){return l==0?n("Started"):l=="cancel"?n("Cancelled"):l=="completed"?n("Completed"):n("Started")}const b=r(!1),X=r([{title:"Nom",align:"start",key:"name"},{title:"Actions",key:"actions",sortable:!1}]);function A(l){v.value=!1,$.value=m.value.indexOf(l),s.value=Object.assign({},l),g.value=!0}function Y(l){s.value=l,b.value=!0}function Z(){g.value=!1,setTimeout(()=>{s.value=Object.assign({},H.value),$.value=-1},300)}function ee(l,{setErrors:t}){var e;(e=I.value)==null||e.validate().then(({valid:p})=>{p&&(P.value=!0,x.addItem(s.value).then(d=>{if(d.data.error){t({apiError:d.data.message});return}s.value.id!=null?Object.assign(m.value[$.value],d.data):m.value.unshift(d.data),v.value=!1,g.value=!1,s.value={changePassword:!0},S.showSuccess(n("Événement sauvée avec succès"))}).catch(d=>{P.value=!1,t({apiError:d})}).then(()=>{P.value=!1,t({apiError:null})}))})}function te(){x.deleteItem(s.value.id);const l=m.value.findIndex(t=>t.id==s.value.id);m.value.splice(l,1),b.value=!1,S.showSuccess(n("Événement supprimé avec succès"))}const ae=me(()=>$.value===-1?n("Nouvel événements"):n("Modifier la événements"));function U(){try{clearTimeout(F.value)}catch{}F.value=setTimeout(()=>{v.value=!0;let l="id",t="desc";console.log(f.value),f.value.length>0&&(l=f.value[0].key,t=f.value[0].order),x.fetchItems({term:y.value,paginate:T.value,current_page:c.value,direction:t,order_by:l,page:V.value.page,per_page:V.value.itemsPerPage}).then(e=>{if(e.data){const{data:p,current_page:d,next_page_url:Ie,total:le,per_page:Se,to:Fe,last_page:oe}=e.data;m.value=p,k.value=oe,w.value=le}}).catch(e=>{console.error(e)}).then(()=>{v.value=!1})},1e3)}return pe([y,V],()=>{U()},{deep:!0}),ve(()=>{c.value>k.value&&(c.value=k.value)}),(l,t)=>(B(),E(ge,null,[a(se,{title:K.value.title,breadcrumbs:Q.value},null,8,["title","breadcrumbs"]),a(L,null,{default:o(()=>[a(j,{cols:"12"},{default:o(()=>[a(be,{class:"border rounded-md",headers:X.value,loading:v.value,items:m.value,"multi-sort":!1,"items-per-page":T.value,"onUpdate:itemsPerPage":t[7]||(t[7]=e=>T.value=e),"items-per-page-text":l.$t("Articles par page"),options:V.value,"onUpdate:options":t[8]||(t[8]=e=>V.value=e),"sort-by":f.value,"onUpdate:sortBy":t[9]||(t[9]=e=>f.value=e),page:c.value,"onUpdate:page":t[10]||(t[10]=e=>c.value=e),"items-length":w.value,"onUpdate:itemsLength":t[11]||(t[11]=e=>w.value=e),"show-select":!1,"loading-text":l.$t("Chargement des éléments"),"no-data-text":l.$t("Pas de données"),"no-results-text":l.$t("Aucun résultat"),onPageCount:t[12]||(t[12]=e=>k.value=e)},{top:o(()=>[a(Ce,{class:"rounded-t-md",flat:""},{default:o(()=>[a(ke,null,{default:o(()=>[a(M,{density:"compact",modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),placeholder:l.$t("Rechercher..."),"hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),a(h),a(R,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=e=>g.value=e),"max-width":"350px"},{activator:o(({props:e})=>[a(C,fe({color:"primary",variant:"flat",onClick:t[1]||(t[1]=p=>A={}),dark:""},e),{default:o(()=>[u(i(l.$t("Ajouter une événements")),1)]),_:2},1040)]),default:o(()=>[a(q,null,{default:o(()=>[a(z,{class:"pa-4 bg-secondary"},{default:o(()=>[D("span",Pe,i(ae.value),1)]),_:1}),a(N(Ve),{ref_key:"refForm",ref:I,modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=e=>_.value=e),onSubmit:ee},{default:o(({errors:e,isSubmitting:p})=>[a(ye,null,{default:o(()=>[a($e,{class:"px-0"},{default:o(()=>[a(L,null,{default:o(()=>[a(j,{cols:"12"},{default:o(()=>[a(M,{modelValue:s.value.name,"onUpdate:modelValue":t[2]||(t[2]=d=>s.value.name=d),rules:[N(ne)],label:l.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1})]),_:1}),e.apiError?(B(),E("div",Te,[a(he,{color:"error"},{default:o(()=>[u(i(e.apiError),1)]),_:2},1024)])):ce("",!0)]),_:2},1024)]),_:2},1024),a(G,null,{default:o(()=>[a(h),a(C,{color:"error",variant:"flat",dark:"",onClick:Z},{default:o(()=>[u(i(l.$t("Annuler")),1)]),_:1}),a(C,{color:"success",variant:"flat",loading:v.value,type:"submit"},{default:o(()=>[u(i(l.$t("Sauvegarder")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),a(R,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),"max-width":"500px"},{default:o(()=>[a(q,null,{default:o(()=>[a(z,{class:"text-h5 text-center py-6"},{default:o(()=>[u(i(l.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),a(G,null,{default:o(()=>[a(h),a(C,{color:"error",variant:"flat",dark:"",onClick:t[5]||(t[5]=e=>b.value=!1)},{default:o(()=>[u(i(l.$t("Annuler")),1)]),_:1}),a(C,{color:"success",variant:"flat",dark:"",onClick:te},{default:o(()=>[u(i(l.$t("OK")),1)]),_:1}),a(h)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.status":o(({item:e})=>[a(xe,{color:J(e.status)},{default:o(()=>[u(i(W(e.status)),1)]),_:2},1032,["color"])]),"item.actions":o(({item:e})=>[a(O,{color:"info",size:"small",class:"me-2",onClick:p=>A(e)},{default:o(()=>[u(" mdi-pencil ")]),_:2},1032,["onClick"]),a(O,{color:"error",size:"small",onClick:p=>Y(e)},{default:o(()=>[u(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":o(()=>[D("span",null,i(l.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64))}});export{pt as default};
