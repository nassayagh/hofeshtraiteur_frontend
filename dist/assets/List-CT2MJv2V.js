import{u as qe}from"./demands-BA_5msbb.js";import{u as Ge}from"./eventType-B786Xc3F.js";import{u as Je}from"./customers-D4VijWsA.js";import{_ as We}from"./BaseBreadcrumb-C6KRtjca.js";import{r as _e}from"./validators-BPi-vT8z.js";import{f as Ue}from"./formatters-Dv1Ro_l4.js";import{p as Xe,ay as Ye,az as Ze,j as Qe,aA as el,r as d,s as ne,u as Te,e as x,aB as ll,g as ae,Y as Ae,aC as al,m as tl,b as l,X as re,n as L,ac as Fe,aD as ol,aE as ul,d as D,aF as nl,aG as rl,aH as sl,aI as il,a6 as dl,aJ as ml,av as vl,aK as b,h as cl,q as fl,Z as Ee,o as ce,c as Re,w as u,a8 as N,V as U,t as k,a as xe,a4 as Se,_ as Le}from"./index-BWIBJZct.js";import{F as pl}from"./vee-validate.esm-Bn2dd5al.js";import{_ as Vl}from"./ValidateDemand.vue_vue_type_script_setup_true_lang-Bqqor1yS.js";import{V as y,a as $e}from"./VRow-CHh4798a.js";import{V as gl}from"./VDataTableServer-B5LN4ph3.js";import{V as bl}from"./VToolbar-Ci_-8d_V.js";import{m as yl,u as hl,V as A}from"./VTextField-Bm736GB1.js";import{m as kl,u as Cl,V as Dl,a as wl,b as fe,c as pe}from"./VDialog-bl4cAYo0.js";import{V as Me}from"./VLocaleProvider-DC2wnU_h.js";import{V as Ne}from"./VDatePicker-BHT4RQHY.js";import{V as le}from"./VSpacer-BS9x1fw_.js";import{V as Oe,b as Be,a as xl,c as je}from"./VCard-C_MBnFgh.js";import{V as Sl}from"./VContainer-C0jtEUUT.js";import{V as $l}from"./VAutocomplete-B8oP3MTp.js";import{m as Pl,u as Il}from"./filter-YcxaRsB0.js";import{h as _l,t as Ve,g as Ul,e as Tl,c as Ke}from"./VMenu-BA9OMPvi.js";import{V as Al}from"./VAvatar-BMjKmOGY.js";import{V as He}from"./VChip-D6GpdyNK.js";import{V as Fl}from"./VTextarea-CW5m2864.js";import{V as El}from"./VAlert-CqJGG9lT.js";import{V as ze}from"./VTooltip-DwVV4rNl.js";import"./hall-yfx4Figx.js";import"./VTable-Clq-LsDs.js";import"./index-CdY55EkP.js";import"./VSheet-D26IeZ7r.js";function Rl(a,h,O){if(h==null)return a;if(Array.isArray(h))throw new Error("Multiple matches is not implemented");return typeof h=="number"&&~h?l(re,null,[l("span",{class:"v-combobox__unmask"},[a.substr(0,h)]),l("span",{class:"v-combobox__mask"},[a.substr(h,O)]),l("span",{class:"v-combobox__unmask"},[a.substr(h+O)])]):a}const Ll=Xe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Pl({filterKeys:["title"]}),...kl({hideNoData:!0,returnObject:!0}),...Ye(yl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:!1})},"VCombobox"),Ml=Qe()({name:"VCombobox",props:Ll(),emits:{"update:focused":a=>!0,"update:modelValue":a=>!0,"update:search":a=>!0,"update:menu":a=>!0},setup(a,h){var o;let{emit:O,slots:c}=h;const{t:te}=el(),F=d(),T=ne(!1),E=ne(!0),w=ne(!1),G=d(),J=d(),S=Te(a,"menu"),V=x({get:()=>S.value,set:e=>{var s;S.value&&!e&&((s=G.value)!=null&&s.ΨopenChildren)||(S.value=e)}}),p=ne(-1);let W=!1;const X=x(()=>{var e;return(e=F.value)==null?void 0:e.color}),B=x(()=>V.value?a.closeText:a.openText),{items:oe,transformIn:j,transformOut:Y}=_l(a),{textColorClasses:ue,textColorStyles:se}=ll(X),v=Te(a,"modelValue",[],e=>j(sl(e)),e=>{const s=Y(e);return a.multiple?s:s[0]??null}),R=hl(),$=ne(a.multiple?"":((o=v.value[0])==null?void 0:o.title)??""),i=x({get:()=>$.value,set:e=>{var s;if($.value=e??"",a.multiple||(v.value=[Ve(a,e)]),e&&a.multiple&&((s=a.delimiters)!=null&&s.length)){const f=e.split(new RegExp(`(?:${a.delimiters.join("|")})+`));f.length>1&&(f.forEach(t=>{t=t.trim(),t&&_(Ve(a,t))}),$.value="")}e||(p.value=-1),E.value=!e}}),K=x(()=>typeof a.counterValue=="function"?a.counterValue(v.value):typeof a.counterValue=="number"?a.counterValue:a.multiple?v.value.length:i.value.length);ae($,e=>{W?Ae(()=>W=!1):T.value&&!V.value&&(V.value=!0),O("update:search",e)}),ae(v,e=>{var s;a.multiple||($.value=((s=e[0])==null?void 0:s.title)??"")});const{filteredItems:M,getMatches:m}=Il(a,oe,()=>E.value?"":i.value),I=x(()=>a.hideSelected?M.value.filter(e=>!v.value.some(s=>s.value===e.value)):M.value),z=x(()=>v.value.map(e=>e.value)),Z=x(()=>{var s;return(a.autoSelectFirst===!0||a.autoSelectFirst==="exact"&&i.value===((s=I.value[0])==null?void 0:s.title))&&I.value.length>0&&!E.value&&!w.value}),Q=x(()=>a.hideNoData&&!I.value.length||a.readonly||(R==null?void 0:R.isReadonly.value)),ee=d(),{onListScroll:ie,onListKeydown:ge}=Cl(ee,F);function be(e){W=!0,a.openOnClear&&(V.value=!0)}function ye(){Q.value||(V.value=!0)}function he(e){Q.value||(T.value&&(e.preventDefault(),e.stopPropagation()),V.value=!V.value)}function ke(e){var t;if(il(e)||a.readonly||R!=null&&R.isReadonly.value)return;const s=F.value.selectionStart,f=v.value.length;if((p.value>-1||["Enter","ArrowDown","ArrowUp"].includes(e.key))&&e.preventDefault(),["Enter","ArrowDown"].includes(e.key)&&(V.value=!0),["Escape"].includes(e.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(e.key)&&(Z.value&&["Enter","Tab"].includes(e.key)&&_(M.value[0]),E.value=!0),e.key==="ArrowDown"&&Z.value&&((t=ee.value)==null||t.focus("next")),!!a.multiple){if(["Backspace","Delete"].includes(e.key)){if(p.value<0){e.key==="Backspace"&&!i.value&&(p.value=f-1);return}const n=p.value,r=v.value[p.value];r&&!r.props.disabled&&_(r,!1),p.value=n>=f-1?f-2:n}if(e.key==="ArrowLeft"){if(p.value<0&&s>0)return;const n=p.value>-1?p.value-1:f-1;v.value[n]?p.value=n:(p.value=-1,F.value.setSelectionRange(i.value.length,i.value.length))}if(e.key==="ArrowRight"){if(p.value<0)return;const n=p.value+1;v.value[n]?p.value=n:(p.value=-1,F.value.setSelectionRange(0,0))}e.key==="Enter"&&i.value&&(_(Ve(a,i.value)),i.value="")}}function Ce(){var e;T.value&&(E.value=!0,(e=F.value)==null||e.focus())}function _(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(a.multiple){const f=v.value.findIndex(n=>a.valueComparator(n.value,e.value)),t=s??!~f;if(~f){const n=t?[...v.value,e]:[...v.value];n.splice(f,1),v.value=n}else t&&(v.value=[...v.value,e]);a.clearOnSelect&&(i.value="")}else{const f=s!==!1;v.value=f?[e]:[],$.value=f?e.title:"",Ae(()=>{V.value=!1,E.value=!0})}}function de(e){T.value=!0,setTimeout(()=>{w.value=!0})}function De(e){w.value=!1}function we(e){(e==null||e===""&&!a.multiple)&&(v.value=[])}return ae(T,(e,s)=>{e||e===s||(p.value=-1,V.value=!1,Z.value&&!w.value&&!v.value.some(f=>{let{value:t}=f;return t===I.value[0].value})?_(I.value[0]):a.multiple&&i.value&&_(Ve(a,i.value)))}),ae(V,()=>{if(!a.hideSelected&&V.value&&v.value.length){const e=I.value.findIndex(s=>v.value.some(f=>a.valueComparator(f.value,s.value)));al&&window.requestAnimationFrame(()=>{var s;e>=0&&((s=J.value)==null||s.scrollToIndex(e))})}}),ae(I,(e,s)=>{T.value&&(!e.length&&a.hideNoData&&(V.value=!1),!s.length&&e.length&&(V.value=!0))}),tl(()=>{const e=!!(a.chips||c.chip),s=!!(!a.hideNoData||I.value.length||c["prepend-item"]||c["append-item"]||c["no-data"]),f=v.value.length>0,t=A.filterProps(a);return l(A,L({ref:F},t,{modelValue:i.value,"onUpdate:modelValue":[n=>i.value=n,we],focused:T.value,"onUpdate:focused":n=>T.value=n,validationValue:v.externalValue,counterValue:K.value,dirty:f,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!a.chips,"v-combobox--selection-slot":!!c.selection,"v-combobox--selecting-index":p.value>-1,[`v-combobox--${a.multiple?"multiple":"single"}`]:!0},a.class],style:a.style,readonly:a.readonly,placeholder:f?void 0:a.placeholder,"onClick:clear":be,"onMousedown:control":ye,onKeydown:ke}),{...c,default:()=>l(re,null,[l(Ul,L({ref:G,modelValue:V.value,"onUpdate:modelValue":n=>V.value=n,activator:"parent",contentClass:"v-combobox__content",disabled:Q.value,eager:a.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:a.transition,onAfterLeave:Ce},a.menuProps),{default:()=>[s&&l(Tl,L({ref:ee,selected:z.value,selectStrategy:a.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:ge,onFocusin:de,onFocusout:De,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:a.itemColor??a.color},a.listProps),{default:()=>{var n,r,g;return[(n=c["prepend-item"])==null?void 0:n.call(c),!I.value.length&&!a.hideNoData&&(((r=c["no-data"])==null?void 0:r.call(c))??l(Ke,{title:te(a.noDataText)},null)),l(Dl,{ref:J,renderless:!0,items:I.value},{default:P=>{var Ie;let{item:C,index:H,itemRef:q}=P;const Pe=L(C.props,{ref:q,key:H,active:Z.value&&H===0?!0:void 0,onClick:()=>_(C,null)});return((Ie=c.item)==null?void 0:Ie.call(c,{item:C,index:H,props:Pe}))??l(Ke,Pe,{prepend:me=>{let{isSelected:ve}=me;return l(re,null,[a.multiple&&!a.hideSelected?l(wl,{key:C.value,modelValue:ve,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&l(Al,{image:C.props.prependAvatar},null),C.props.prependIcon&&l(Fe,{icon:C.props.prependIcon},null)])},title:()=>{var me,ve;return E.value?C.title:Rl(C.title,(me=m(C))==null?void 0:me.title,((ve=i.value)==null?void 0:ve.length)??0)}})}}),(g=c["append-item"])==null?void 0:g.call(c)]}})]}),v.value.map((n,r)=>{function g(q){q.stopPropagation(),q.preventDefault(),_(n,!1)}const P={"onClick:close":g,onMousedown(q){q.preventDefault(),q.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=e?!!c.chip:!!c.selection,H=C?ol(e?c.chip({item:n,index:r,props:P}):c.selection({item:n,index:r})):void 0;if(!(C&&!H))return l("div",{key:n.value,class:["v-combobox__selection",r===p.value&&["v-combobox__selection--selected",ue.value]],style:r===p.value?se.value:{}},[e?c.chip?l(ul,{key:"chip-defaults",defaults:{VChip:{closable:a.closableChips,size:"small",text:n.title}}},{default:()=>[H]}):l(He,L({key:"chip",closable:a.closableChips,size:"small",text:n.title,disabled:n.props.disabled},P),null):H??l("span",{class:"v-combobox__selection-text"},[n.title,a.multiple&&r<v.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[D(",")])])])})]),"append-inner":function(){var P;for(var n=arguments.length,r=new Array(n),g=0;g<n;g++)r[g]=arguments[g];return l(re,null,[(P=c["append-inner"])==null?void 0:P.call(c,...r),(!a.hideNoData||a.items.length)&&a.menuIcon?l(Fe,{class:"v-combobox__menu-icon",icon:a.menuIcon,onMousedown:he,onClick:nl,"aria-label":te(B.value),title:te(B.value)},null):void 0])}})}),rl({isFocused:T,isPristine:E,menu:V,search:i,selectionIndex:p,filteredItems:M,select:_},F)}}),Nl={class:"text-h5"},Ol={key:0,class:"mt-2"},Bl={class:"d-flex align-center"},ya=dl({__name:"List",setup(a){const h=ml(),O=d(),c=vl(),te=Ge(),F=Je(),T=d({title:b("Gestion des demandes")}),E=d([{text:b("Dashboard"),disabled:!1,href:"/"},{text:b("Gestion des demandes"),disabled:!0,href:"#"}]),w=d([]),G=d([]),J=d([]),S=qe();cl(()=>{_(),de(),De()}),d(!1);const V=d(!1),p=d(!1);d(!1),d(!1),d(!1),d(""),d(),d(!1);const W=d(null);d(null),d(null),d(null);const X=d(!1),B=d(!1);d();const oe=d(10),j=d(2),Y=d(2),ue=d(0),se=d(!1),v=d(!1);d(null);const R=d("");d(["primary","secondary","error","success","warning"]);const $=d([{key:"id",order:"DESC"}]);d(0),d({total:0,validated:0,unvalidated:0});const i=d({search:null,status:null,date:null,event_type:null}),K=d({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"id",order:"DESC"}]}),M=d(-1),m=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),I=d({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),z=d(!1),Z=d([{title:b("ID"),align:"start",key:"id",sortable:!0},{title:b("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:b("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:b("Email"),align:"start",key:"customer.email",sortable:!1},{title:b("Téléphone"),align:"start",key:"customer.phone",sortable:!1},{title:b("Prestation"),align:"start",key:"event_type"},{title:b("Statut"),align:"start",key:"status"},{title:b("Source"),align:"start",key:"source"},{title:b("Date de l'événement "),key:"event_date"},{title:b("Heure"),key:"reception_start_time"},{title:b("Lieu"),key:"event_location"},{title:b("Convives"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),Q=x(()=>i.value.date&&i.value.date.length>0?h.format(i.value.date[0],"shortDate")+" - "+h.format(i.value.date[i.value.date.length-1],"shortDate"):null),ee=x(()=>m.value.event_date?h.format(m.value.event_date,"shortDate"):null);x(()=>S.demands.data.filter(o=>o.email.toLowerCase().includes(R.value.toLowerCase())));function ie(o){V.value=!1,M.value=w.value.indexOf(o),m.value=Object.assign({},o),v.value=!0}function ge(o){m.value=o,z.value=!0}function be(){v.value=!1,setTimeout(()=>{m.value=Object.assign({customer:{}},I.value),M.value=-1},300)}function ye(o,{setErrors:e}){var s;(s=O.value)==null||s.validate().then(({valid:f})=>{f&&(p.value=!0,S.addItem(m.value).then(t=>{if(t.data.error){e({apiError:t.data.message});return}m.value.id!=null?Object.assign(w.value[M.value],t.data):w.value.unshift(t.data),p.value=!1,v.value=!1,m.value={customer:{}},c.showSuccess(b("Demande enregistrée avec succès")),de(),S.fetchStatistics()}).catch(t=>{p.value=!1,e({apiError:t})}).then(()=>{p.value=!1,e({apiError:null})}))})}function he(){S.deleteItem(m.value.id);const o=w.value.findIndex(e=>e.id==m.value.id);w.value.splice(o,1),z.value=!1,c.showSuccess(b("Demande supprimée avec succès")),S.fetchStatistics()}const ke=x(()=>M.value===-1?"Nouvelle demande":"Modifier la demande"),Ce=x(()=>i.value.date&&i.value.date.length?i.value.date.length>1?[h.format(i.value.date[0],"shortDate"),h.format(i.value.date[i.value.date.length-1],"shortDate")]:[h.format(i.value.date[0],"shortDate"),h.format(i.value.date[0],"shortDate")]:null);function _(){try{clearTimeout(W.value)}catch{}W.value=setTimeout(()=>{V.value=!0;let o="id",e="desc";console.log($.value),$.value.length>0&&(o=$.value[0].key,e=$.value[0].order),S.fetchItems({term:R.value,paginate:oe.value,current_page:j.value,direction:e,order_by:o,page:K.value.page,per_page:K.value.itemsPerPage,...i.value,date:Ce.value}).then(s=>{if(s.data){const{data:f,current_page:t,next_page_url:n,total:r,per_page:g,to:P,last_page:C}=s.data;w.value=f,Y.value=C,ue.value=r}}).catch(s=>{console.error(s)}).then(()=>{V.value=!1})},1e3)}function de(){te.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(o=>{if(o.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:n,to:r,last_page:g}=o.data;G.value=e}}).catch(o=>{console.error(o)}).then(()=>{})}function De(){F.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(o=>{if(o.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:n,to:r,last_page:g}=o.data;J.value=e.map(P=>({...P,name:P.firstname+" "+P.lastname+" ("+(P.is_customer?b("Client"):b("Prospect"))+")"}))}}).catch(o=>{console.error(o)}).then(()=>{})}ae([R,K,i],()=>{_()},{deep:!0}),fl(()=>{j.value>Y.value&&(j.value=Y.value)});function we(o){if(o){const e=J.value.find(s=>s.id==o);e&&(m.value.customer=e)}}return(o,e)=>{const s=Ee("PencilIcon"),f=Ee("TrashIcon");return ce(),Re(re,null,[l(We,{title:T.value.title,breadcrumbs:E.value},null,8,["title","breadcrumbs"]),l($e,null,{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l(gl,{class:"border rounded-md",headers:Z.value,loading:V.value,items:w.value,"multi-sort":!1,"items-per-page":oe.value,"onUpdate:itemsPerPage":e[33]||(e[33]=t=>oe.value=t),"items-per-page-text":o.$t("Articles par page"),options:K.value,"onUpdate:options":e[34]||(e[34]=t=>K.value=t),"sort-by":$.value,"onUpdate:sortBy":e[35]||(e[35]=t=>$.value=t),page:j.value,"onUpdate:page":e[36]||(e[36]=t=>j.value=t),"items-length":ue.value,"onUpdate:itemsLength":e[37]||(e[37]=t=>ue.value=t),"show-select":!1,"loading-text":o.$t("Chargement des éléments"),"no-data-text":o.$t("Pas de données"),"no-results-text":o.$t("Aucun résultat"),onPageCount:e[38]||(e[38]=t=>Y.value=t)},{top:u(()=>[l(bl,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:u(()=>[l($e,null,{default:u(()=>[l(y,null,{default:u(()=>[l(A,{density:"compact",modelValue:i.value.search,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.search=t),placeholder:o.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(y,null,{default:u(()=>[l(fe,{density:"compact",modelValue:i.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.event_type=t),placeholder:o.$t("Prestation"),items:G.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,null,{default:u(()=>[l(fe,{density:"compact",modelValue:i.value.status,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.status=t),placeholder:o.$t("Statut"),items:N(S).statusesList,"item-value":"id","item-title":"label",clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,null,{default:u(()=>[l(fe,{density:"compact",modelValue:i.value.source,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.source=t),placeholder:o.$t("Source"),items:["admin","site"],clearable:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder"])]),_:1}),l(y,null,{default:u(()=>[l(pe,{ref:"dialog",modelValue:X.value,"onUpdate:modelValue":e[9]||(e[9]=t=>X.value=t),"return-value":i.value.date,"onUpdate:returnValue":e[10]||(e[10]=t=>i.value.date=t),persistent:"",width:"290px"},{activator:u(({props:t})=>[l(A,L({modelValue:Q.value,"onUpdate:modelValue":e[4]||(e[4]=n=>Q.value=n),"prepend-inner-icon":"bx-calendar"},t,{density:"compact",placeholder:o.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[5]||(e[5]=n=>i.value.date=null)}),null,16,["modelValue","placeholder"])]),default:u(({isActive:t})=>[l(Me,{locale:"fr"},{default:u(()=>[l(Ne,{modelValue:i.value.date,"onUpdate:modelValue":e[8]||(e[8]=n=>i.value.date=n),"hide-header":"",multiple:"range"},{actions:u(()=>[l(U,{color:"primary",onClick:e[6]||(e[6]=n=>X.value=!1)},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[7]||(e[7]=n=>X.value=!1)},{default:u(()=>[D(k(o.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(y,{class:""},{default:u(()=>[l(pe,{modelValue:v.value,"onUpdate:modelValue":e[30]||(e[30]=t=>v.value=t),"max-width":"600px"},{activator:u(({props:t})=>[l(U,L({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[11]||(e[11]=n=>ie({customer:{},source:"admin"})),dark:""},t),{default:u(()=>[D(k(o.$t("Ajouter une demande")),1)]),_:2},1040)]),default:u(()=>[l(Oe,null,{default:u(()=>[l(Be,{class:"pa-4 bg-secondary"},{default:u(()=>[xe("span",Nl,k(ke.value),1)]),_:1}),l(N(pl),{ref_key:"refForm",ref:O,modelValue:se.value,"onUpdate:modelValue":e[29]||(e[29]=t=>se.value=t),onSubmit:ye},{default:u(({errors:t,isSubmitting:n})=>[l(xl,null,{default:u(()=>[l(Sl,{class:"px-0"},{default:u(()=>[l($e,null,{default:u(()=>[l(y,{cols:"12"},{default:u(()=>[l($l,{modelValue:m.value.customer_id,"onUpdate:modelValue":[e[12]||(e[12]=r=>m.value.customer_id=r),we],placeholder:o.$t("Client"),items:J.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(A,{modelValue:m.value.customer.firstname,"onUpdate:modelValue":e[13]||(e[13]=r=>m.value.customer.firstname=r),rules:[N(_e)],label:o.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(A,{modelValue:m.value.customer.lastname,"onUpdate:modelValue":e[14]||(e[14]=r=>m.value.customer.lastname=r),rules:[N(_e)],label:o.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(A,{modelValue:m.value.customer.email,"onUpdate:modelValue":e[15]||(e[15]=r=>m.value.customer.email=r),label:o.$t("Email")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(A,{modelValue:m.value.customer.phone,"onUpdate:modelValue":e[16]||(e[16]=r=>m.value.customer.phone=r),label:o.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(Ml,{modelValue:m.value.event_type,"onUpdate:modelValue":e[17]||(e[17]=r=>m.value.event_type=r),placeholder:o.$t("Type d'événement"),items:G.value.map(r=>r.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(pe,{ref:"dialogDemandDate",modelValue:B.value,"onUpdate:modelValue":e[23]||(e[23]=r=>B.value=r),"return-value":m.value.event_date,"onUpdate:returnValue":e[24]||(e[24]=r=>m.value.event_date=r),persistent:"",width:"290px"},{activator:u(({props:r})=>[l(A,L({modelValue:ee.value,"onUpdate:modelValue":e[18]||(e[18]=g=>ee.value=g),"prepend-inner-icon":"bx-calendar"},r,{placeholder:o.$t("Date de la demande"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[19]||(e[19]=g=>m.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:u(({isActive:r})=>[l(Me,{locale:"fr"},{default:u(()=>[l(Ne,{modelValue:m.value.event_date,"onUpdate:modelValue":e[22]||(e[22]=g=>m.value.event_date=g),"hide-header":""},{actions:u(()=>[l(U,{color:"primary",onClick:e[20]||(e[20]=g=>B.value=!1)},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[21]||(e[21]=g=>B.value=!1)},{default:u(()=>[D(k(o.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(fe,{modelValue:m.value.reception_start_time,"onUpdate:modelValue":e[25]||(e[25]=r=>m.value.reception_start_time=r),"hide-details":"",items:[o.$t("En matiné"),o.$t("Le midi"),o.$t("En soirée")],label:o.$t("La réception se déroulera plutôt"),clearable:""},null,8,["modelValue","items","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(A,{modelValue:m.value.event_location,"onUpdate:modelValue":e[26]||(e[26]=r=>m.value.event_location=r),"hide-details":"",label:o.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12",md:"6"},{default:u(()=>[l(A,{modelValue:m.value.number_people,"onUpdate:modelValue":e[27]||(e[27]=r=>m.value.number_people=r),"hide-details":"",type:"number",label:o.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1}),l(y,{cols:"12"},{default:u(()=>[l(Fl,{modelValue:m.value.comment,"onUpdate:modelValue":e[28]||(e[28]=r=>m.value.comment=r),"hide-details":"",label:o.$t("Description de la demande")},null,8,["modelValue","label"])]),_:1})]),_:1}),t.apiError?(ce(),Re("div",Ol,[l(El,{color:"error"},{default:u(()=>[D(k(t.apiError),1)]),_:2},1024)])):Se("",!0)]),_:2},1024)]),_:2},1024),l(je,null,{default:u(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:be},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",loading:p.value,type:"submit"},{default:u(()=>[D(k(o.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(le)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(pe,{modelValue:z.value,"onUpdate:modelValue":e[32]||(e[32]=t=>z.value=t),"max-width":"500px"},{default:u(()=>[l(Oe,null,{default:u(()=>[l(Be,{class:"text-h5 text-center py-6"},{default:u(()=>[D(k(o.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(je,null,{default:u(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:e[31]||(e[31]=t=>z.value=!1)},{default:u(()=>[D(k(o.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",dark:"",onClick:he},{default:u(()=>[D(k(o.$t("OK")),1)]),_:1}),l(le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.demand_date":u(({item:t})=>[D(k(N(Ue)(t.demand_date)),1)]),"item.event_date":u(({item:t})=>[D(k(N(Ue)(t.event_date)),1)]),"item.status":u(({item:t})=>[l(He,{color:N(S).statusColor(t.status),size:"small",label:""},{default:u(()=>[D(k(N(S).statusText(t.status)),1)]),_:2},1032,["color"])]),"item.actions":u(({index:t,item:n})=>[xe("div",Bl,[n.prestation?Se("",!0):(ce(),Le(Vl,{key:0,density:"compact",modelValue:w.value[t],"onUpdate:modelValue":r=>w.value[t]=r},null,8,["modelValue","onUpdate:modelValue"])),l(U,{density:"compact",color:"primary",class:"mx-2",variant:"outlined",to:"/demands/"+n.id},{default:u(()=>[D(k(o.$t("Voir")),1)]),_:2},1032,["to"]),l(ze,{text:o.$t("Modifier")},{activator:u(({props:r})=>[l(U,L({icon:"",flat:"",onClick:g=>ie(n)},r),{default:u(()=>[l(s,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),n.prestation==null?(ce(),Le(ze,{key:1,text:o.$t("Supprimer")},{activator:u(({props:r})=>[l(U,L({icon:"",flat:"",onClick:g=>ge(n)},r),{default:u(()=>[l(f,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):Se("",!0)])]),"no-data":u(()=>[xe("span",null,k(o.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{ya as default};
