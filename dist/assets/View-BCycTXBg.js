import{u as B}from"./Controller-DxG5QcMm.js";import{a6 as F,e as D,o as c,_ as k,w as t,b as e,a as s,d as $,t as a,c as A,a4 as w,av as q,r as i,aK as I,n as R,V as P,a8 as _,h as ue,Z as J,aL as de,g as ie,aM as me,X,a5 as ae}from"./index-D4NqtLTp.js";import{_ as ce,V as le}from"./BaseBreadcrumb-Bp39IOCQ.js";import{a as E,f as W}from"./formatters-ChhyeSK0.js";import{d as K,V as U,a as T,b as z,c as H}from"./VCard-DA9krIf3.js";import{f as N}from"./VMenu-qMil_YxV.js";import{a as M,V as b}from"./VRow-DWLkePA4.js";import{V as Y}from"./VTextarea-DwvnE-P8.js";import{a as O,V as Z}from"./VSpacer-lO7MNm1A.js";import{V as G}from"./VDialog-C8GPX9E5.js";import{u as ve}from"./service-CqLVEdgF.js";import{V as fe}from"./VAutocomplete-DDopvPbQ.js";import{V as se}from"./VTextField-Bt8H8ul5.js";import{a as oe,b as pe,_ as _e}from"./PaymentForm.vue_vue_type_script_setup_true_lang-BPlP_mLm.js";import{V as he}from"./VAlert-D6dSeqbA.js";import{V as $e}from"./VTooltip-s-EtZT8E.js";import"./VAvatar-DumI1WKs.js";import"./VSelect-aUsnZRPj.js";import"./filter-N7bs83nJ.js";import"./hall-1_kRcPty.js";import"./paymentMethod-Bq_FzliS.js";import"./VLocaleProvider-CFb7282C.js";import"./VDatePicker-CwBYc65f.js";import"./VSheet-F9cQmJJd.js";const Ve={class:"text-h6 d-flex align-content-center align-center"},ye=s("br",null,null,-1),ge={class:"text-subtitle-1 textSecondary mt-3"},be={class:"text-subtitle-1 textSecondary mt-3"},ke={class:"text-subtitle-1 textSecondary mt-3"},Ce={class:"text-subtitle-1 textSecondary mt-3"},Se={class:"text-subtitle-1 textSecondary mt-3"},xe={key:0,class:"text-subtitle-1 textSecondary mt-3"},we={key:1,class:"text-subtitle-1 textSecondary mt-3"},je={key:2,class:"text-subtitle-1 textSecondary mt-3"},Pe={key:3,class:"text-subtitle-1 textSecondary mt-3"},Ae={key:4,class:"text-subtitle-1 textSecondary mt-3"},Ue={key:5,class:"text-subtitle-1 textSecondary mt-3"},De={class:"text-subtitle-1 textSecondary mt-3"},Ie=["innerHTML"],Oe=F({__name:"HallWidget",props:{modelValue:Object,showDemandInfo:Boolean},emits:["update:modelValue"],setup(j,{emit:l}){B();const f=j,x=l,v=D({get:()=>f.modelValue,set:r=>x("update:modelValue",r)});return(r,d)=>(c(),k(T,{elevation:"10",class:"overflow-hidden h-100"},{default:t(()=>[e(K,{class:"py-4 px-6 text-white bg-info"},{default:t(()=>[s("h4",Ve,[$(a(r.$t("Information de la salle"))+" ",1),e(O),e(oe,{modelValue:v.value,"onUpdate:modelValue":d[0]||(d[0]=u=>v.value=u)},null,8,["modelValue"])])]),_:1}),v.value.hall?(c(),k(U,{key:1,class:"pl-6 pr-6"},{default:t(()=>[s("p",ge,a(r.$t("Nom :"))+" "+a(v.value.hall.name||""),1),s("p",be,a(r.$t("Adresse :"))+" "+a(v.value.hall.address||""),1),s("p",ke,a(r.$t("Nom du régisseur :"))+" "+a(v.value.hall.manager_name||""),1),s("p",Ce,a(r.$t("Téléphone du régisseur :"))+" "+a(v.value.hall.manager_phone||""),1),s("p",Se,a(r.$t("Mail du régisseur :"))+" "+a(v.value.hall.manager_email||""),1),v.value.hall.packing?(c(),A("p",xe,a(r.$t("Parking :"))+" "+a("Oui"),1)):w("",!0),v.value.hall.kitchen?(c(),A("p",we,a(r.$t("Cuisine :"))+" "+a("Oui"),1)):w("",!0),v.value.hall.cold_rooom?(c(),A("p",je,a(r.$t("Chambre froidre :"))+" "+a("Oui"),1)):w("",!0),v.value.hall.ladder?(c(),A("p",Pe,a(r.$t("Escalier pour déchargement :"))+" "+a("Oui"),1)):w("",!0),v.value.hall.transportation_fee?(c(),A("p",Ae,a(r.$t("Frais de déplacement à prévoir :"))+" "+a("Oui"),1)):w("",!0),v.value.hall.table?(c(),A("p",Ue,a(r.$t("Table de buffet :"))+" "+a("Oui"),1)):w("",!0),s("p",De,a(r.$t("Bac de poubelle :"))+" "+a(v.value.hall.bin=="salle"?r.$t("Géré par la salle"):r.$t("Géré par le client")),1),s("p",{class:"text-subtitle-1 textSecondary mt-3",innerHTML:v.value.hall.comment?v.value.hall.comment:""},null,8,Ie)]),_:1})):(c(),k(U,{key:0,class:"pl-6 pr-6 pt-6"},{default:t(()=>[e(he,{type:"info"},{default:t(()=>[$(a(r.$t("Aucune salle n'a été attribuée. Veuillez attribuer une salle."))+" ",1),ye,e(oe,{modelValue:v.value,"onUpdate:modelValue":d[1]||(d[1]=u=>v.value=u)},null,8,["modelValue"])]),_:1})]),_:1}))]),_:1}))}}),Te=F({__name:"CancelPrestation",props:{modelValue:Object},emits:["update:modelValue"],setup(j,{emit:l}){const f=B(),x=q(),v=j,r=l,d=D({get:()=>v.modelValue,set:o=>r("update:modelValue",o)}),u=i(!1),h=i(!1),C=i("");D(()=>`${I("Annuler la prestation")}`);function S(){h.value=!0,f.cancelItem(d.value.id,C.value).then(o=>{d.value=o.data,u.value=!1,x.showSuccess(I("Prestation annulée avec succès"))}).catch(o=>{h.value=!1,x.showError(o.message)}).then(()=>{h.value=!1})}return(o,p)=>(c(),k(G,{modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=m=>u.value=m),"max-width":"500px"},{activator:t(({props:m})=>[e(P,R({class:"ml-2",dark:""},m,{variant:"outlined",color:"primary",onClick:p[0]||(p[0]=V=>h.value=!1)}),{default:t(()=>[$(a(o.$t("Annuler la prestation")),1)]),_:2},1040)]),default:t(()=>[e(T,null,{default:t(()=>[e(z,{class:"text-h5 text-center py-6"},{default:t(()=>[$(a(o.$t("Annuler la prestation")),1)]),_:1}),e(N),e(U,null,{default:t(()=>[e(M,null,{default:t(()=>[e(b,{cols:"12",class:"text-center"},{default:t(()=>[$(a(o.$t("Êtes-vous sûr de vouloir Annuler la prestation?")),1)]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(Y,{modelValue:C.value,"onUpdate:modelValue":p[1]||(p[1]=m=>C.value=m),placeholder:o.$t("Commentaire"),label:o.$t("Commentaire")},null,8,["modelValue","placeholder","label"])]),_:1})]),_:1})]),_:1}),e(N),e(H,null,{default:t(()=>[e(O),e(P,{color:"error",variant:"flat",dark:"",onClick:p[2]||(p[2]=m=>u.value=!1)},{default:t(()=>[$(a(o.$t("Non")),1)]),_:1}),e(P,{color:"success",variant:"flat",loading:h.value,dark:"",onClick:S},{default:t(()=>[$(a(o.$t("Oui")),1)]),_:1},8,["loading"]),e(O)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Me=F({__name:"ValidatePrestation",props:{modelValue:Object},emits:["update:modelValue"],setup(j,{emit:l}){const f=B(),x=q(),v=j,r=l,d=D({get:()=>v.modelValue,set:o=>r("update:modelValue",o)}),u=i(!1),h=i(!1),C=i("");D(()=>`${I("Valider la prestation")}`);function S(){h.value=!0,f.validateItem(d.value.id,C.value).then(o=>{d.value=o.data,u.value=!1,x.showSuccess(I("Prestation validée avec succès"))}).catch(o=>{h.value=!1,x.showError(o.message)}).then(()=>{h.value=!1})}return(o,p)=>(c(),k(G,{modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=m=>u.value=m),"max-width":"500px"},{activator:t(({props:m})=>[e(P,R({dark:""},m,{variant:"elevated",color:"primary",onClick:p[0]||(p[0]=V=>h.value=!1)}),{default:t(()=>[$(a(d.value.status==_(f).statuses.cancelled?o.$t("Rouvrir la prestation"):o.$t("Valider la prestation")),1)]),_:2},1040)]),default:t(()=>[e(T,null,{default:t(()=>[e(z,{class:"text-h5 text-center py-6"},{default:t(()=>[$(a(d.value.status==_(f).statuses.cancelled?o.$t("Rouvrir la prestation"):o.$t("Valider la prestation")),1)]),_:1}),e(N),e(U,null,{default:t(()=>[e(M,null,{default:t(()=>[e(b,{cols:"12",class:"text-center"},{default:t(()=>[$(a(d.value.status==_(f).statuses.cancelled?o.$t("Êtes-vous sûr de vouloir Rouvrir la prestation"):o.$t("Êtes-vous sûr de vouloir Valider la prestation?")),1)]),_:1}),d.value.status==_(f).statuses.cancelled?(c(),k(b,{key:0,cols:"12"},{default:t(()=>[e(Y,{modelValue:C.value,"onUpdate:modelValue":p[1]||(p[1]=m=>C.value=m),placeholder:o.$t("Commentaire"),label:o.$t("Commentaire")},null,8,["modelValue","placeholder","label"])]),_:1})):w("",!0)]),_:1})]),_:1}),e(N),e(H,null,{default:t(()=>[e(O),e(P,{color:"error",variant:"flat",dark:"",onClick:p[2]||(p[2]=m=>u.value=!1)},{default:t(()=>[$(a(o.$t("Non")),1)]),_:1}),e(P,{color:"success",variant:"flat",loading:h.value,dark:"",onClick:S},{default:t(()=>[$(a(o.$t("Oui")),1)]),_:1},8,["loading"]),e(O)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ee={class:"text-h6"},Ne={class:"text-subtitle-1 textSecondary mt-3"},Be={class:"text-subtitle-1 textSecondary mt-3"},Fe={class:"text-subtitle-1 textSecondary mt-3"},Le={class:"text-subtitle-1 textSecondary mt-3"},qe={class:"text-subtitle-1 textSecondary mt-3"},Re={class:"text-subtitle-1 textSecondary mt-3"},ze={class:"text-subtitle-1 textSecondary mt-3"},He={class:"text-subtitle-1 textSecondary mt-3"},Ge={key:0,class:"text-subtitle-1 textSecondary mt-3"},Qe={key:1,class:"text-subtitle-1 textSecondary mt-3"},We=F({__name:"CustomerWidget",props:{modelValue:Object,showDemandInfo:Boolean},emits:["update:modelValue"],setup(j,{emit:l}){const f=B(),x=j,v=l,r=D({get:()=>x.modelValue,set:d=>v("update:modelValue",d)});return(d,u)=>(c(),k(T,{elevation:"10",class:"overflow-hidden h-100"},{default:t(()=>[e(K,{class:"py-4 px-6 text-white bg-primary"},{default:t(()=>[s("h4",Ee,a(d.$t("Identification du demandeur")),1)]),_:1}),e(U,{class:"pl-6 pr-6"},{default:t(()=>[s("p",Ne,a(d.$t("Prénom :"))+" "+a(r.value.customer.firstname||""),1),s("p",Be,a(d.$t("Nom :"))+" "+a(r.value.customer.lastname||""),1),s("p",Fe,a(d.$t("Email :"))+" "+a(r.value.customer.email||""),1),s("p",Le,a(d.$t("Téléphone :"))+" "+a(r.value.customer.phone||""),1),s("p",qe,a(d.$t("Date d'enregistrement :"))+" "+a(_(E)(r.value.customer.created_at)||""),1),s("p",Re,[$(a(d.$t("Type :"))+" ",1),r.value.customer&&r.value.customer.is_customer?(c(),k(Z,{key:0,color:"success"},{default:t(()=>[$(a(d.$t("Client")),1)]),_:1})):(c(),k(Z,{key:1,color:"error"},{default:t(()=>[$(a(d.$t("Prospect")),1)]),_:1}))])]),_:1}),j.showDemandInfo?(c(),k(U,{key:0,class:"pt-0 pb-0"},{default:t(()=>[e(N)]),_:1})):w("",!0),j.showDemandInfo?(c(),k(U,{key:1,class:"pl-6 pr-6"},{default:t(()=>[s("p",ze,a(d.$t("Date de la demande :"))+" "+a(_(E)(r.value.demand_date)||""),1),s("p",He,a(d.$t("Date création de la prestation :"))+" "+a(_(E)(r.value.created_at)||""),1),r.value.status>=_(f).statuses.processing?(c(),A("p",Ge,a(d.$t("Date lancement de la prestation :"))+" "+a(_(E)(r.value.start_date)||""),1)):w("",!0),r.value.status>=_(f).statuses.closed?(c(),A("p",Qe,a(d.$t("Date clôture de la prestation :"))+" "+a(_(E)(r.value.closed_date)||""),1)):w("",!0)]),_:1})):w("",!0)]),_:1}))}}),Ke={key:1},ne=F({__name:"ServiceForm",props:{modelValue:Object,prestation:Object,title:I("Service"),buttonText:I("Ajouter un service")},emits:["update:modelValue","update:item"],setup(j,{emit:l}){const f=B(),x=q(),v=ve(),r=j,d=l,u=D({get:()=>r.modelValue,set:m=>d("update:modelValue",m)}),h=i(!1),C=i(!1),S=i([]);ue(()=>{v.fetchItems({per_page:500}).then(m=>{S.value=m.data.data,console.log(S.value)})});function o(){C.value=!0,f.saveService(r.prestation.id,u.value).then(m=>{h.value=!1,d("update:item",m.data),u.value={},u.value={},x.showSuccess(I("Service enregistré avec succès"))}).catch(m=>{C.value=!1,x.showError(m.message)}).then(()=>{C.value=!1})}function p(m){if(m){const V=S.value.find(L=>L.name==m);V&&(u.value.quantity=u.value.quantity||1,u.value.service_id=V.id||null,u.value.price=V.price||0,u.value.total=(u.value.quantity||1)*(V.price||0))}}return(m,V)=>{const L=J("EditIcon");return c(),k(G,{modelValue:h.value,"onUpdate:modelValue":V[5]||(V[5]=n=>h.value=n),"max-width":"500px"},{activator:t(({props:n})=>[e(P,R({dark:""},n,{icon:u.value.id!=null,flat:u.value.id!=null,variant:"elevated",color:u.value.id!=null?null:"primary",onClick:V[0]||(V[0]=y=>C.value=!1)}),{default:t(()=>[u.value.id?(c(),k(L,{key:0,"stroke-width":"1.5",size:"20",class:"text-primary"})):(c(),A("span",Ke,a(j.buttonText),1))]),_:2},1040,["icon","flat","color"])]),default:t(()=>[e(T,null,{default:t(()=>[e(z,{class:"text-h5 text-center py-6"},{default:t(()=>[$(a(j.title),1)]),_:1}),e(N),e(U,null,{default:t(()=>[e(M,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(fe,{modelValue:u.value.name,"onUpdate:modelValue":[V[1]||(V[1]=n=>u.value.name=n),p],label:m.$t("Service"),clearable:"",items:S.value,"item-title":"name","item-value":"name",filled:!1,variant:"outlined"},null,8,["modelValue","label","items"])]),_:1}),e(b,{cols:"12",md:"6"},{default:t(()=>[e(se,{min:1,modelValue:u.value.quantity,"onUpdate:modelValue":V[2]||(V[2]=n=>u.value.quantity=n),type:"number",label:m.$t("Quantité")},null,8,["modelValue","label"])]),_:1}),e(b,{cols:"12",md:"6"},{default:t(()=>[e(se,{min:0,modelValue:u.value.price,"onUpdate:modelValue":V[3]||(V[3]=n=>u.value.price=n),type:"number",label:m.$t("Prix")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(O),e(P,{color:"error",variant:"flat",dark:"",onClick:V[4]||(V[4]=n=>h.value=!1)},{default:t(()=>[$(a(m.$t("Annuler")),1)]),_:1}),e(P,{color:"success",variant:"flat",loading:C.value,dark:"",onClick:o},{default:t(()=>[$(a(m.$t("Ajouter")),1)]),_:1},8,["loading"]),e(O)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Xe=F({__name:"DeleteService",props:{modelValue:Object,service:Object},emits:["update:modelValue"],setup(j,{emit:l}){const f=B(),x=q(),v=j,r=l,d=D({get:()=>v.modelValue,set:S=>r("update:modelValue",S)}),u=i(!1),h=i(!1);function C(){h.value=!0,f.deleteService(d.value.id,v.service.id).then(S=>{d.value=S.data,u.value=!1,x.showSuccess(I("Service supprimé avec succès"))}).then(()=>{u.value=!1,h.value=!1})}return(S,o)=>{const p=J("TrashIcon");return c(),k(G,{modelValue:u.value,"onUpdate:modelValue":o[2]||(o[2]=m=>u.value=m),"max-width":"350px"},{activator:t(({props:m})=>[e(P,R({icon:"",flat:"",class:"ml-3",dark:""},m,{onClick:o[0]||(o[0]=V=>h.value=!1)}),{default:t(()=>[e(p,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040)]),default:t(()=>[e(T,null,{default:t(()=>[e(z,{class:"text-h5 text-center py-6"},{default:t(()=>[$(a(S.$t("Êtes-vous sûr de vouloir supprimer le service?")),1)]),_:1}),e(H,null,{default:t(()=>[e(O),e(P,{color:"error",variant:"flat",dark:"",onClick:o[1]||(o[1]=m=>u.value=!1)},{default:t(()=>[$(a(S.$t("Non")),1)]),_:1}),e(P,{color:"success",variant:"flat",loading:h.value,dark:"",onClick:C},{default:t(()=>[$(a(S.$t("Oui")),1)]),_:1},8,["loading"]),e(O)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ze=F({__name:"CommentPrestation",props:{modelValue:Object},emits:["update:modelValue"],setup(j,{emit:l}){const f=B(),x=q(),v=j,r=l,d=D({get:()=>v.modelValue,set:o=>r("update:modelValue",o)}),u=i(!1),h=i(!1),C=i(d.value.commentaire||"");D(()=>`${I("Commentaire")}`);function S(){h.value=!0,f.addComment(d.value.id,C.value).then(o=>{d.value=o.data,u.value=!1,x.showSuccess(I("Commentaire ajouté avec succès"))}).catch(o=>{h.value=!1,x.showError(o.message)}).then(()=>{h.value=!1})}return(o,p)=>(c(),k(G,{modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=m=>u.value=m),"max-width":"500px"},{activator:t(({props:m})=>[e(P,R({density:"compact",dark:""},m,{variant:"outlined",color:"primary",onClick:p[0]||(p[0]=V=>h.value=!1)}),{default:t(()=>[$(a(!d.value.commentaire||d.value.commentaire.length==0?o.$t("Ajouter"):o.$t("Modifier")),1)]),_:2},1040)]),default:t(()=>[e(T,null,{default:t(()=>[e(z,{class:"text-h5 text-center py-6"},{default:t(()=>[$(a(!d.value.commentaire||d.value.commentaire.length==0?o.$t("Ajouter un commentaire"):o.$t("Modifier le commentaire")),1)]),_:1}),e(N),e(U,null,{default:t(()=>[e(M,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(Y,{modelValue:C.value,"onUpdate:modelValue":p[1]||(p[1]=m=>C.value=m),placeholder:o.$t("Commentaire"),label:o.$t("Commentaire")},null,8,["modelValue","placeholder","label"])]),_:1})]),_:1})]),_:1}),e(N),e(H,null,{default:t(()=>[e(O),e(P,{color:"error",variant:"flat",dark:"",onClick:p[2]||(p[2]=m=>u.value=!1)},{default:t(()=>[$(a(o.$t("Annuler")),1)]),_:1}),e(P,{color:"success",variant:"flat",loading:h.value,dark:"",onClick:S},{default:t(()=>[$(a(o.$t("Enregistrer")),1)]),_:1},8,["loading"]),e(O)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Je={key:0,class:"ml-2"},Ye={class:"d-flex align-start"},et={class:"text-h4 mt-1"},tt={class:"ml-auto"},at={class:"mt-9"},lt={class:"text-h4 font-weight-semibold mb-1"},st={class:"d-flex align-start"},ot={class:"text-h4 mt-1"},nt={class:"ml-auto"},ut={class:"mt-9"},rt={class:"text-h4 font-weight-semibold mb-1"},dt={class:"d-flex align-start"},it={class:"text-h4 mt-1"},mt={class:"mt-4"},ct={class:"mb-1"},vt={class:"d-flex align-start"},ft={class:"text-h4 mt-1"},pt={class:"mt-4"},_t={class:"mb-1"},ht={class:"d-flex align-start"},$t={class:"text-h4 mt-1"},Vt={class:"mt-4"},yt={class:"mb-1"},gt={class:"text-h6 d-flex align-center"},bt={class:"text-h6"},kt={class:"text-h6"},Ct={class:"text-h6"},St={class:"text-h6"},xt={class:"text-h6"},wt={key:0,class:"d-flex align-center"},jt={class:"text-h6 d-flex align-center"},Pt={class:"text-h6"},At={class:"text-h6"},Ut={class:"text-h6"},aa=F({__name:"View",setup(j){i(),q();const l=i({id:null,status:0,service:"",demand_date:null,customer_id:null,demand_id:null,payments:[],services:[],customer:{id:null,firstname:"",lastname:"",email:"",phone:"",is_customer:!1,created_at:null,demands:[],prestations:[]}}),f=B(),x=de(),v=i({title:I("Détails du prestation")+" "+(l.value.event_type||"")+" "+(l.value.customer||{firstname:""}).firstname+" "+(l.value.customer||{lastname:""}).lastname+" "+(E(l.value.demand_date)||"")}),r=i([{text:I("Dashboard"),disabled:!1,href:"/"},{text:I("Prestations"),disabled:!1,href:"/prestations"},{text:l.value.event_type||"",disabled:!0,href:"#"}]);function d(){v.value={title:I("Prestation")+" "+(l.value.demand.event_type||"")+" ("+(l.value.customer||{firstname:""}).firstname+" "+(l.value.customer||{lastname:""}).lastname+" "+(E(l.value.event_date)||"")+")"},r.value=[{text:I("Dashboard"),disabled:!1,href:"/"},{text:I("Prestations"),disabled:!1,href:"/prestations"},{text:v.value.title,disabled:!0,href:"#"}]}ue(()=>{V()});const u=i(!1);i(!1),i(!1),i(!1),i(!1),i(!1),i(!1),i({}),i({}),i(!1),i(10),i(2),i(2),i(!1),i(!1),i(null);const h=i("");i(["primary","secondary","error","success","warning"]),i([{key:"demand_date",order:"DESC"}]),i(0),i({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"demand_date",order:"DESC"}]});const C=i(-1);i({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""});const S=i({id:null,service_id:null,name:"",price:0,total:0,quantity:0});i({id:null,prestation_id:null,amount:0}),i({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),i(!1),i([{title:"Prestation",align:"start",key:"event_type"},{title:"Date de la prestation",align:"start",key:"demand_date"},{title:"Status",align:"start",key:"status"},{title:"Actions",key:"actions",sortable:!1}]),D(()=>f.prestations.data.filter(n=>n.email.toLowerCase().includes(h.value.toLowerCase())));const o=D(()=>x.params.id);D(()=>l.value.customer.prestations?l.value.customer.prestations.filter(n=>n.id!=l.value.id):[]);const p=D(()=>l.value.services&&l.value.services.length?l.value.services.reduce((n,y)=>(console.log(y.total,n),parseFloat(y.total)+parseFloat(n)),0):0),m=D(()=>l.value.payments&&l.value.payments.length?p.value-l.value.payments.reduce((n,y)=>parseFloat(y.amount)+parseFloat(n),0):p.value);D(()=>C.value===-1?"Nouvel administrateur":"Modifier l’administrateur");function V(){u.value=!0,f.fetchItem(x.params.id).then(n=>{n.data.error||(u.value=!1,l.value=n.data,d())}).catch(n=>{u.value=!1}).then(()=>{u.value=!1})}function L(n){l.value=n}return ie(o,(n,y)=>{n!=y&&V()},{deep:!0}),(n,y)=>{const ee=J("CurrencyEuroIcon");return c(),A(X,null,[u.value?w("",!0):(c(),k(ce,{key:0,title:v.value.title,breadcrumbs:r.value},null,8,["title","breadcrumbs"])),u.value?(c(),k(M,{key:1,justify:"center",align:"center","align-content":"center"},{default:t(()=>[e(b,{cols:"12",justify:"center",align:"center","align-content":"center"},{default:t(()=>[e(me,{indeterminate:"",color:"primary",size:"150"})]),_:1})]),_:1})):(c(),k(M,{key:2},{default:t(()=>[e(b,{cols:"12",md:"4"},{default:t(()=>[$(a(n.$t("Status :"))+" ",1),e(Z,{rounded:"md",class:"font-weight-bold",color:_(f).statusColor(l.value.status),size:"small",label:""},{default:t(()=>[$(a(_(f).statusText(l.value.status)),1)]),_:1},8,["color"]),l.value.status==_(f).statuses.cancelled?(c(),A("span",Je,a(n.$t("Le"))+" "+a(_(E)(l.value.cancelled_date)||""),1)):w("",!0)]),_:1}),e(b,{cols:"12",md:"8",justify:"end","align-content":"end",align:"end"},{default:t(()=>[l.value.status==_(f).statuses.started||l.value.status==_(f).statuses.cancelled?(c(),k(Me,{key:0,modelValue:l.value,"onUpdate:modelValue":y[0]||(y[0]=g=>l.value=g)},null,8,["modelValue"])):w("",!0),l.value.status==_(f).statuses.validated?(c(),k(pe,{key:1,modelValue:l.value,"onUpdate:modelValue":y[1]||(y[1]=g=>l.value=g)},null,8,["modelValue"])):w("",!0),l.value.status!=_(f).statuses.cancelled?(c(),k(Te,{key:2,modelValue:l.value,"onUpdate:modelValue":y[2]||(y[2]=g=>l.value=g)},null,8,["modelValue"])):w("",!0),e(N,{vertical:""}),e(P,{variant:"elevated",color:"success",class:"ml-2",to:"/customers/"+l.value.customer_id},{default:t(()=>[$(a(n.$t("Voir le Client")),1)]),_:1},8,["to"])]),_:1}),e(b,{cols:"12",md:"3"},{default:t(()=>[e(We,{modelValue:l.value,"onUpdate:modelValue":y[3]||(y[3]=g=>l.value=g),"show-demand-info":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",md:"3"},{default:t(()=>[e(Oe,{modelValue:l.value,"onUpdate:modelValue":y[4]||(y[4]=g=>l.value=g),"show-demand-info":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",md:"6",class:"justify-end align-end"},{default:t(()=>[e(M,{class:"align-end justify-end align-content-end"},{default:t(()=>[e(b,{cols:"12",class:"align-end justify-end align-content-end"},{default:t(()=>[e(M,{class:"align-end justify-end align-content-end"},{default:t(()=>[l.value.status>=_(f).statuses.validated?(c(),k(b,{key:0,cols:"12",md:"6",class:""},{default:t(()=>[e(T,{elevation:"10"},{default:t(()=>[e(U,null,{default:t(()=>[s("div",Ye,[s("h2",et,a(n.$t("Reste à payer")),1),e(O),s("div",tt,[e(P,{color:"primary",icon:"",flat:""},{default:t(()=>[e(ee)]),_:1})])]),s("div",at,[s("h2",lt,a(_(W)(m.value)),1)])]),_:1})]),_:1})]),_:1})):w("",!0),e(b,{cols:"12",md:"6"},{default:t(()=>[e(T,{elevation:"10"},{default:t(()=>[e(U,null,{default:t(()=>[s("div",st,[s("h2",ot,a(n.$t("Montant total")),1),e(O),s("div",nt,[e(P,{color:"primary",icon:"",flat:""},{default:t(()=>[e(ee)]),_:1})])]),s("div",ut,[s("h2",rt,a(_(W)(p.value||0)),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{cols:"12",class:"align-end justify-end align-content-end"},{default:t(()=>[e(M,{class:"align-end justify-end align-content-end"},{default:t(()=>[e(b,{class:"h-100",cols:"12"},{default:t(()=>[e(M,null,{default:t(()=>[e(b,{cols:"12",md:"6"},{default:t(()=>[e(T,{elevation:"10",class:"h-100"},{default:t(()=>[e(U,null,{default:t(()=>[s("div",dt,[s("h2",it,a(n.$t("Note liée à la prestation")),1)]),s("div",mt,[s("p",ct,a(l.value.comment||n.$t("Aucun note")),1)])]),_:1})]),_:1})]),_:1}),e(b,{cols:"12",md:"6"},{default:t(()=>[e(T,{elevation:"10",class:"h-100"},{default:t(()=>[e(U,null,{default:t(()=>[s("div",vt,[s("h2",ft,a(n.$t("Commentaire")),1),e(Ze,{modelValue:l.value,"onUpdate:modelValue":y[5]||(y[5]=g=>l.value=g)},null,8,["modelValue"])]),s("div",pt,[s("p",_t,a(l.value.commentaire||n.$t("Aucun commentaire")),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.value.status==_(f).statuses.cancelled?(c(),k(b,{key:0,cols:"12"},{default:t(()=>[e(T,{elevation:"10",class:"h-100"},{default:t(()=>[e(U,null,{default:t(()=>[s("div",ht,[s("h2",$t,a(n.$t("Raison de l'annulation")),1)]),s("div",Vt,[s("p",yt,a(l.value.cancel_comment||n.$t("Aucun commentaire")),1)])]),_:1})]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{cols:"12",lg:l.value.status>_(f).statuses.started?"6":"12"},{default:t(()=>[e(T,{elevation:"10",class:"overflow-hidden h-100"},{default:t(()=>[e(K,{class:"py-4 px-6 text-white bg-info"},{default:t(()=>[s("h4",gt,[s("span",null,a(n.$t("Désignation des services attendus")),1),e(O),e(ne,{modelValue:S.value,"onUpdate:modelValue":y[6]||(y[6]=g=>S.value=g),prestation:l.value,"onUpdate:item":L,"button-text":n.$t("Ajouter un service"),title:n.$t("Ajouter un service")},null,8,["modelValue","prestation","button-text","title"])])]),_:1}),e(U,{class:"pa-6"},{default:t(()=>[e(le,{class:"month-table"},{default:t(()=>[s("thead",null,[s("tr",null,[s("th",bt,a(n.$t("Désignation")),1),s("th",kt,a(n.$t("Quantité")),1),s("th",Ct,a(n.$t("Prix unitaire")),1),s("th",St,a(n.$t("Prix total")),1),s("th",xt,a(n.$t("Actions")),1)])]),s("tbody",null,[(c(!0),A(X,null,ae(l.value.services,(g,Q)=>(c(),A("tr",{key:g.id,class:"month-item"},[s("td",null,a(g.name),1),s("td",null,a(g.quantity),1),s("td",null,a(_(W)(g.price)),1),s("td",null,a(_(W)(g.total)),1),s("td",null,[l.value.status<_(f).statuses.processing?(c(),A("div",wt,[e($e,{text:n.$t("Modifier")},{activator:t(({props:te})=>[e(ne,{modelValue:l.value.services[Q],"onUpdate:modelValue":re=>l.value.services[Q]=re,prestation:l.value,"onUpdate:item":L,"button-text":n.$t("Modifier le service"),title:n.$t("Modifier le service")},null,8,["modelValue","onUpdate:modelValue","prestation","button-text","title"])]),_:2},1032,["text"]),e(Xe,{modelValue:l.value,"onUpdate:modelValue":y[7]||(y[7]=te=>l.value=te),service:l.value.services[Q]},null,8,["modelValue","service"])])):w("",!0)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1},8,["lg"]),l.value.status>_(f).statuses.started?(c(),k(b,{key:0,cols:"12",lg:l.value.status>_(f).statuses.started?"6":"12"},{default:t(()=>[e(T,{elevation:"10",class:"overflow-hidden h-100"},{default:t(()=>[e(K,{class:"py-4 px-6 text-white bg-info"},{default:t(()=>[s("h4",jt,[s("span",null,a(n.$t("Paiements")),1),e(O),e(_e,{prestation:l.value,"onUpdate:item":L,"button-text":n.$t("Ajouter un paiement"),title:n.$t("Ajouter un paiement")},null,8,["prestation","button-text","title"])])]),_:1}),e(U,{class:"pa-6"},{default:t(()=>[e(le,{class:"month-table"},{default:t(()=>[s("thead",null,[s("tr",null,[s("th",Pt,a(n.$t("Mode de paiement")),1),s("th",At,a(n.$t("Montant payé")),1),s("th",Ut,a(n.$t("Date du paiement")),1)])]),s("tbody",null,[(c(!0),A(X,null,ae(l.value.payments,(g,Q)=>(c(),A("tr",{key:g.id},[s("td",null,a(g.payment_method),1),s("td",null,a(g.amount),1),s("td",null,a(_(E)(g.payment_date)),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1},8,["lg"])):w("",!0)]),_:1}))],64)}}});export{aa as default};
