import{u as He}from"./demands-DoAmlif8.js";import{u as qe}from"./eventType-Cz2gilU5.js";import{u as Ge}from"./customers-DySKnzoc.js";import{_ as Je}from"./BaseBreadcrumb-LVdX8PDC.js";import{r as $e}from"./validators-BPi-vT8z.js";import{f as Pe}from"./formatters-Dv1Ro_l4.js";import{p as We,ay as Xe,az as Ye,j as Ze,aA as Qe,r as i,s as ne,u as Ie,e as D,aB as el,g as ae,Y as Ue,aC as ll,m as al,b as l,X as re,n as L,ac as Ae,aD as tl,aE as ol,d as x,aF as ul,aG as nl,aH as rl,aI as sl,a6 as il,aJ as dl,av as ml,aK as b,h as vl,q as cl,Z as Te,o as xe,c as Fe,w as o,a8 as N,V as U,t as h,a as De,a4 as Ee,_ as fl}from"./index-C1pPSvJD.js";import{F as pl,V as gl}from"./vee-validate.esm-DKpOngoM.js";import{_ as Vl}from"./DemandsDashboard.vue_vue_type_script_setup_true_lang-QqWa8Fo5.js";import{V as k,a as _e}from"./VRow-g9LKXg18.js";import{V as bl}from"./VDataTableServer-DRdz_IVt.js";import{V as yl}from"./VToolbar-Dctkw7L4.js";import{m as hl,V as A}from"./VTextField-OfP7V_TP.js";import{m as kl,a as Cl,u as xl,b as Dl,V as _l,c as wl,d as Re}from"./filter-CNp5kIkl.js";import{V as ce}from"./VDialog-DrPu6G1x.js";import{V as Le}from"./VLocaleProvider-DkKbO3Ax.js";import{V as Me}from"./VDatePicker-BO1toO1z.js";import{V as le}from"./VSpacer-CaWPAfLD.js";import{V as Ne,a as Oe,b as Sl,c as Be}from"./VCard-BVb4T61p.js";import{V as $l}from"./VContainer-KCKYgExd.js";import{V as Pl}from"./VAutocomplete-xHT9dKq4.js";import{u as Il}from"./VField-BsMqbAxn.js";import{g as Ul,t as fe,f as Al,e as Tl,c as je}from"./VMenu-7fV5AHAX.js";import{V as Fl}from"./VAvatar-BHTgLP2I.js";import{V as ze}from"./VChip-D-WJyPN3.js";import{V as Ke}from"./VTooltip-CiLkysm6.js";import"./createSimpleFunctional-BxC989Qf.js";import"./VTable-BElgiHu8.js";import"./VDivider-9qlX9u9N.js";import"./index-C5zCeOI1.js";import"./VSheet-CvF0A53u.js";function El(a,y,O){if(y==null)return a;if(Array.isArray(y))throw new Error("Multiple matches is not implemented");return typeof y=="number"&&~y?l(re,null,[l("span",{class:"v-combobox__unmask"},[a.substr(0,y)]),l("span",{class:"v-combobox__mask"},[a.substr(y,O)]),l("span",{class:"v-combobox__unmask"},[a.substr(y+O)])]):a}const Rl=We({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...kl({filterKeys:["title"]}),...Cl({hideNoData:!0,returnObject:!0}),...Xe(hl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ye({transition:!1})},"VCombobox"),Ll=Ze()({name:"VCombobox",props:Rl(),emits:{"update:focused":a=>!0,"update:modelValue":a=>!0,"update:search":a=>!0,"update:menu":a=>!0},setup(a,y){var u;let{emit:O,slots:c}=y;const{t:te}=Qe(),F=i(),T=ne(!1),E=ne(!0),$=ne(!1),G=i(),J=i(),_=Ie(a,"menu"),g=D({get:()=>_.value,set:e=>{var s;_.value&&!e&&((s=G.value)!=null&&s.ΨopenChildren)||(_.value=e)}}),p=ne(-1);let W=!1;const X=D(()=>{var e;return(e=F.value)==null?void 0:e.color}),B=D(()=>g.value?a.closeText:a.openText),{items:oe,transformIn:j,transformOut:Y}=Ul(a),{textColorClasses:ue,textColorStyles:se}=el(X),v=Ie(a,"modelValue",[],e=>j(rl(e)),e=>{const s=Y(e);return a.multiple?s:s[0]??null}),R=Il(),w=ne(a.multiple?"":((u=v.value[0])==null?void 0:u.title)??""),d=D({get:()=>w.value,set:e=>{var s;if(w.value=e??"",a.multiple||(v.value=[fe(a,e)]),e&&a.multiple&&((s=a.delimiters)!=null&&s.length)){const f=e.split(new RegExp(`(?:${a.delimiters.join("|")})+`));f.length>1&&(f.forEach(t=>{t=t.trim(),t&&I(fe(a,t))}),w.value="")}e||(p.value=-1),E.value=!e}}),K=D(()=>typeof a.counterValue=="function"?a.counterValue(v.value):typeof a.counterValue=="number"?a.counterValue:a.multiple?v.value.length:d.value.length);ae(w,e=>{W?Ue(()=>W=!1):T.value&&!g.value&&(g.value=!0),O("update:search",e)}),ae(v,e=>{var s;a.multiple||(w.value=((s=e[0])==null?void 0:s.title)??"")});const{filteredItems:M,getMatches:m}=xl(a,oe,()=>E.value?"":d.value),P=D(()=>a.hideSelected?M.value.filter(e=>!v.value.some(s=>s.value===e.value)):M.value),z=D(()=>v.value.map(e=>e.value)),Z=D(()=>{var s;return(a.autoSelectFirst===!0||a.autoSelectFirst==="exact"&&d.value===((s=P.value[0])==null?void 0:s.title))&&P.value.length>0&&!E.value&&!$.value}),Q=D(()=>a.hideNoData&&!P.value.length||a.readonly||(R==null?void 0:R.isReadonly.value)),ee=i(),{onListScroll:ie,onListKeydown:pe}=Dl(ee,F);function ge(e){W=!0,a.openOnClear&&(g.value=!0)}function Ve(){Q.value||(g.value=!0)}function be(e){Q.value||(T.value&&(e.preventDefault(),e.stopPropagation()),g.value=!g.value)}function ye(e){var t;if(sl(e)||a.readonly||R!=null&&R.isReadonly.value)return;const s=F.value.selectionStart,f=v.value.length;if((p.value>-1||["Enter","ArrowDown","ArrowUp"].includes(e.key))&&e.preventDefault(),["Enter","ArrowDown"].includes(e.key)&&(g.value=!0),["Escape"].includes(e.key)&&(g.value=!1),["Enter","Escape","Tab"].includes(e.key)&&(Z.value&&["Enter","Tab"].includes(e.key)&&I(M.value[0]),E.value=!0),e.key==="ArrowDown"&&Z.value&&((t=ee.value)==null||t.focus("next")),!!a.multiple){if(["Backspace","Delete"].includes(e.key)){if(p.value<0){e.key==="Backspace"&&!d.value&&(p.value=f-1);return}const n=p.value,r=v.value[p.value];r&&!r.props.disabled&&I(r,!1),p.value=n>=f-1?f-2:n}if(e.key==="ArrowLeft"){if(p.value<0&&s>0)return;const n=p.value>-1?p.value-1:f-1;v.value[n]?p.value=n:(p.value=-1,F.value.setSelectionRange(d.value.length,d.value.length))}if(e.key==="ArrowRight"){if(p.value<0)return;const n=p.value+1;v.value[n]?p.value=n:(p.value=-1,F.value.setSelectionRange(0,0))}e.key==="Enter"&&d.value&&(I(fe(a,d.value)),d.value="")}}function he(){var e;T.value&&(E.value=!0,(e=F.value)==null||e.focus())}function I(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(a.multiple){const f=v.value.findIndex(n=>a.valueComparator(n.value,e.value)),t=s??!~f;if(~f){const n=t?[...v.value,e]:[...v.value];n.splice(f,1),v.value=n}else t&&(v.value=[...v.value,e]);a.clearOnSelect&&(d.value="")}else{const f=s!==!1;v.value=f?[e]:[],w.value=f?e.title:"",Ue(()=>{g.value=!1,E.value=!0})}}function de(e){T.value=!0,setTimeout(()=>{$.value=!0})}function ke(e){$.value=!1}function Ce(e){(e==null||e===""&&!a.multiple)&&(v.value=[])}return ae(T,(e,s)=>{e||e===s||(p.value=-1,g.value=!1,Z.value&&!$.value&&!v.value.some(f=>{let{value:t}=f;return t===P.value[0].value})?I(P.value[0]):a.multiple&&d.value&&I(fe(a,d.value)))}),ae(g,()=>{if(!a.hideSelected&&g.value&&v.value.length){const e=P.value.findIndex(s=>v.value.some(f=>a.valueComparator(f.value,s.value)));ll&&window.requestAnimationFrame(()=>{var s;e>=0&&((s=J.value)==null||s.scrollToIndex(e))})}}),ae(P,(e,s)=>{T.value&&(!e.length&&a.hideNoData&&(g.value=!1),!s.length&&e.length&&(g.value=!0))}),al(()=>{const e=!!(a.chips||c.chip),s=!!(!a.hideNoData||P.value.length||c["prepend-item"]||c["append-item"]||c["no-data"]),f=v.value.length>0,t=A.filterProps(a);return l(A,L({ref:F},t,{modelValue:d.value,"onUpdate:modelValue":[n=>d.value=n,Ce],focused:T.value,"onUpdate:focused":n=>T.value=n,validationValue:v.externalValue,counterValue:K.value,dirty:f,class:["v-combobox",{"v-combobox--active-menu":g.value,"v-combobox--chips":!!a.chips,"v-combobox--selection-slot":!!c.selection,"v-combobox--selecting-index":p.value>-1,[`v-combobox--${a.multiple?"multiple":"single"}`]:!0},a.class],style:a.style,readonly:a.readonly,placeholder:f?void 0:a.placeholder,"onClick:clear":ge,"onMousedown:control":Ve,onKeydown:ye}),{...c,default:()=>l(re,null,[l(Al,L({ref:G,modelValue:g.value,"onUpdate:modelValue":n=>g.value=n,activator:"parent",contentClass:"v-combobox__content",disabled:Q.value,eager:a.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:a.transition,onAfterLeave:he},a.menuProps),{default:()=>[s&&l(Tl,L({ref:ee,selected:z.value,selectStrategy:a.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:pe,onFocusin:de,onFocusout:ke,onScrollPassive:ie,tabindex:"-1","aria-live":"polite",color:a.itemColor??a.color},a.listProps),{default:()=>{var n,r,V;return[(n=c["prepend-item"])==null?void 0:n.call(c),!P.value.length&&!a.hideNoData&&(((r=c["no-data"])==null?void 0:r.call(c))??l(je,{title:te(a.noDataText)},null)),l(_l,{ref:J,renderless:!0,items:P.value},{default:S=>{var Se;let{item:C,index:H,itemRef:q}=S;const we=L(C.props,{ref:q,key:H,active:Z.value&&H===0?!0:void 0,onClick:()=>I(C,null)});return((Se=c.item)==null?void 0:Se.call(c,{item:C,index:H,props:we}))??l(je,we,{prepend:me=>{let{isSelected:ve}=me;return l(re,null,[a.multiple&&!a.hideSelected?l(wl,{key:C.value,modelValue:ve,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&l(Fl,{image:C.props.prependAvatar},null),C.props.prependIcon&&l(Ae,{icon:C.props.prependIcon},null)])},title:()=>{var me,ve;return E.value?C.title:El(C.title,(me=m(C))==null?void 0:me.title,((ve=d.value)==null?void 0:ve.length)??0)}})}}),(V=c["append-item"])==null?void 0:V.call(c)]}})]}),v.value.map((n,r)=>{function V(q){q.stopPropagation(),q.preventDefault(),I(n,!1)}const S={"onClick:close":V,onMousedown(q){q.preventDefault(),q.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=e?!!c.chip:!!c.selection,H=C?tl(e?c.chip({item:n,index:r,props:S}):c.selection({item:n,index:r})):void 0;if(!(C&&!H))return l("div",{key:n.value,class:["v-combobox__selection",r===p.value&&["v-combobox__selection--selected",ue.value]],style:r===p.value?se.value:{}},[e?c.chip?l(ol,{key:"chip-defaults",defaults:{VChip:{closable:a.closableChips,size:"small",text:n.title}}},{default:()=>[H]}):l(ze,L({key:"chip",closable:a.closableChips,size:"small",text:n.title,disabled:n.props.disabled},S),null):H??l("span",{class:"v-combobox__selection-text"},[n.title,a.multiple&&r<v.value.length-1&&l("span",{class:"v-combobox__selection-comma"},[x(",")])])])})]),"append-inner":function(){var S;for(var n=arguments.length,r=new Array(n),V=0;V<n;V++)r[V]=arguments[V];return l(re,null,[(S=c["append-inner"])==null?void 0:S.call(c,...r),(!a.hideNoData||a.items.length)&&a.menuIcon?l(Ae,{class:"v-combobox__menu-icon",icon:a.menuIcon,onMousedown:be,onClick:ul,"aria-label":te(B.value),title:te(B.value)},null):void 0])}})}),nl({isFocused:T,isPristine:E,menu:g,search:d,selectionIndex:p,filteredItems:M,select:I},F)}}),Ml={class:"text-h5"},Nl={key:0,class:"mt-2"},Ol={class:"d-flex align-center"},ba=il({__name:"List",setup(a){const y=dl(),O=i(),c=ml(),te=qe(),F=Ge(),T=i({title:b("Gestion des demandes")}),E=i([{text:b("Dashboard"),disabled:!1,href:"/"},{text:b("Gestion des demandes"),disabled:!0,href:"#"}]),$=i([]),G=i([]),J=i([]),_=He();vl(()=>{I(),de(),ke()}),i(!1);const g=i(!1),p=i(!1);i(!1),i(!1),i(!1),i(""),i(),i(!1);const W=i(null);i(null),i(null),i(null);const X=i(!1),B=i(!1);i();const oe=i(10),j=i(2),Y=i(2),ue=i(0),se=i(!1),v=i(!1);i(null);const R=i("");i(["primary","secondary","error","success","warning"]);const w=i([{key:"demand_date",order:"DESC"}]);i(0),i({total:0,validated:0,unvalidated:0});const d=i({search:null,status:null,date:null,event_type:null}),K=i({itemsPerPage:10,rowsPerPage:10,page:1,sortDesc:[!0],sortBy:[{key:"demand_date",order:"DESC"}]}),M=i(-1),m=i({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:""}),P=i({id:null,avatar:"1.jpg",name:"",email:"",password:"",changePassword:!0,jdate:"",role:"",rolestatus:"",customer:{}}),z=i(!1),Z=i([{title:b("Prénom"),align:"start",key:"customer.firstname",sortable:!1},{title:b("Nom"),align:"start",key:"customer.lastname",sortable:!1},{title:b("Email"),align:"start",key:"customer.email",sortable:!1},{title:b("Téléphone"),align:"start",key:"customer.phone",sortable:!1},{title:b("Prestation"),align:"start",key:"event_type"},{title:b("Date de la demande"),align:"start",key:"demand_date"},{title:b("Statut"),align:"start",key:"status"},{title:b("Date de l'événement "),key:"event_date"},{title:b("Heure"),key:"reception_start_time"},{title:b("Lieu"),key:"event_location"},{title:b("Convives"),key:"number_people"},{title:"Actions",key:"actions",sortable:!1}]),Q=D(()=>d.value.date&&d.value.date.length>0?y.format(d.value.date[0],"shortDate")+" - "+y.format(d.value.date[d.value.date.length-1],"shortDate"):null),ee=D(()=>m.value.event_date?y.format(m.value.event_date,"shortDate"):null);D(()=>_.demands.data.filter(u=>u.email.toLowerCase().includes(R.value.toLowerCase())));function ie(u){g.value=!1,M.value=$.value.indexOf(u),m.value=Object.assign({},u),v.value=!0}function pe(u){m.value=u,z.value=!0}function ge(){v.value=!1,setTimeout(()=>{m.value=Object.assign({customer:{}},P.value),M.value=-1},300)}function Ve(u,{setErrors:e}){var s;(s=O.value)==null||s.validate().then(({valid:f})=>{f&&(p.value=!0,_.addItem(m.value).then(t=>{if(t.data.error){e({apiError:t.data.message});return}m.value.id!=null?Object.assign($.value[M.value],t.data):$.value.unshift(t.data),p.value=!1,v.value=!1,m.value={customer:{}},c.showSuccess(b("Demande enregistrée avec succès")),de(),_.fetchStatistics()}).catch(t=>{p.value=!1,e({apiError:t})}).then(()=>{p.value=!1,e({apiError:null})}))})}function be(){_.deleteItem(m.value.id);const u=$.value.findIndex(e=>e.id==m.value.id);$.value.splice(u,1),z.value=!1,c.showSuccess(b("Demande supprimée avec succès")),_.fetchStatistics()}const ye=D(()=>M.value===-1?"Nouvelle demande":"Modifier la demande"),he=D(()=>d.value.date&&d.value.date.length?d.value.date.length>1?[y.format(d.value.date[0],"shortDate"),y.format(d.value.date[d.value.date.length-1],"shortDate")]:[y.format(d.value.date[0],"shortDate"),y.format(d.value.date[0],"shortDate")]:null);function I(){try{clearTimeout(W.value)}catch{}W.value=setTimeout(()=>{g.value=!0;let u="id",e="desc";console.log(w.value),w.value.length>0&&(u=w.value[0].key,e=w.value[0].order),_.fetchItems({term:R.value,paginate:oe.value,current_page:j.value,direction:e,order_by:u,page:K.value.page,per_page:K.value.itemsPerPage,...d.value,date:he.value}).then(s=>{if(s.data){const{data:f,current_page:t,next_page_url:n,total:r,per_page:V,to:S,last_page:C}=s.data;$.value=f,Y.value=C,ue.value=r}}).catch(s=>{console.error(s)}).then(()=>{g.value=!1})},1e3)}function de(){te.fetchItems({term:"",paginate:500,current_page:1,direction:"asc",order_by:"name",page:1,per_page:500}).then(u=>{if(u.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:n,to:r,last_page:V}=u.data;G.value=e}}).catch(u=>{console.error(u)}).then(()=>{})}function ke(){F.fetchItems({term:"",paginate:5e3,current_page:1,direction:"asc",order_by:"firstname",page:1,per_page:5e3}).then(u=>{if(u.data){const{data:e,current_page:s,next_page_url:f,total:t,per_page:n,to:r,last_page:V}=u.data;J.value=e.map(S=>({...S,name:S.firstname+" "+S.lastname+" ("+(S.is_customer?b("Client"):b("Prospect"))+")"}))}}).catch(u=>{console.error(u)}).then(()=>{})}ae([R,K,d],()=>{I()},{deep:!0}),cl(()=>{j.value>Y.value&&(j.value=Y.value)});function Ce(u){if(u){const e=J.value.find(s=>s.id==u);e&&(m.value.customer=e)}}return(u,e)=>{const s=Te("PencilIcon"),f=Te("TrashIcon");return xe(),Fe(re,null,[l(Je,{title:T.value.title,breadcrumbs:E.value},null,8,["title","breadcrumbs"]),l(_e,null,{default:o(()=>[l(k,{cols:"12"},{default:o(()=>[l(Vl)]),_:1}),l(k,{cols:"12"},{default:o(()=>[l(bl,{class:"border rounded-md",headers:Z.value,loading:g.value,items:$.value,"multi-sort":!1,"items-per-page":oe.value,"onUpdate:itemsPerPage":e[31]||(e[31]=t=>oe.value=t),"items-per-page-text":u.$t("Articles par page"),options:K.value,"onUpdate:options":e[32]||(e[32]=t=>K.value=t),"sort-by":w.value,"onUpdate:sortBy":e[33]||(e[33]=t=>w.value=t),page:j.value,"onUpdate:page":e[34]||(e[34]=t=>j.value=t),"items-length":ue.value,"onUpdate:itemsLength":e[35]||(e[35]=t=>ue.value=t),"show-select":!1,"loading-text":u.$t("Chargement des éléments"),"no-data-text":u.$t("Pas de données"),"no-results-text":u.$t("Aucun résultat"),onPageCount:e[36]||(e[36]=t=>Y.value=t)},{top:o(()=>[l(yl,{class:"rounded-t-md pl-2 pr-2",flat:""},{default:o(()=>[l(_e,null,{default:o(()=>[l(k,null,{default:o(()=>[l(A,{density:"compact",modelValue:d.value.search,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value.search=t),placeholder:u.$t("Rechercher prénom, nom, email, téléphone..."),"hide-details":"",variant:"solo",clearable:""},null,8,["modelValue","placeholder"])]),_:1}),l(k,null,{default:o(()=>[l(Re,{density:"compact",modelValue:d.value.event_type,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value.event_type=t),placeholder:u.$t("Prestation"),items:G.value,"item-value":"name","item-title":"name",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(k,null,{default:o(()=>[l(Re,{density:"compact",modelValue:d.value.status,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value.status=t),placeholder:u.$t("Statut"),items:N(_).statusesList,"item-value":"id","item-title":"label",clearable:"",multiple:"","hide-details":"",variant:"solo"},null,8,["modelValue","placeholder","items"])]),_:1}),l(k,null,{default:o(()=>[l(ce,{ref:"dialog",modelValue:X.value,"onUpdate:modelValue":e[8]||(e[8]=t=>X.value=t),"return-value":d.value.date,"onUpdate:returnValue":e[9]||(e[9]=t=>d.value.date=t),persistent:"",width:"290px"},{activator:o(({props:t})=>[l(A,L({modelValue:Q.value,"onUpdate:modelValue":e[3]||(e[3]=n=>Q.value=n),"prepend-inner-icon":"bx-calendar"},t,{density:"compact",placeholder:u.$t("Date"),"hide-details":"",variant:"solo",clearable:"",readonly:"","onClick:clear":e[4]||(e[4]=n=>d.value.date=null)}),null,16,["modelValue","placeholder"])]),default:o(({isActive:t})=>[l(Le,{locale:"fr"},{default:o(()=>[l(Me,{modelValue:d.value.date,"onUpdate:modelValue":e[7]||(e[7]=n=>d.value.date=n),"hide-header":"",multiple:"range"},{actions:o(()=>[l(U,{color:"primary",onClick:e[5]||(e[5]=n=>X.value=!1)},{default:o(()=>[x(h(u.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[6]||(e[6]=n=>X.value=!1)},{default:o(()=>[x(h(u.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(k,{class:""},{default:o(()=>[l(ce,{modelValue:v.value,"onUpdate:modelValue":e[28]||(e[28]=t=>v.value=t),"max-width":"600px"},{activator:o(({props:t})=>[l(U,L({color:"primary",class:"align-self-end float-end",variant:"flat",onClick:e[10]||(e[10]=n=>ie({customer:{}})),dark:""},t),{default:o(()=>[x(h(u.$t("Ajouter une demande")),1)]),_:2},1040)]),default:o(()=>[l(Ne,null,{default:o(()=>[l(Oe,{class:"pa-4 bg-secondary"},{default:o(()=>[De("span",Ml,h(ye.value),1)]),_:1}),l(N(pl),{ref_key:"refForm",ref:O,modelValue:se.value,"onUpdate:modelValue":e[27]||(e[27]=t=>se.value=t),onSubmit:Ve},{default:o(({errors:t,isSubmitting:n})=>[l(Sl,null,{default:o(()=>[l($l,{class:"px-0"},{default:o(()=>[l(_e,null,{default:o(()=>[l(k,{cols:"12"},{default:o(()=>[l(Pl,{modelValue:m.value.customer_id,"onUpdate:modelValue":[e[11]||(e[11]=r=>m.value.customer_id=r),Ce],placeholder:u.$t("Client"),items:J.value,"item-value":"id","item-title":"name",clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.customer.firstname,"onUpdate:modelValue":e[12]||(e[12]=r=>m.value.customer.firstname=r),rules:[N($e)],label:u.$t("Prénom")},null,8,["modelValue","rules","label"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.customer.lastname,"onUpdate:modelValue":e[13]||(e[13]=r=>m.value.customer.lastname=r),rules:[N($e)],label:u.$t("Nom")},null,8,["modelValue","rules","label"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.customer.email,"onUpdate:modelValue":e[14]||(e[14]=r=>m.value.customer.email=r),label:u.$t("Email")},null,8,["modelValue","label"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.customer.phone,"onUpdate:modelValue":e[15]||(e[15]=r=>m.value.customer.phone=r),label:u.$t("Téléphone")},null,8,["modelValue","label"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(Ll,{modelValue:m.value.event_type,"onUpdate:modelValue":e[16]||(e[16]=r=>m.value.event_type=r),placeholder:u.$t("Type d'événement"),items:G.value.map(r=>r.name),clearable:"","hide-details":"",variant:"outlined"},null,8,["modelValue","placeholder","items"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(ce,{ref:"dialogDemandDate",modelValue:B.value,"onUpdate:modelValue":e[22]||(e[22]=r=>B.value=r),"return-value":m.value.event_date,"onUpdate:returnValue":e[23]||(e[23]=r=>m.value.event_date=r),persistent:"",width:"290px"},{activator:o(({props:r})=>[l(A,L({modelValue:ee.value,"onUpdate:modelValue":e[17]||(e[17]=V=>ee.value=V),"prepend-inner-icon":"bx-calendar"},r,{placeholder:u.$t("Date de la demande"),"hide-details":"",clearable:"",readonly:"","onClick:clear":e[18]||(e[18]=V=>m.value.event_date=null)}),null,16,["modelValue","placeholder"])]),default:o(({isActive:r})=>[l(Le,{locale:"fr"},{default:o(()=>[l(Me,{modelValue:m.value.event_date,"onUpdate:modelValue":e[21]||(e[21]=V=>m.value.event_date=V),"hide-header":""},{actions:o(()=>[l(U,{color:"primary",onClick:e[19]||(e[19]=V=>B.value=!1)},{default:o(()=>[x(h(u.$t("Annuler")),1)]),_:1}),l(le),l(U,{variant:"elevated",color:"primary",onClick:e[20]||(e[20]=V=>B.value=!1)},{default:o(()=>[x(h(u.$t("OK")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","return-value"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.reception_start_time,"onUpdate:modelValue":e[24]||(e[24]=r=>m.value.reception_start_time=r),"hide-details":"",label:u.$t("La réception se déroulera plutôt")},null,8,["modelValue","label"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.event_location,"onUpdate:modelValue":e[25]||(e[25]=r=>m.value.event_location=r),"hide-details":"",label:u.$t("Lieu de l'événement")},null,8,["modelValue","label"])]),_:1}),l(k,{cols:"12",md:"6"},{default:o(()=>[l(A,{modelValue:m.value.number_people,"onUpdate:modelValue":e[26]||(e[26]=r=>m.value.number_people=r),"hide-details":"",type:"number",label:u.$t("Nombre de convives")},null,8,["modelValue","label"])]),_:1})]),_:1}),t.apiError?(xe(),Fe("div",Nl,[l(gl,{color:"error"},{default:o(()=>[x(h(t.apiError),1)]),_:2},1024)])):Ee("",!0)]),_:2},1024)]),_:2},1024),l(Be,null,{default:o(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:ge},{default:o(()=>[x(h(u.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",loading:p.value,type:"submit"},{default:o(()=>[x(h(u.$t("Sauvegarder")),1)]),_:1},8,["loading"]),l(le)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(ce,{modelValue:z.value,"onUpdate:modelValue":e[30]||(e[30]=t=>z.value=t),"max-width":"500px"},{default:o(()=>[l(Ne,null,{default:o(()=>[l(Oe,{class:"text-h5 text-center py-6"},{default:o(()=>[x(h(u.$t("Êtes-vous sûr de vouloir supprimer cet élément ?")),1)]),_:1}),l(Be,null,{default:o(()=>[l(le),l(U,{color:"error",variant:"flat",dark:"",onClick:e[29]||(e[29]=t=>z.value=!1)},{default:o(()=>[x(h(u.$t("Annuler")),1)]),_:1}),l(U,{color:"success",variant:"flat",dark:"",onClick:be},{default:o(()=>[x(h(u.$t("OK")),1)]),_:1}),l(le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.demand_date":o(({item:t})=>[x(h(N(Pe)(t.demand_date)),1)]),"item.event_date":o(({item:t})=>[x(h(N(Pe)(t.event_date)),1)]),"item.status":o(({item:t})=>[l(ze,{color:N(_).statusColor(t.status),size:"small",label:""},{default:o(()=>[x(h(N(_).statusText(t.status)),1)]),_:2},1032,["color"])]),"item.actions":o(({item:t})=>[De("div",Ol,[l(U,{density:"compact",color:"primary",variant:"outlined",to:"/demands/"+t.id},{default:o(()=>[x(h(u.$t("Voir")),1)]),_:2},1032,["to"]),l(Ke,{text:u.$t("Modifier")},{activator:o(({props:n})=>[l(U,L({icon:"",flat:"",onClick:r=>ie(t)},n),{default:o(()=>[l(s,{"stroke-width":"1.5",size:"20",class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"]),t.prestation==null?(xe(),fl(Ke,{key:0,text:u.$t("Supprimer")},{activator:o(({props:n})=>[l(U,L({icon:"",flat:"",onClick:r=>pe(t)},n),{default:o(()=>[l(f,{"stroke-width":"1.5",size:"20",class:"text-error"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):Ee("",!0)])]),"no-data":o(()=>[De("span",null,h(u.$t("Aucune donnée disponible")),1)]),_:1},8,["headers","loading","items","items-per-page","items-per-page-text","options","sort-by","page","items-length","loading-text","no-data-text","no-results-text"])]),_:1})]),_:1})],64)}}});export{ba as default};
